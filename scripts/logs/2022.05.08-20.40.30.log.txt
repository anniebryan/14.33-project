-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/anniebryan/Documents/College/2021-22/14.33/Project/scripts/logs/2022.05.08-20.40.30.log.txt
  log type:  text
 opened on:   8 May 2022, 20:40:30

. 
. ssc install estout, replace
checking estout consistency and verifying not already installed...
all files already exist and are up to date.

. ssc install outreg2
checking outreg2 consistency and verifying not already installed...
all files already exist and are up to date.

. ssc install geodist
checking geodist consistency and verifying not already installed...
all files already exist and are up to date.

. 
. * Stata version control
. version 17

. 
. * Create directories for output files
. cap mkdir "$MyProject/processed"

. cap mkdir "$MyProject/processed/intermediate"

. cap mkdir "$MyProject/results"

. cap mkdir "$MyProject/results/figures"

. cap mkdir "$MyProject/results/intermediate"

. cap mkdir "$MyProject/results/tables"

. 
. * Run project analysis
. do "$MyProject/scripts/1_process_data.do"

. ************
. * SCRIPT: 1_process_data.do
. * PURPOSE: imports the raw datasets and converts them into a stata-readable format
. ************
. 
. // MA zoning data
. insheet using "$MyProject/data/ma-zoning-laws/ma-zoning-laws.csv", comma clear
(3 vars, 352 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/ma_zoning_laws_uncleaned.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/ma_zoning_laws_uncleaned.dta saved

. 
. // US states legality data
. insheet using "$MyProject/data/us-states-legality.csv", comma clear
(6 vars, 51 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/us_states_legality.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/us_states_legality.dta saved

. 
. // MA dispensaries data
. insheet using "$MyProject/data/dispensaries.csv", comma clear
(66 vars, 887 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/dispensaries_uncleaned.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/dispensaries_uncleaned.dta saved

. 
. // MA property assessments data
. forvalues y = 2014/2021 {
  2.         insheet using "$MyProject/data/property_assessment/property-assessment-fy`y'.csv", comma clear
  3.         compress
  4.         save "$MyProject/processed/intermediate/property_assessments_ma_`y'_uncleaned.dta", replace
  5. }
(56 vars, 164,091 obs)
  variable st_name was str25 now str24
  variable u_heat_typ was str2 now str1
  (328,182 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2014_uncleaned.dta saved
(56 vars, 168,115 obs)
  variable st_name was str25 now str24
  variable st_name_suf was str4 now str3
  variable full_address was str55 now str48
  variable u_heat_typ was str2 now str1
  (1,681,150 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2015_uncleaned.dta saved
(77 vars, 169,199 obs)
  variable st_name was str25 now str24
  variable st_name_suf was str4 now str3
  (338,398 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2016_uncleaned.dta saved
(75 vars, 170,910 obs)
  variable st_name was str25 now str24
  variable st_name_suf was str4 now str3
  (341,820 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2017_uncleaned.dta saved
(75 vars, 172,841 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2018_uncleaned.dta saved
(75 vars, 174,668 obs)
  variable st_name was str25 now str24
  variable st_name_suf was str4 now str3
  (349,336 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2019_uncleaned.dta saved
(75 vars, 175,052 obs)
  variable st_name_suf was str5 now str4
  (175,052 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2020_uncleaned.dta saved
(63 vars, 177,091 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2021_uncleaned.dta saved

. 
. // Zillow home value data
. insheet using "$MyProject/data/zhvi_sa_35_65.csv", comma clear
(274 vars, 30,468 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/zillow_home_values_uncleaned.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/zillow_home_values_uncleaned.dta saved

. 
. // Boston crash data
. forvalues y = 2008/2021 {
  2.         insheet using "$MyProject/data/boston-crashes/`y'_Crashes.csv", comma clear
  3.         compress
  4.         save "$MyProject/processed/intermediate/crashes_boston_`y'_uncleaned.dta", replace
  5. }
(117 vars, 136,384 obs)
  variable rdwy was str105 now str104
  variable non_mtrst_type_cl was str78 now str77
  variable non_mtrst_loc_cl was str150 now str149
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str52 now str51
  (681,920 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2008_uncleaned.dta saved
(115 vars, 117,776 obs)
  variable rdwy was str119 now str118
  variable near_int_rdwy was str50 now str49
  variable exit_rte was str5 now str4
  variable non_mtrst_type_cl was str118 now str117
  variable non_mtrst_actn_cl was str136 now str135
  variable non_mtrst_loc_cl was str146 now str145
  variable rmv_doc_ids was str66 now str65
  variable crash_rpt_ids was str70 now str69
  variable tostreetname was str56 now str55
  (1,059,984 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2009_uncleaned.dta saved
(115 vars, 115,643 obs)
  variable rdwy was str124 now str123
  variable non_mtrst_type_cl was str83 now str82
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str154 now str153
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str50 now str49
  (693,858 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2010_uncleaned.dta saved
(115 vars, 120,632 obs)
  variable vehc_seq_events_cl was str727 now str726
  variable rdwy was str126 now str125
  variable near_int_rdwy was str50 now str49
  variable mm_rte was str6 now str5
  variable non_mtrst_type_cl was str91 now str90
  variable non_mtrst_actn_cl was str136 now str135
  variable non_mtrst_loc_cl was str115 now str114
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str63 now str62
  variable tostreetname was str56 now str55
  (1,206,320 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2011_uncleaned.dta saved
(115 vars, 122,646 obs)
  variable rdwy was str125 now str124
  variable near_int_rdwy was str50 now str49
  variable non_mtrst_type_cl was str83 now str82
  variable non_mtrst_loc_cl was str154 now str153
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str62 now str61
  (735,876 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2012_uncleaned.dta saved
(115 vars, 125,285 obs)
  variable vehc_seq_events_cl was str1128 now str1127
  variable drvr_cntrb_circ_cl was str512 now str511
  variable rdwy was str128 now str127
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str88 now str87
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str115 now str114
  variable rmv_doc_ids was str100 now str99
  variable crash_rpt_ids was str94 now str93
  variable drvr_distracted_cl was str145 now str144
  variable fromstreetname was str43 now str42
  (1,378,135 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2013_uncleaned.dta saved
(115 vars, 130,233 obs)
  variable rdwy was str143 now str142
  variable non_mtrst_type_cl was str83 now str82
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str154 now str153
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str63 now str62
  variable drvr_distracted_cl was str182 now str181
  variable tostreetname was str56 now str55
  (1,041,864 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2014_uncleaned.dta saved
(115 vars, 139,050 obs)
  variable rdwy was str143 now str142
  variable near_int_rdwy was str50 now str49
  variable non_mtrst_type_cl was str100 now str99
  variable non_mtrst_loc_cl was str134 now str133
  variable rmv_doc_ids was str66 now str65
  variable crash_rpt_ids was str62 now str61
  (834,300 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2015_uncleaned.dta saved
(115 vars, 143,474 obs)
  variable rdwy was str138 now str137
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str82 now str81
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str154 now str153
  variable rmv_doc_ids was str151 now str150
  variable crash_rpt_ids was str160 now str159
  variable drvr_distracted_cl was str194 now str193
  (1,147,792 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2016_uncleaned.dta saved
(115 vars, 145,068 obs)
  variable drvr_cntrb_circ_cl was str512 now str511
  variable rdwy was str149 now str148
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str170 now str169
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str210 now str209
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str73 now str72
  variable drvr_distracted_cl was str228 now str227
  (1,305,612 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2017_uncleaned.dta saved
(117 vars, 142,272 obs)
  variable rdwy was str114 now str113
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str83 now str82
  variable non_mtrst_actn_cl was str182 now str181
  variable non_mtrst_loc_cl was str154 now str153
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str73 now str72
  (995,904 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2018_uncleaned.dta saved
(117 vars, 140,939 obs)
  variable rdwy was str129 now str128
  variable near_int_rdwy was str53 now str52
  variable non_mtrst_type_cl was str70 now str69
  variable non_mtrst_actn_cl was str136 now str135
  variable non_mtrst_loc_cl was str115 now str114
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str63 now str62
  (986,573 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2019_uncleaned.dta saved
(116 vars, 100,724 obs)
  variable vehc_seq_events_cl was str815 now str814
  variable rdwy was str125 now str124
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str66 now str65
  variable non_mtrst_actn_cl was str136 now str135
  variable non_mtrst_loc_cl was str115 now str114
  variable rmv_doc_ids was str100 now str99
  variable crash_rpt_ids was str88 now str87
  (805,792 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2020_uncleaned.dta saved
(115 vars, 123,064 obs)
  variable rdwy was str118 now str117
  variable near_int_rdwy was str52 now str51
  variable non_mtrst_type_cl was str66 now str65
  variable non_mtrst_loc_cl was str115 now str114
  variable rmv_doc_ids was str83 now str82
  variable crash_rpt_ids was str98 now str97
  variable lclty_name was str15 now str13
  (984,512 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2021_uncleaned.dta saved

. 
. // US crash data
. insheet using "$MyProject/data/fars_nhtsa_fatality_rates_by_state.csv", comma clear
(56 vars, 53 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/crashes_us_uncleaned.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_us_uncleaned.dta saved

. 
. // Boston crime data
. forvalues y = 2015/2022 {
  2.         insheet using "$MyProject/data/crime-incident-reports/crime-incident-reports-`y'.csv", comma clear
  3.         compress
  4.         save "$MyProject/processed/intermediate/crime_boston_`y'_uncleaned.dta", replace
  5. }
(17 vars, 53,597 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2015_uncleaned.dta saved
(17 vars, 99,430 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2016_uncleaned.dta saved
(17 vars, 101,338 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2017_uncleaned.dta saved
(17 vars, 98,888 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2018_uncleaned.dta saved
(17 vars, 87,184 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2019_uncleaned.dta saved
(17 vars, 70,894 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2020_uncleaned.dta saved
(17 vars, 71,721 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2021_uncleaned.dta saved
(17 vars, 14,650 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2022_uncleaned.dta saved

. 
. // Offense codes for Boston crime data
. import excel "$MyProject/data/rmsoffensecodes.xlsx", clear
(2 vars, 577 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/offense_codes.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/offense_codes.dta saved

. 
. // US crime data
. forvalues y = 2008/2019 {
  2.         import excel "$MyProject/data/fbi_offenses_known_to_law_enforcement/fbi_offenses_known_to_law_enforcement_`y'.xls", clear
  3.         compress
  4.         save "$MyProject/processed/intermediate/crime_us_`y'_uncleaned.dta", replace
  5. }
(17 vars, 8,784 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2008_uncleaned.dta saved
(13 vars, 9,159 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2009_uncleaned.dta saved
(13 vars, 9,321 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2010_uncleaned.dta saved
(18 vars, 9,325 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2011_uncleaned.dta saved
(15 vars, 9,502 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2012_uncleaned.dta saved
(17 vars, 9,306 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2013_uncleaned.dta saved
(14 vars, 9,368 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2014_uncleaned.dta saved
(14 vars, 9,409 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2015_uncleaned.dta saved
(13 vars, 2,626 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2016_uncleaned.dta saved
(19 vars, 9,593 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2017_uncleaned.dta saved
(13 vars, 9,266 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2018_uncleaned.dta saved
(13 vars, 8,117 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2019_uncleaned.dta saved

. 
. // Zip code centroids data
. insheet using "$MyProject/data/ZIP_Code_Population_Weighted_Centroids.csv", comma clear
(10 vars, 35,352 obs)

. compress
  (0 bytes saved)

. save "$MyProject/processed/intermediate/zip_code_centroids_uncleaned.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/zip_code_centroids_uncleaned.dta saved

. 
. // Census income data
. forvalues y = 2011/2020 {
  2.         insheet using "$MyProject/data/census-income/ACSST5Y`y'.csv", comma clear
  3.         compress
  4.         save "$MyProject/processed/intermediate/census_income_`y'_uncleaned.dta", replace
  5. }
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2011_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2012_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2013_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2014_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2015_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2016_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2017_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2018_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2019_uncleaned.dta saved
(130 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2020_uncleaned.dta saved

. 
. // Census age/sex data
. forvalues y = 2011/2020 {
  2.         foreach race in "white" "black" "asian" "amind" "pacif" {
  3.                 insheet using "$MyProject/data/census-age-by-sex/ACSDT5Y`y'-`race'.csv", comma clear
  4.                 compress
  5.                 save "$MyProject/processed/intermediate/census_age_sex_`race'_`y'_uncleaned.dta", replace
  6.         }
  7. }
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2011_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2011_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2011_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2011_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2011_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2012_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2012_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2012_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2012_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2012_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2013_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2013_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2013_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2013_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2013_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2014_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2014_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2014_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2014_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2014_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2015_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2015_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2015_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2015_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2015_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2016_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2016_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2016_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2016_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2016_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2017_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2017_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2017_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2017_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2017_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2018_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2018_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2018_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2018_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2018_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2019_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2019_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2019_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2019_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2019_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2020_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2020_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2020_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2020_uncleaned.dta saved
(64 vars, 540 obs)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2020_uncleaned.dta saved

. 
. ** EOF
. 
end of do-file

. 
. do "$MyProject/scripts/2a_clean_zip_codes_data.do"

. ************
. * SCRIPT: 2a_clean_zip_codes_data.do
. * PURPOSE: processes the zip code centroids dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/intermediate/zip_code_centroids_uncleaned.dta", clear

. 
. * Keep only zip codes in Massachusetts
. keep if usps_zip_pref_state_1221=="MA"
(34,776 observations deleted)

. 
. * Select only desired columns
. keep std_zip5 usps_zip_pref_city_1221 usps_zip_pref_state_1221 latitude longitude

. 
. * Rename columns
. rename std_zip5 zipcode

. rename usps_zip_pref_city_1221 city

. rename usps_zip_pref_state_1221 state

. 
. * Make city name proper
. replace city = proper(city)
(576 real changes made)

. 
. * Make zipcode type string
. tostring zipcode, replace
zipcode was long now str4

. replace zipcode = "0" + zipcode
variable zipcode was str4 now str5
(576 real changes made)

. 
. * Save dataset
. compress
  variable city was str26 now str18
  (4,608 bytes saved)

. save "$MyProject/processed/zip_code_centroids.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved

. 
. * Get distance to dispensaries
. forvalues i = 1/11 {
  2.         use "$MyProject/processed/dispensaries_boston.dta", clear
  3.         sort id
  4.         local disp_lat = latitude[`i']
  5.         local disp_lon = longitude[`i']
  6.         
.         use "$MyProject/processed/zip_code_centroids.dta", clear
  7.         geodist `disp_lat' `disp_lon' latitude longitude, gen(dist_`i') mile
  8.         save "$MyProject/processed/zip_code_centroids.dta", replace
  9. }
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved

. 
. * Get minimum distance to a dispensary
. egen min_dist_disp = rowmin(dist_1 dist_2 dist_3 dist_4 dist_5 dist_6 dist_7 dist_8 dist_9 dist_10 dist_11)

. 
. * Get minimum distance to a dispensary
. gen min_dist_2019 = dist_8

. gen min_dist_2020 = min(dist_7, dist_8, dist_10, dist_11)

. gen min_dist_2021 = min(dist_1, dist_2, dist_3, dist_4, dist_5, dist_7, dist_8, dist_9, dist_10, dist_11)

. gen min_dist_2022 = min(dist_1, dist_2, dist_3, dist_4, dist_5, dist_6, dist_7, dist_8, dist_9, dist_10, dist_11)

. 
. drop dist_1 dist_2 dist_3 dist_4 dist_5 dist_6 dist_7 dist_8 dist_9 dist_10 dist_11

. 
. compress
  (0 bytes saved)

. save "$MyProject/processed/zip_code_centroids.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zip_code_centroids.dta saved

. 
. * Create file containing only Boston zipcodes
. destring zipcode, replace
zipcode: all characters numeric; replaced as int

. format zipcode %05.0f

. 
. local boston_zipcodes 02108 02109 02110 02111 02113 02114 02115 02116 02118 02119 02120 02121 02122 02124 02125 02126 02127 02128 02129 02130 02131 02132 02133 02134 02135 02136
>  02163 02199 02203 02210 02215 02222

. gen boston = 0

. foreach z in `boston_zipcodes' {
  2.         replace boston = 1 if zipcode==`z'
  3. }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)

. drop if boston == 0
(546 observations deleted)

. drop boston

. 
. save "$MyProject/processed/boston_zip_code_centroids.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/boston_zip_code_centroids.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2b_clean_census_income_data.do"

. ************
. * SCRIPT: 2b_clean_census_income_data.do
. * PURPOSE: processes the census income datasets in preparation for analysis
. ************
. 
. * Clean dataset for each year, one at a time
. forvalues y = 2011/2020 {
  2.         use "$MyProject/processed/intermediate/census_income_`y'_uncleaned.dta", clear
  3.         
.         * Keep only desired columns
.         keep v2 v3 v25 v27
  4.         
.         * Rename variable names
.         rename v2 zipcode
  5.         rename v3 num_hh_`y'
  6.         rename v25 est_hh_med_inc_`y'
  7.         rename v27 est_hh_mean_inc_`y'
  8.         
.         * Keep only desired rows
.         drop if _n<=2
  9.         drop if missing(est_hh_med_inc_`y') | real(est_hh_med_inc_`y')==.
 10.         drop if missing(est_hh_mean_inc_`y') | real(est_hh_mean_inc_`y')==.
 11.         
.         * Split zip code column
.         split zipcode, parse(" ")
 12.         drop zipcode zipcode1
 13.         rename zipcode2 zipcode
 14.         order zipcode
 15.         
.         * Turn numeric values to ints
.         destring num_hh_`y', replace
 16.         destring est_hh_med_inc_`y', replace
 17.         destring est_hh_mean_inc_`y', replace
 18.         
.         * Create variable for total income (mean income per household * # households)
.         gen total_inc_`y' = num_hh_`y' * est_hh_mean_inc_`y'
 19.         
.         * Save dataset for year y
.         compress
 20.         save "$MyProject/processed/intermediate/census_income_`y'.dta", replace
 21. }
(2 observations deleted)
(15 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2011: all characters numeric; replaced as int
est_hh_med_inc_2011: all characters numeric; replaced as long
est_hh_mean_inc_2011: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2011.dta saved
(2 observations deleted)
(11 observations deleted)
(3 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2012: all characters numeric; replaced as int
est_hh_med_inc_2012: all characters numeric; replaced as long
est_hh_mean_inc_2012: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2012.dta saved
(2 observations deleted)
(16 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2013: all characters numeric; replaced as int
est_hh_med_inc_2013: all characters numeric; replaced as long
est_hh_mean_inc_2013: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2013.dta saved
(2 observations deleted)
(16 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2014: all characters numeric; replaced as int
est_hh_med_inc_2014: all characters numeric; replaced as long
est_hh_mean_inc_2014: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2014.dta saved
(2 observations deleted)
(21 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2015: all characters numeric; replaced as int
est_hh_med_inc_2015: all characters numeric; replaced as long
est_hh_mean_inc_2015: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2015.dta saved
(2 observations deleted)
(20 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2016: all characters numeric; replaced as int
est_hh_med_inc_2016: all characters numeric; replaced as long
est_hh_mean_inc_2016: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2016.dta saved
(2 observations deleted)
(23 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2017: all characters numeric; replaced as int
est_hh_med_inc_2017: all characters numeric; replaced as long
est_hh_mean_inc_2017: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2017.dta saved
(2 observations deleted)
(19 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2018: all characters numeric; replaced as int
est_hh_med_inc_2018: all characters numeric; replaced as long
est_hh_mean_inc_2018: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2018.dta saved
(2 observations deleted)
(23 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2019: all characters numeric; replaced as int
est_hh_med_inc_2019: all characters numeric; replaced as long
est_hh_mean_inc_2019: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2019.dta saved
(2 observations deleted)
(28 observations deleted)
(0 observations deleted)
variables created as string: 
zipcode1  zipcode2
num_hh_2020: all characters numeric; replaced as int
est_hh_med_inc_2020: all characters numeric; replaced as long
est_hh_mean_inc_2020: all characters numeric; replaced as long
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_income_2020.dta saved

. 
. * Merge datasets from 2011-2020 into one dataset containing all years
. use "$MyProject/processed/intermediate/census_income_2011.dta", clear

. forvalues y = 2012/2020 {
  2.         merge 1:1 zipcode using "$MyProject/processed/intermediate/census_income_`y'.dta"
  3.         drop _merge
  4. }

    Result                      Number of obs
    -----------------------------------------
    Not matched                             1
        from master                         0  (_merge==1)
        from using                          1  (_merge==2)

    Matched                               523  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             4
        from master                         3  (_merge==1)
        from using                          1  (_merge==2)

    Matched                               521  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             3
        from master                         3  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               522  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             8
        from master                         8  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               517  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             7
        from master                         7  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               518  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                            10
        from master                        10  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               515  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             6
        from master                         6  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               519  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                            10
        from master                        10  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               515  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                            15
        from master                        15  (_merge==1)
        from using                          0  (_merge==2)

    Matched                               510  (_merge==3)
    -----------------------------------------

. 
. * Add city name
. merge 1:1 zipcode using "$MyProject/processed/zip_code_centroids.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                           103
        from master                        26  (_merge==1)
        from using                         77  (_merge==2)

    Matched                               499  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(103 observations deleted)

. drop _merge latitude longitude min_dist_* state

. 
. * Add MA zoning laws
. merge m:1 city using "$MyProject/processed/ma_zoning_laws.dta"
(variable city was str18, now str21 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                           171
        from master                       139  (_merge==1)
        from using                         32  (_merge==2)

    Matched                               360  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(171 observations deleted)

. drop _merge

. order zipcode city retail_legal adult_use_legal delivery_legal

. 
. * Save dataset containing all years
. compress
  variable city was str21 now str16
  (1,800 bytes saved)

. save "$MyProject/processed/census_income.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/census_income.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2c_clean_census_race_sex_data.do"

. ************
. * SCRIPT: 2c_clean_census_race_sex_data.do
. * PURPOSE: processes the census race by sex datasets in preparation for analysis
. ************
. 
. * Clean dataset for each year and each race, one at a time
. forvalues y = 2011/2020 {
  2.         foreach race in "white" "black" "asian" "amind" "pacif" {
  3.                 use "$MyProject/processed/intermediate/census_age_sex_`race'_`y'_uncleaned.dta", clear
  4.                 
.                 * Keep only desired columns
.                 keep v3 v5 v7 v9 v11 v13 v15 v17 v19 v21 v23 v25 v27 v29 v31 v33 v35 v37 v39 v41 v43 v45 v47 v49 v51 v53 v55 v57 v59 v61 v64
  5.                 order v64
  6.                 
.                 * Rename variable names
.                 rename v64 zipcode
  7.                 
.                 rename v3 tot_`race'_male_`y'
  8.                 rename v5 num_under_5_`race'_male_`y'
  9.                 rename v7 num_5_to_9_`race'_male_`y'
 10.                 rename v9 num_10_to_14_`race'_male_`y'
 11.                 rename v11 num_15_to_17_`race'_male_`y'
 12.                 rename v13 num_18_to_19_`race'_male_`y'
 13.                 rename v15 num_20_to_24_`race'_male_`y'
 14.                 rename v17 num_25_to_29_`race'_male_`y'
 15.                 rename v19 num_30_to_34_`race'_male_`y'
 16.                 rename v21 num_35_to_44_`race'_male_`y'
 17.                 rename v23 num_45_to_54_`race'_male_`y'
 18.                 rename v25 num_55_to_64_`race'_male_`y'
 19.                 rename v27 num_65_to_74_`race'_male_`y'
 20.                 rename v29 num_75_to_84_`race'_male_`y'
 21.                 rename v31 num_over_85_`race'_male_`y'
 22.                 
.                 rename v33 tot_`race'_female_`y'
 23.                 rename v35 num_under_5_`race'_female_`y'
 24.                 rename v37 num_5_to_9_`race'_female_`y'
 25.                 rename v39 num_10_to_14_`race'_female_`y'
 26.                 rename v41 num_15_to_17_`race'_female_`y'
 27.                 rename v43 num_18_to_19_`race'_female_`y'
 28.                 rename v45 num_20_to_24_`race'_female_`y'
 29.                 rename v47 num_25_to_29_`race'_female_`y'
 30.                 rename v49 num_30_to_34_`race'_female_`y'
 31.                 rename v51 num_35_to_44_`race'_female_`y'
 32.                 rename v53 num_45_to_54_`race'_female_`y'
 33.                 rename v55 num_55_to_64_`race'_female_`y'
 34.                 rename v57 num_65_to_74_`race'_female_`y'
 35.                 rename v59 num_75_to_84_`race'_female_`y'
 36.                 rename v61 num_over_85_`race'_female_`y'
 37.                 
.                 * Keep only desired rows
.                 keep if _n>2
 38.                 
.                 * Split zip code column
.                 split zipcode, parse(" ")
 39.                 drop zipcode zipcode1
 40.                 rename zipcode2 zipcode
 41.                 order zipcode
 42.                 
.                 * Turn numeric values to ints
.                 foreach sex in "male" "female" {
 43.                         destring tot_`race'_`sex'_`y', replace
 44.                         foreach age in "under_5" "5_to_9" "10_to_14" "15_to_17" "18_to_19" "20_to_24" "25_to_29" "30_to_34" "35_to_44" "45_to_54" "55_to_64" "65_to_74" "75_to
> _84" "over_85" {
 45.                                 destring num_`age'_`race'_`sex'_`y', replace
 46.                         }
 47.                 }
 48. 
.                 compress
 49.                 save "$MyProject/processed/intermediate/census_age_sex_`race'_`y'.dta", replace
 50.         }
 51.         
.         * Merge datasets from each race into one dataset containing all races
.         use "$MyProject/processed/intermediate/census_age_sex_white_`y'.dta", clear
 52.         foreach race in "black" "asian" "amind" "pacif" {
 53.                 merge 1:1 zipcode using "$MyProject/processed/intermediate/census_age_sex_`race'_`y'.dta"
 54.                 drop _merge
 55.         }
 56.         
.         * Add columns for aggregate values across races
.         foreach sex in "male" "female" {
 57.                 gen total_`sex'_`y' = 0
 58.         }
 59.         
.         foreach age in "under_5" "5_to_9" "10_to_14" "15_to_17" "18_to_19" "20_to_24" "25_to_29" "30_to_34" "35_to_44" "45_to_54" "55_to_64" "65_to_74" "75_to_84" "over_85" {
 60.                 gen total_`age'_`y' = 0
 61.         }
 62.         
.         foreach race in "white" "black" "asian" "amind" "pacif" {
 63.                 gen total_`race'_`y' = 0
 64.                 foreach sex in "male" "female" {
 65.                         replace total_`sex'_`y' = total_`sex'_`y' + tot_`race'_`sex'_`y'
 66.                         replace total_`race'_`y' = total_`race'_`y' + tot_`race'_`sex'_`y'
 67.                         foreach age in "under_5" "5_to_9" "10_to_14" "15_to_17" "18_to_19" "20_to_24" "25_to_29" "30_to_34" "35_to_44" "45_to_54" "55_to_64" "65_to_74" "75_to
> _84" "over_85" {
 68.                                 replace total_`age'_`y' = total_`age'_`y' + num_`age'_`race'_`sex'_`y'
 69.                         }
 70.                 }
 71.         }
 72.         
.         gen total_`y' = total_male_`y' + total_female_`y'
 73.         
.         foreach sex in "male" "female" {
 74.                 gen prop_`sex'_`y' = total_`sex'_`y' / total_`y'
 75.         }
 76.         
.         foreach race in "white" "black" "asian" "amind" "pacif" {
 77.                 gen prop_`race'_`y' = total_`race'_`y' / total_`y'
 78.         }
 79.         
.         gen total_under_9_`y' = total_under_5_`y' + total_5_to_9_`y'
 80.         gen total_under_14_`y' = total_under_9_`y' + total_10_to_14_`y'
 81.         gen total_under_18_`y' = total_under_14_`y' + total_15_to_17_`y'
 82.         gen total_under_20_`y' = total_under_18_`y' + total_18_to_19_`y'
 83.         gen total_under_25_`y' = total_under_20_`y' + total_20_to_24_`y'
 84.         gen total_under_30_`y' = total_under_25_`y' + total_25_to_29_`y'
 85.         gen total_under_35_`y' = total_under_30_`y' + total_30_to_34_`y'
 86.         gen total_under_45_`y' = total_under_35_`y' + total_35_to_44_`y'
 87.         gen total_under_55_`y' = total_under_45_`y' + total_45_to_54_`y'
 88.         gen total_under_65_`y' = total_under_55_`y' + total_55_to_64_`y'
 89.         gen total_under_75_`y' = total_under_65_`y' + total_65_to_74_`y'
 90.         gen total_under_85_`y' = total_under_75_`y' + total_75_to_84_`y'
 91.         
.         gen half_total = total_`y'/2
 92.         gen median_age_`y' = cond(half_total < total_under_9_`y', 5+(9-5)*(half_total-total_under_5_`y')/(total_under_9_`y'-total_under_5_`y'), ///
>                 cond(half_total < total_under_14_`y', 9+(14-9)*(half_total-total_under_9_`y')/(total_under_14_`y'-total_under_9_`y'), ///
>                 cond(half_total < total_under_18_`y', 14+(18-14)*(half_total-total_under_14_`y')/(total_under_18_`y'-total_under_14_`y'), ///
>                 cond(half_total < total_under_20_`y', 18+(20-18)*(half_total-total_under_18_`y')/(total_under_20_`y'-total_under_18_`y'), ///
>                 cond(half_total < total_under_25_`y', 20+(25-20)*(half_total-total_under_20_`y')/(total_under_25_`y'-total_under_20_`y'), ///
>                 cond(half_total < total_under_30_`y', 25+(30-25)*(half_total-total_under_25_`y')/(total_under_30_`y'-total_under_25_`y'), ///
>                 cond(half_total < total_under_35_`y', 30+(35-30)*(half_total-total_under_30_`y')/(total_under_35_`y'-total_under_30_`y'), ///
>                 cond(half_total < total_under_45_`y', 35+(45-35)*(half_total-total_under_35_`y')/(total_under_45_`y'-total_under_35_`y'), ///
>                 cond(half_total < total_under_55_`y', 45+(55-45)*(half_total-total_under_45_`y')/(total_under_55_`y'-total_under_45_`y'), ///
>                 cond(half_total < total_under_65_`y', 55+(65-55)*(half_total-total_under_55_`y')/(total_under_65_`y'-total_under_55_`y'), ///
>                 cond(half_total < total_under_75_`y', 65+(75-65)*(half_total-total_under_65_`y')/(total_under_75_`y'-total_under_65_`y'), ///
>                 cond(half_total < total_under_85_`y', 75+(85-75)*(half_total-total_under_75_`y')/(total_under_85_`y'-total_under_75_`y'), 85))))))))))))
 93.                 
.         gen prop_under_18_`y' = total_under_18_`y' / total_`y'
 94.         gen prop_under_35_`y' = total_under_35_`y' / total_`y'
 95.         gen prop_under_65_`y' = total_under_65_`y' / total_`y'
 96.         
.         keep zipcode total_`y' prop_male_`y' prop_white_`y' prop_black_`y' prop_asian_`y' prop_amind_`y' prop_under_18_`y' prop_under_35_`y' prop_under_65_`y' median_age
 97.         order zipcode total_`y'
 98.         
.         * Save dataset containing all races
.         compress
 99.         save "$MyProject/processed/intermediate/census_age_sex_`y'.dta", replace
100. }
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2011: all characters numeric; replaced as int
num_under_5_white_male_2011: all characters numeric; replaced as int
num_5_to_9_white_male_2011: all characters numeric; replaced as int
num_10_to_14_white_male_2011: all characters numeric; replaced as int
num_15_to_17_white_male_2011: all characters numeric; replaced as int
num_18_to_19_white_male_2011: all characters numeric; replaced as int
num_20_to_24_white_male_2011: all characters numeric; replaced as int
num_25_to_29_white_male_2011: all characters numeric; replaced as int
num_30_to_34_white_male_2011: all characters numeric; replaced as int
num_35_to_44_white_male_2011: all characters numeric; replaced as int
num_45_to_54_white_male_2011: all characters numeric; replaced as int
num_55_to_64_white_male_2011: all characters numeric; replaced as int
num_65_to_74_white_male_2011: all characters numeric; replaced as int
num_75_to_84_white_male_2011: all characters numeric; replaced as int
num_over_85_white_male_2011: all characters numeric; replaced as int
tot_white_female_2011: all characters numeric; replaced as int
num_under_5_white_female_2011: all characters numeric; replaced as int
num_5_to_9_white_female_2011: all characters numeric; replaced as int
num_10_to_14_white_female_2011: all characters numeric; replaced as int
num_15_to_17_white_female_2011: all characters numeric; replaced as int
num_18_to_19_white_female_2011: all characters numeric; replaced as int
num_20_to_24_white_female_2011: all characters numeric; replaced as int
num_25_to_29_white_female_2011: all characters numeric; replaced as int
num_30_to_34_white_female_2011: all characters numeric; replaced as int
num_35_to_44_white_female_2011: all characters numeric; replaced as int
num_45_to_54_white_female_2011: all characters numeric; replaced as int
num_55_to_64_white_female_2011: all characters numeric; replaced as int
num_65_to_74_white_female_2011: all characters numeric; replaced as int
num_75_to_84_white_female_2011: all characters numeric; replaced as int
num_over_85_white_female_2011: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2011.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2011: all characters numeric; replaced as int
num_under_5_black_male_2011: all characters numeric; replaced as int
num_5_to_9_black_male_2011: all characters numeric; replaced as int
num_10_to_14_black_male_2011: all characters numeric; replaced as int
num_15_to_17_black_male_2011: all characters numeric; replaced as int
num_18_to_19_black_male_2011: all characters numeric; replaced as int
num_20_to_24_black_male_2011: all characters numeric; replaced as int
num_25_to_29_black_male_2011: all characters numeric; replaced as int
num_30_to_34_black_male_2011: all characters numeric; replaced as int
num_35_to_44_black_male_2011: all characters numeric; replaced as int
num_45_to_54_black_male_2011: all characters numeric; replaced as int
num_55_to_64_black_male_2011: all characters numeric; replaced as int
num_65_to_74_black_male_2011: all characters numeric; replaced as int
num_75_to_84_black_male_2011: all characters numeric; replaced as int
num_over_85_black_male_2011: all characters numeric; replaced as int
tot_black_female_2011: all characters numeric; replaced as int
num_under_5_black_female_2011: all characters numeric; replaced as int
num_5_to_9_black_female_2011: all characters numeric; replaced as int
num_10_to_14_black_female_2011: all characters numeric; replaced as int
num_15_to_17_black_female_2011: all characters numeric; replaced as int
num_18_to_19_black_female_2011: all characters numeric; replaced as int
num_20_to_24_black_female_2011: all characters numeric; replaced as int
num_25_to_29_black_female_2011: all characters numeric; replaced as int
num_30_to_34_black_female_2011: all characters numeric; replaced as int
num_35_to_44_black_female_2011: all characters numeric; replaced as int
num_45_to_54_black_female_2011: all characters numeric; replaced as int
num_55_to_64_black_female_2011: all characters numeric; replaced as int
num_65_to_74_black_female_2011: all characters numeric; replaced as int
num_75_to_84_black_female_2011: all characters numeric; replaced as int
num_over_85_black_female_2011: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2011.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2011: all characters numeric; replaced as int
num_under_5_asian_male_2011: all characters numeric; replaced as int
num_5_to_9_asian_male_2011: all characters numeric; replaced as int
num_10_to_14_asian_male_2011: all characters numeric; replaced as int
num_15_to_17_asian_male_2011: all characters numeric; replaced as int
num_18_to_19_asian_male_2011: all characters numeric; replaced as int
num_20_to_24_asian_male_2011: all characters numeric; replaced as int
num_25_to_29_asian_male_2011: all characters numeric; replaced as int
num_30_to_34_asian_male_2011: all characters numeric; replaced as int
num_35_to_44_asian_male_2011: all characters numeric; replaced as int
num_45_to_54_asian_male_2011: all characters numeric; replaced as int
num_55_to_64_asian_male_2011: all characters numeric; replaced as int
num_65_to_74_asian_male_2011: all characters numeric; replaced as int
num_75_to_84_asian_male_2011: all characters numeric; replaced as int
num_over_85_asian_male_2011: all characters numeric; replaced as int
tot_asian_female_2011: all characters numeric; replaced as int
num_under_5_asian_female_2011: all characters numeric; replaced as int
num_5_to_9_asian_female_2011: all characters numeric; replaced as int
num_10_to_14_asian_female_2011: all characters numeric; replaced as int
num_15_to_17_asian_female_2011: all characters numeric; replaced as int
num_18_to_19_asian_female_2011: all characters numeric; replaced as int
num_20_to_24_asian_female_2011: all characters numeric; replaced as int
num_25_to_29_asian_female_2011: all characters numeric; replaced as int
num_30_to_34_asian_female_2011: all characters numeric; replaced as int
num_35_to_44_asian_female_2011: all characters numeric; replaced as int
num_45_to_54_asian_female_2011: all characters numeric; replaced as int
num_55_to_64_asian_female_2011: all characters numeric; replaced as int
num_65_to_74_asian_female_2011: all characters numeric; replaced as int
num_75_to_84_asian_female_2011: all characters numeric; replaced as int
num_over_85_asian_female_2011: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2011.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2011: all characters numeric; replaced as int
num_under_5_amind_male_2011: all characters numeric; replaced as byte
num_5_to_9_amind_male_2011: all characters numeric; replaced as byte
num_10_to_14_amind_male_2011: all characters numeric; replaced as byte
num_15_to_17_amind_male_2011: all characters numeric; replaced as byte
num_18_to_19_amind_male_2011: all characters numeric; replaced as byte
num_20_to_24_amind_male_2011: all characters numeric; replaced as byte
num_25_to_29_amind_male_2011: all characters numeric; replaced as byte
num_30_to_34_amind_male_2011: all characters numeric; replaced as byte
num_35_to_44_amind_male_2011: all characters numeric; replaced as byte
num_45_to_54_amind_male_2011: all characters numeric; replaced as byte
num_55_to_64_amind_male_2011: all characters numeric; replaced as byte
num_65_to_74_amind_male_2011: all characters numeric; replaced as byte
num_75_to_84_amind_male_2011: all characters numeric; replaced as byte
num_over_85_amind_male_2011: all characters numeric; replaced as byte
tot_amind_female_2011: all characters numeric; replaced as int
num_under_5_amind_female_2011: all characters numeric; replaced as byte
num_5_to_9_amind_female_2011: all characters numeric; replaced as byte
num_10_to_14_amind_female_2011: all characters numeric; replaced as byte
num_15_to_17_amind_female_2011: all characters numeric; replaced as byte
num_18_to_19_amind_female_2011: all characters numeric; replaced as byte
num_20_to_24_amind_female_2011: all characters numeric; replaced as byte
num_25_to_29_amind_female_2011: all characters numeric; replaced as byte
num_30_to_34_amind_female_2011: all characters numeric; replaced as byte
num_35_to_44_amind_female_2011: all characters numeric; replaced as byte
num_45_to_54_amind_female_2011: all characters numeric; replaced as byte
num_55_to_64_amind_female_2011: all characters numeric; replaced as byte
num_65_to_74_amind_female_2011: all characters numeric; replaced as byte
num_75_to_84_amind_female_2011: all characters numeric; replaced as byte
num_over_85_amind_female_2011: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2011.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2011: all characters numeric; replaced as byte
num_under_5_pacif_male_2011: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2011: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2011: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2011: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2011: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2011: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2011: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2011: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2011: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2011: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2011: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2011: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2011: all characters numeric; replaced as byte
num_over_85_pacif_male_2011: all characters numeric; replaced as byte
tot_pacif_female_2011: all characters numeric; replaced as int
num_under_5_pacif_female_2011: all characters numeric; replaced as int
num_5_to_9_pacif_female_2011: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2011: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2011: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2011: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2011: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2011: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2011: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2011: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2011: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2011: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2011: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2011: all characters numeric; replaced as byte
num_over_85_pacif_female_2011: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2011.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(532 real changes made)
(532 real changes made)
(488 real changes made)
(485 real changes made)
(491 real changes made)
(485 real changes made)
(474 real changes made)
(502 real changes made)
(493 real changes made)
(490 real changes made)
(511 real changes made)
(514 real changes made)
(518 real changes made)
(504 real changes made)
(503 real changes made)
(457 real changes made)
(531 real changes made)
(531 real changes made)
(482 real changes made)
(479 real changes made)
(488 real changes made)
(488 real changes made)
(466 real changes made)
(491 real changes made)
(490 real changes made)
(493 real changes made)
(511 real changes made)
(518 real changes made)
(516 real changes made)
(507 real changes made)
(505 real changes made)
(480 real changes made)
(414 real changes made)
(414 real changes made)
(166 real changes made)
(169 real changes made)
(174 real changes made)
(178 real changes made)
(178 real changes made)
(207 real changes made)
(184 real changes made)
(189 real changes made)
(268 real changes made)
(261 real changes made)
(234 real changes made)
(162 real changes made)
(110 real changes made)
(48 real changes made)
(395 real changes made)
(395 real changes made)
(170 real changes made)
(172 real changes made)
(185 real changes made)
(160 real changes made)
(171 real changes made)
(201 real changes made)
(167 real changes made)
(164 real changes made)
(237 real changes made)
(233 real changes made)
(206 real changes made)
(160 real changes made)
(128 real changes made)
(96 real changes made)
(395 real changes made)
(395 real changes made)
(211 real changes made)
(204 real changes made)
(202 real changes made)
(167 real changes made)
(140 real changes made)
(180 real changes made)
(180 real changes made)
(197 real changes made)
(288 real changes made)
(266 real changes made)
(220 real changes made)
(182 real changes made)
(100 real changes made)
(37 real changes made)
(427 real changes made)
(427 real changes made)
(209 real changes made)
(225 real changes made)
(220 real changes made)
(169 real changes made)
(129 real changes made)
(194 real changes made)
(201 real changes made)
(231 real changes made)
(305 real changes made)
(286 real changes made)
(238 real changes made)
(170 real changes made)
(123 real changes made)
(55 real changes made)
(203 real changes made)
(203 real changes made)
(18 real changes made)
(19 real changes made)
(25 real changes made)
(14 real changes made)
(22 real changes made)
(37 real changes made)
(23 real changes made)
(27 real changes made)
(57 real changes made)
(75 real changes made)
(48 real changes made)
(26 real changes made)
(16 real changes made)
(4 real changes made)
(189 real changes made)
(189 real changes made)
(19 real changes made)
(22 real changes made)
(29 real changes made)
(25 real changes made)
(16 real changes made)
(33 real changes made)
(18 real changes made)
(32 real changes made)
(51 real changes made)
(61 real changes made)
(43 real changes made)
(27 real changes made)
(22 real changes made)
(13 real changes made)
(31 real changes made)
(31 real changes made)
(2 real changes made)
(4 real changes made)
(0 real changes made)
(1 real change made)
(3 real changes made)
(4 real changes made)
(1 real change made)
(4 real changes made)
(8 real changes made)
(4 real changes made)
(2 real changes made)
(3 real changes made)
(0 real changes made)
(0 real changes made)
(47 real changes made)
(47 real changes made)
(1 real change made)
(3 real changes made)
(4 real changes made)
(4 real changes made)
(7 real changes made)
(8 real changes made)
(8 real changes made)
(5 real changes made)
(10 real changes made)
(6 real changes made)
(4 real changes made)
(3 real changes made)
(0 real changes made)
(0 real changes made)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
(5 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2011.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2012: all characters numeric; replaced as int
num_under_5_white_male_2012: all characters numeric; replaced as int
num_5_to_9_white_male_2012: all characters numeric; replaced as int
num_10_to_14_white_male_2012: all characters numeric; replaced as int
num_15_to_17_white_male_2012: all characters numeric; replaced as int
num_18_to_19_white_male_2012: all characters numeric; replaced as int
num_20_to_24_white_male_2012: all characters numeric; replaced as int
num_25_to_29_white_male_2012: all characters numeric; replaced as int
num_30_to_34_white_male_2012: all characters numeric; replaced as int
num_35_to_44_white_male_2012: all characters numeric; replaced as int
num_45_to_54_white_male_2012: all characters numeric; replaced as int
num_55_to_64_white_male_2012: all characters numeric; replaced as int
num_65_to_74_white_male_2012: all characters numeric; replaced as int
num_75_to_84_white_male_2012: all characters numeric; replaced as int
num_over_85_white_male_2012: all characters numeric; replaced as int
tot_white_female_2012: all characters numeric; replaced as int
num_under_5_white_female_2012: all characters numeric; replaced as int
num_5_to_9_white_female_2012: all characters numeric; replaced as int
num_10_to_14_white_female_2012: all characters numeric; replaced as int
num_15_to_17_white_female_2012: all characters numeric; replaced as int
num_18_to_19_white_female_2012: all characters numeric; replaced as int
num_20_to_24_white_female_2012: all characters numeric; replaced as int
num_25_to_29_white_female_2012: all characters numeric; replaced as int
num_30_to_34_white_female_2012: all characters numeric; replaced as int
num_35_to_44_white_female_2012: all characters numeric; replaced as int
num_45_to_54_white_female_2012: all characters numeric; replaced as int
num_55_to_64_white_female_2012: all characters numeric; replaced as int
num_65_to_74_white_female_2012: all characters numeric; replaced as int
num_75_to_84_white_female_2012: all characters numeric; replaced as int
num_over_85_white_female_2012: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2012.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2012: all characters numeric; replaced as int
num_under_5_black_male_2012: all characters numeric; replaced as int
num_5_to_9_black_male_2012: all characters numeric; replaced as int
num_10_to_14_black_male_2012: all characters numeric; replaced as int
num_15_to_17_black_male_2012: all characters numeric; replaced as int
num_18_to_19_black_male_2012: all characters numeric; replaced as int
num_20_to_24_black_male_2012: all characters numeric; replaced as int
num_25_to_29_black_male_2012: all characters numeric; replaced as int
num_30_to_34_black_male_2012: all characters numeric; replaced as int
num_35_to_44_black_male_2012: all characters numeric; replaced as int
num_45_to_54_black_male_2012: all characters numeric; replaced as int
num_55_to_64_black_male_2012: all characters numeric; replaced as int
num_65_to_74_black_male_2012: all characters numeric; replaced as int
num_75_to_84_black_male_2012: all characters numeric; replaced as int
num_over_85_black_male_2012: all characters numeric; replaced as int
tot_black_female_2012: all characters numeric; replaced as int
num_under_5_black_female_2012: all characters numeric; replaced as int
num_5_to_9_black_female_2012: all characters numeric; replaced as int
num_10_to_14_black_female_2012: all characters numeric; replaced as int
num_15_to_17_black_female_2012: all characters numeric; replaced as int
num_18_to_19_black_female_2012: all characters numeric; replaced as int
num_20_to_24_black_female_2012: all characters numeric; replaced as int
num_25_to_29_black_female_2012: all characters numeric; replaced as int
num_30_to_34_black_female_2012: all characters numeric; replaced as int
num_35_to_44_black_female_2012: all characters numeric; replaced as int
num_45_to_54_black_female_2012: all characters numeric; replaced as int
num_55_to_64_black_female_2012: all characters numeric; replaced as int
num_65_to_74_black_female_2012: all characters numeric; replaced as int
num_75_to_84_black_female_2012: all characters numeric; replaced as int
num_over_85_black_female_2012: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2012.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2012: all characters numeric; replaced as int
num_under_5_asian_male_2012: all characters numeric; replaced as int
num_5_to_9_asian_male_2012: all characters numeric; replaced as int
num_10_to_14_asian_male_2012: all characters numeric; replaced as int
num_15_to_17_asian_male_2012: all characters numeric; replaced as int
num_18_to_19_asian_male_2012: all characters numeric; replaced as int
num_20_to_24_asian_male_2012: all characters numeric; replaced as int
num_25_to_29_asian_male_2012: all characters numeric; replaced as int
num_30_to_34_asian_male_2012: all characters numeric; replaced as int
num_35_to_44_asian_male_2012: all characters numeric; replaced as int
num_45_to_54_asian_male_2012: all characters numeric; replaced as int
num_55_to_64_asian_male_2012: all characters numeric; replaced as int
num_65_to_74_asian_male_2012: all characters numeric; replaced as int
num_75_to_84_asian_male_2012: all characters numeric; replaced as int
num_over_85_asian_male_2012: all characters numeric; replaced as byte
tot_asian_female_2012: all characters numeric; replaced as int
num_under_5_asian_female_2012: all characters numeric; replaced as int
num_5_to_9_asian_female_2012: all characters numeric; replaced as int
num_10_to_14_asian_female_2012: all characters numeric; replaced as int
num_15_to_17_asian_female_2012: all characters numeric; replaced as int
num_18_to_19_asian_female_2012: all characters numeric; replaced as int
num_20_to_24_asian_female_2012: all characters numeric; replaced as int
num_25_to_29_asian_female_2012: all characters numeric; replaced as int
num_30_to_34_asian_female_2012: all characters numeric; replaced as int
num_35_to_44_asian_female_2012: all characters numeric; replaced as int
num_45_to_54_asian_female_2012: all characters numeric; replaced as int
num_55_to_64_asian_female_2012: all characters numeric; replaced as int
num_65_to_74_asian_female_2012: all characters numeric; replaced as int
num_75_to_84_asian_female_2012: all characters numeric; replaced as int
num_over_85_asian_female_2012: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2012.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2012: all characters numeric; replaced as int
num_under_5_amind_male_2012: all characters numeric; replaced as byte
num_5_to_9_amind_male_2012: all characters numeric; replaced as byte
num_10_to_14_amind_male_2012: all characters numeric; replaced as byte
num_15_to_17_amind_male_2012: all characters numeric; replaced as byte
num_18_to_19_amind_male_2012: all characters numeric; replaced as byte
num_20_to_24_amind_male_2012: all characters numeric; replaced as byte
num_25_to_29_amind_male_2012: all characters numeric; replaced as byte
num_30_to_34_amind_male_2012: all characters numeric; replaced as byte
num_35_to_44_amind_male_2012: all characters numeric; replaced as byte
num_45_to_54_amind_male_2012: all characters numeric; replaced as byte
num_55_to_64_amind_male_2012: all characters numeric; replaced as byte
num_65_to_74_amind_male_2012: all characters numeric; replaced as byte
num_75_to_84_amind_male_2012: all characters numeric; replaced as byte
num_over_85_amind_male_2012: all characters numeric; replaced as byte
tot_amind_female_2012: all characters numeric; replaced as int
num_under_5_amind_female_2012: all characters numeric; replaced as byte
num_5_to_9_amind_female_2012: all characters numeric; replaced as byte
num_10_to_14_amind_female_2012: all characters numeric; replaced as byte
num_15_to_17_amind_female_2012: all characters numeric; replaced as byte
num_18_to_19_amind_female_2012: all characters numeric; replaced as byte
num_20_to_24_amind_female_2012: all characters numeric; replaced as byte
num_25_to_29_amind_female_2012: all characters numeric; replaced as byte
num_30_to_34_amind_female_2012: all characters numeric; replaced as byte
num_35_to_44_amind_female_2012: all characters numeric; replaced as int
num_45_to_54_amind_female_2012: all characters numeric; replaced as byte
num_55_to_64_amind_female_2012: all characters numeric; replaced as byte
num_65_to_74_amind_female_2012: all characters numeric; replaced as byte
num_75_to_84_amind_female_2012: all characters numeric; replaced as byte
num_over_85_amind_female_2012: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2012.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2012: all characters numeric; replaced as byte
num_under_5_pacif_male_2012: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2012: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2012: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2012: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2012: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2012: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2012: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2012: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2012: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2012: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2012: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2012: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2012: all characters numeric; replaced as byte
num_over_85_pacif_male_2012: all characters numeric; replaced as byte
tot_pacif_female_2012: all characters numeric; replaced as int
num_under_5_pacif_female_2012: all characters numeric; replaced as int
num_5_to_9_pacif_female_2012: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2012: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2012: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2012: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2012: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2012: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2012: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2012: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2012: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2012: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2012: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2012: all characters numeric; replaced as byte
num_over_85_pacif_female_2012: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2012.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(533 real changes made)
(533 real changes made)
(487 real changes made)
(485 real changes made)
(491 real changes made)
(486 real changes made)
(476 real changes made)
(503 real changes made)
(493 real changes made)
(498 real changes made)
(511 real changes made)
(515 real changes made)
(521 real changes made)
(505 real changes made)
(498 real changes made)
(453 real changes made)
(533 real changes made)
(533 real changes made)
(484 real changes made)
(481 real changes made)
(488 real changes made)
(485 real changes made)
(468 real changes made)
(494 real changes made)
(491 real changes made)
(495 real changes made)
(515 real changes made)
(519 real changes made)
(515 real changes made)
(509 real changes made)
(506 real changes made)
(483 real changes made)
(423 real changes made)
(423 real changes made)
(165 real changes made)
(179 real changes made)
(175 real changes made)
(191 real changes made)
(179 real changes made)
(219 real changes made)
(190 real changes made)
(191 real changes made)
(264 real changes made)
(273 real changes made)
(241 real changes made)
(170 real changes made)
(109 real changes made)
(49 real changes made)
(403 real changes made)
(403 real changes made)
(170 real changes made)
(174 real changes made)
(196 real changes made)
(164 real changes made)
(179 real changes made)
(215 real changes made)
(176 real changes made)
(169 real changes made)
(229 real changes made)
(242 real changes made)
(215 real changes made)
(164 real changes made)
(133 real changes made)
(94 real changes made)
(389 real changes made)
(389 real changes made)
(200 real changes made)
(209 real changes made)
(214 real changes made)
(164 real changes made)
(141 real changes made)
(192 real changes made)
(179 real changes made)
(209 real changes made)
(284 real changes made)
(271 real changes made)
(226 real changes made)
(186 real changes made)
(108 real changes made)
(42 real changes made)
(429 real changes made)
(429 real changes made)
(196 real changes made)
(227 real changes made)
(224 real changes made)
(178 real changes made)
(128 real changes made)
(187 real changes made)
(200 real changes made)
(226 real changes made)
(304 real changes made)
(289 real changes made)
(246 real changes made)
(182 real changes made)
(122 real changes made)
(67 real changes made)
(199 real changes made)
(199 real changes made)
(19 real changes made)
(22 real changes made)
(29 real changes made)
(15 real changes made)
(22 real changes made)
(39 real changes made)
(28 real changes made)
(26 real changes made)
(52 real changes made)
(74 real changes made)
(46 real changes made)
(27 real changes made)
(17 real changes made)
(3 real changes made)
(195 real changes made)
(195 real changes made)
(19 real changes made)
(23 real changes made)
(34 real changes made)
(26 real changes made)
(22 real changes made)
(31 real changes made)
(19 real changes made)
(33 real changes made)
(50 real changes made)
(65 real changes made)
(46 real changes made)
(27 real changes made)
(19 real changes made)
(13 real changes made)
(31 real changes made)
(31 real changes made)
(1 real change made)
(2 real changes made)
(0 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(1 real change made)
(4 real changes made)
(5 real changes made)
(5 real changes made)
(1 real change made)
(8 real changes made)
(1 real change made)
(0 real changes made)
(47 real changes made)
(47 real changes made)
(1 real change made)
(3 real changes made)
(3 real changes made)
(4 real changes made)
(6 real changes made)
(8 real changes made)
(9 real changes made)
(4 real changes made)
(8 real changes made)
(6 real changes made)
(3 real changes made)
(3 real changes made)
(1 real change made)
(0 real changes made)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2012.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2013: all characters numeric; replaced as int
num_under_5_white_male_2013: all characters numeric; replaced as int
num_5_to_9_white_male_2013: all characters numeric; replaced as int
num_10_to_14_white_male_2013: all characters numeric; replaced as int
num_15_to_17_white_male_2013: all characters numeric; replaced as int
num_18_to_19_white_male_2013: all characters numeric; replaced as int
num_20_to_24_white_male_2013: all characters numeric; replaced as int
num_25_to_29_white_male_2013: all characters numeric; replaced as int
num_30_to_34_white_male_2013: all characters numeric; replaced as int
num_35_to_44_white_male_2013: all characters numeric; replaced as int
num_45_to_54_white_male_2013: all characters numeric; replaced as int
num_55_to_64_white_male_2013: all characters numeric; replaced as int
num_65_to_74_white_male_2013: all characters numeric; replaced as int
num_75_to_84_white_male_2013: all characters numeric; replaced as int
num_over_85_white_male_2013: all characters numeric; replaced as int
tot_white_female_2013: all characters numeric; replaced as int
num_under_5_white_female_2013: all characters numeric; replaced as int
num_5_to_9_white_female_2013: all characters numeric; replaced as int
num_10_to_14_white_female_2013: all characters numeric; replaced as int
num_15_to_17_white_female_2013: all characters numeric; replaced as int
num_18_to_19_white_female_2013: all characters numeric; replaced as int
num_20_to_24_white_female_2013: all characters numeric; replaced as int
num_25_to_29_white_female_2013: all characters numeric; replaced as int
num_30_to_34_white_female_2013: all characters numeric; replaced as int
num_35_to_44_white_female_2013: all characters numeric; replaced as int
num_45_to_54_white_female_2013: all characters numeric; replaced as int
num_55_to_64_white_female_2013: all characters numeric; replaced as int
num_65_to_74_white_female_2013: all characters numeric; replaced as int
num_75_to_84_white_female_2013: all characters numeric; replaced as int
num_over_85_white_female_2013: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2013.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2013: all characters numeric; replaced as int
num_under_5_black_male_2013: all characters numeric; replaced as int
num_5_to_9_black_male_2013: all characters numeric; replaced as int
num_10_to_14_black_male_2013: all characters numeric; replaced as int
num_15_to_17_black_male_2013: all characters numeric; replaced as int
num_18_to_19_black_male_2013: all characters numeric; replaced as int
num_20_to_24_black_male_2013: all characters numeric; replaced as int
num_25_to_29_black_male_2013: all characters numeric; replaced as int
num_30_to_34_black_male_2013: all characters numeric; replaced as int
num_35_to_44_black_male_2013: all characters numeric; replaced as int
num_45_to_54_black_male_2013: all characters numeric; replaced as int
num_55_to_64_black_male_2013: all characters numeric; replaced as int
num_65_to_74_black_male_2013: all characters numeric; replaced as int
num_75_to_84_black_male_2013: all characters numeric; replaced as int
num_over_85_black_male_2013: all characters numeric; replaced as int
tot_black_female_2013: all characters numeric; replaced as int
num_under_5_black_female_2013: all characters numeric; replaced as int
num_5_to_9_black_female_2013: all characters numeric; replaced as int
num_10_to_14_black_female_2013: all characters numeric; replaced as int
num_15_to_17_black_female_2013: all characters numeric; replaced as int
num_18_to_19_black_female_2013: all characters numeric; replaced as int
num_20_to_24_black_female_2013: all characters numeric; replaced as int
num_25_to_29_black_female_2013: all characters numeric; replaced as int
num_30_to_34_black_female_2013: all characters numeric; replaced as int
num_35_to_44_black_female_2013: all characters numeric; replaced as int
num_45_to_54_black_female_2013: all characters numeric; replaced as int
num_55_to_64_black_female_2013: all characters numeric; replaced as int
num_65_to_74_black_female_2013: all characters numeric; replaced as int
num_75_to_84_black_female_2013: all characters numeric; replaced as int
num_over_85_black_female_2013: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2013.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2013: all characters numeric; replaced as int
num_under_5_asian_male_2013: all characters numeric; replaced as int
num_5_to_9_asian_male_2013: all characters numeric; replaced as int
num_10_to_14_asian_male_2013: all characters numeric; replaced as int
num_15_to_17_asian_male_2013: all characters numeric; replaced as int
num_18_to_19_asian_male_2013: all characters numeric; replaced as int
num_20_to_24_asian_male_2013: all characters numeric; replaced as int
num_25_to_29_asian_male_2013: all characters numeric; replaced as int
num_30_to_34_asian_male_2013: all characters numeric; replaced as int
num_35_to_44_asian_male_2013: all characters numeric; replaced as int
num_45_to_54_asian_male_2013: all characters numeric; replaced as int
num_55_to_64_asian_male_2013: all characters numeric; replaced as int
num_65_to_74_asian_male_2013: all characters numeric; replaced as int
num_75_to_84_asian_male_2013: all characters numeric; replaced as int
num_over_85_asian_male_2013: all characters numeric; replaced as int
tot_asian_female_2013: all characters numeric; replaced as int
num_under_5_asian_female_2013: all characters numeric; replaced as int
num_5_to_9_asian_female_2013: all characters numeric; replaced as int
num_10_to_14_asian_female_2013: all characters numeric; replaced as int
num_15_to_17_asian_female_2013: all characters numeric; replaced as int
num_18_to_19_asian_female_2013: all characters numeric; replaced as int
num_20_to_24_asian_female_2013: all characters numeric; replaced as int
num_25_to_29_asian_female_2013: all characters numeric; replaced as int
num_30_to_34_asian_female_2013: all characters numeric; replaced as int
num_35_to_44_asian_female_2013: all characters numeric; replaced as int
num_45_to_54_asian_female_2013: all characters numeric; replaced as int
num_55_to_64_asian_female_2013: all characters numeric; replaced as int
num_65_to_74_asian_female_2013: all characters numeric; replaced as int
num_75_to_84_asian_female_2013: all characters numeric; replaced as int
num_over_85_asian_female_2013: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2013.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2013: all characters numeric; replaced as int
num_under_5_amind_male_2013: all characters numeric; replaced as byte
num_5_to_9_amind_male_2013: all characters numeric; replaced as byte
num_10_to_14_amind_male_2013: all characters numeric; replaced as byte
num_15_to_17_amind_male_2013: all characters numeric; replaced as byte
num_18_to_19_amind_male_2013: all characters numeric; replaced as byte
num_20_to_24_amind_male_2013: all characters numeric; replaced as byte
num_25_to_29_amind_male_2013: all characters numeric; replaced as byte
num_30_to_34_amind_male_2013: all characters numeric; replaced as byte
num_35_to_44_amind_male_2013: all characters numeric; replaced as byte
num_45_to_54_amind_male_2013: all characters numeric; replaced as byte
num_55_to_64_amind_male_2013: all characters numeric; replaced as byte
num_65_to_74_amind_male_2013: all characters numeric; replaced as byte
num_75_to_84_amind_male_2013: all characters numeric; replaced as byte
num_over_85_amind_male_2013: all characters numeric; replaced as byte
tot_amind_female_2013: all characters numeric; replaced as int
num_under_5_amind_female_2013: all characters numeric; replaced as byte
num_5_to_9_amind_female_2013: all characters numeric; replaced as byte
num_10_to_14_amind_female_2013: all characters numeric; replaced as byte
num_15_to_17_amind_female_2013: all characters numeric; replaced as byte
num_18_to_19_amind_female_2013: all characters numeric; replaced as byte
num_20_to_24_amind_female_2013: all characters numeric; replaced as byte
num_25_to_29_amind_female_2013: all characters numeric; replaced as byte
num_30_to_34_amind_female_2013: all characters numeric; replaced as byte
num_35_to_44_amind_female_2013: all characters numeric; replaced as byte
num_45_to_54_amind_female_2013: all characters numeric; replaced as byte
num_55_to_64_amind_female_2013: all characters numeric; replaced as byte
num_65_to_74_amind_female_2013: all characters numeric; replaced as byte
num_75_to_84_amind_female_2013: all characters numeric; replaced as byte
num_over_85_amind_female_2013: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2013.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2013: all characters numeric; replaced as byte
num_under_5_pacif_male_2013: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2013: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2013: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2013: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2013: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2013: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2013: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2013: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2013: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2013: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2013: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2013: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2013: all characters numeric; replaced as byte
num_over_85_pacif_male_2013: all characters numeric; replaced as byte
tot_pacif_female_2013: all characters numeric; replaced as int
num_under_5_pacif_female_2013: all characters numeric; replaced as int
num_5_to_9_pacif_female_2013: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2013: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2013: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2013: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2013: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2013: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2013: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2013: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2013: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2013: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2013: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2013: all characters numeric; replaced as byte
num_over_85_pacif_female_2013: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2013.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(533 real changes made)
(533 real changes made)
(481 real changes made)
(480 real changes made)
(484 real changes made)
(487 real changes made)
(474 real changes made)
(501 real changes made)
(493 real changes made)
(495 real changes made)
(511 real changes made)
(514 real changes made)
(522 real changes made)
(505 real changes made)
(502 real changes made)
(458 real changes made)
(533 real changes made)
(533 real changes made)
(483 real changes made)
(483 real changes made)
(484 real changes made)
(480 real changes made)
(471 real changes made)
(496 real changes made)
(485 real changes made)
(499 real changes made)
(514 real changes made)
(517 real changes made)
(513 real changes made)
(511 real changes made)
(507 real changes made)
(483 real changes made)
(425 real changes made)
(425 real changes made)
(164 real changes made)
(189 real changes made)
(179 real changes made)
(191 real changes made)
(181 real changes made)
(227 real changes made)
(190 real changes made)
(188 real changes made)
(257 real changes made)
(283 real changes made)
(253 real changes made)
(182 real changes made)
(108 real changes made)
(49 real changes made)
(417 real changes made)
(417 real changes made)
(166 real changes made)
(177 real changes made)
(195 real changes made)
(165 real changes made)
(178 real changes made)
(228 real changes made)
(186 real changes made)
(160 real changes made)
(230 real changes made)
(254 real changes made)
(218 real changes made)
(174 real changes made)
(147 real changes made)
(93 real changes made)
(395 real changes made)
(395 real changes made)
(199 real changes made)
(213 real changes made)
(214 real changes made)
(173 real changes made)
(142 real changes made)
(195 real changes made)
(180 real changes made)
(217 real changes made)
(288 real changes made)
(277 real changes made)
(244 real changes made)
(187 real changes made)
(119 real changes made)
(47 real changes made)
(437 real changes made)
(437 real changes made)
(196 real changes made)
(224 real changes made)
(231 real changes made)
(192 real changes made)
(137 real changes made)
(187 real changes made)
(203 real changes made)
(234 real changes made)
(314 real changes made)
(285 real changes made)
(259 real changes made)
(192 real changes made)
(129 real changes made)
(66 real changes made)
(195 real changes made)
(195 real changes made)
(22 real changes made)
(24 real changes made)
(25 real changes made)
(16 real changes made)
(21 real changes made)
(42 real changes made)
(27 real changes made)
(30 real changes made)
(51 real changes made)
(74 real changes made)
(48 real changes made)
(32 real changes made)
(15 real changes made)
(5 real changes made)
(193 real changes made)
(193 real changes made)
(20 real changes made)
(24 real changes made)
(36 real changes made)
(25 real changes made)
(24 real changes made)
(30 real changes made)
(20 real changes made)
(30 real changes made)
(44 real changes made)
(63 real changes made)
(55 real changes made)
(30 real changes made)
(20 real changes made)
(9 real changes made)
(33 real changes made)
(33 real changes made)
(1 real change made)
(3 real changes made)
(0 real changes made)
(4 real changes made)
(1 real change made)
(3 real changes made)
(1 real change made)
(5 real changes made)
(4 real changes made)
(9 real changes made)
(2 real changes made)
(7 real changes made)
(1 real change made)
(1 real change made)
(49 real changes made)
(49 real changes made)
(1 real change made)
(4 real changes made)
(4 real changes made)
(6 real changes made)
(7 real changes made)
(7 real changes made)
(8 real changes made)
(3 real changes made)
(10 real changes made)
(6 real changes made)
(3 real changes made)
(5 real changes made)
(1 real change made)
(0 real changes made)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
(4 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2013.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2014: all characters numeric; replaced as int
num_under_5_white_male_2014: all characters numeric; replaced as int
num_5_to_9_white_male_2014: all characters numeric; replaced as int
num_10_to_14_white_male_2014: all characters numeric; replaced as int
num_15_to_17_white_male_2014: all characters numeric; replaced as int
num_18_to_19_white_male_2014: all characters numeric; replaced as int
num_20_to_24_white_male_2014: all characters numeric; replaced as int
num_25_to_29_white_male_2014: all characters numeric; replaced as int
num_30_to_34_white_male_2014: all characters numeric; replaced as int
num_35_to_44_white_male_2014: all characters numeric; replaced as int
num_45_to_54_white_male_2014: all characters numeric; replaced as int
num_55_to_64_white_male_2014: all characters numeric; replaced as int
num_65_to_74_white_male_2014: all characters numeric; replaced as int
num_75_to_84_white_male_2014: all characters numeric; replaced as int
num_over_85_white_male_2014: all characters numeric; replaced as int
tot_white_female_2014: all characters numeric; replaced as int
num_under_5_white_female_2014: all characters numeric; replaced as int
num_5_to_9_white_female_2014: all characters numeric; replaced as int
num_10_to_14_white_female_2014: all characters numeric; replaced as int
num_15_to_17_white_female_2014: all characters numeric; replaced as int
num_18_to_19_white_female_2014: all characters numeric; replaced as int
num_20_to_24_white_female_2014: all characters numeric; replaced as int
num_25_to_29_white_female_2014: all characters numeric; replaced as int
num_30_to_34_white_female_2014: all characters numeric; replaced as int
num_35_to_44_white_female_2014: all characters numeric; replaced as int
num_45_to_54_white_female_2014: all characters numeric; replaced as int
num_55_to_64_white_female_2014: all characters numeric; replaced as int
num_65_to_74_white_female_2014: all characters numeric; replaced as int
num_75_to_84_white_female_2014: all characters numeric; replaced as int
num_over_85_white_female_2014: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2014.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2014: all characters numeric; replaced as int
num_under_5_black_male_2014: all characters numeric; replaced as int
num_5_to_9_black_male_2014: all characters numeric; replaced as int
num_10_to_14_black_male_2014: all characters numeric; replaced as int
num_15_to_17_black_male_2014: all characters numeric; replaced as int
num_18_to_19_black_male_2014: all characters numeric; replaced as int
num_20_to_24_black_male_2014: all characters numeric; replaced as int
num_25_to_29_black_male_2014: all characters numeric; replaced as int
num_30_to_34_black_male_2014: all characters numeric; replaced as int
num_35_to_44_black_male_2014: all characters numeric; replaced as int
num_45_to_54_black_male_2014: all characters numeric; replaced as int
num_55_to_64_black_male_2014: all characters numeric; replaced as int
num_65_to_74_black_male_2014: all characters numeric; replaced as int
num_75_to_84_black_male_2014: all characters numeric; replaced as int
num_over_85_black_male_2014: all characters numeric; replaced as int
tot_black_female_2014: all characters numeric; replaced as int
num_under_5_black_female_2014: all characters numeric; replaced as int
num_5_to_9_black_female_2014: all characters numeric; replaced as int
num_10_to_14_black_female_2014: all characters numeric; replaced as int
num_15_to_17_black_female_2014: all characters numeric; replaced as int
num_18_to_19_black_female_2014: all characters numeric; replaced as int
num_20_to_24_black_female_2014: all characters numeric; replaced as int
num_25_to_29_black_female_2014: all characters numeric; replaced as int
num_30_to_34_black_female_2014: all characters numeric; replaced as int
num_35_to_44_black_female_2014: all characters numeric; replaced as int
num_45_to_54_black_female_2014: all characters numeric; replaced as int
num_55_to_64_black_female_2014: all characters numeric; replaced as int
num_65_to_74_black_female_2014: all characters numeric; replaced as int
num_75_to_84_black_female_2014: all characters numeric; replaced as int
num_over_85_black_female_2014: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2014.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2014: all characters numeric; replaced as int
num_under_5_asian_male_2014: all characters numeric; replaced as int
num_5_to_9_asian_male_2014: all characters numeric; replaced as int
num_10_to_14_asian_male_2014: all characters numeric; replaced as int
num_15_to_17_asian_male_2014: all characters numeric; replaced as int
num_18_to_19_asian_male_2014: all characters numeric; replaced as int
num_20_to_24_asian_male_2014: all characters numeric; replaced as int
num_25_to_29_asian_male_2014: all characters numeric; replaced as int
num_30_to_34_asian_male_2014: all characters numeric; replaced as int
num_35_to_44_asian_male_2014: all characters numeric; replaced as int
num_45_to_54_asian_male_2014: all characters numeric; replaced as int
num_55_to_64_asian_male_2014: all characters numeric; replaced as int
num_65_to_74_asian_male_2014: all characters numeric; replaced as int
num_75_to_84_asian_male_2014: all characters numeric; replaced as int
num_over_85_asian_male_2014: all characters numeric; replaced as byte
tot_asian_female_2014: all characters numeric; replaced as int
num_under_5_asian_female_2014: all characters numeric; replaced as int
num_5_to_9_asian_female_2014: all characters numeric; replaced as int
num_10_to_14_asian_female_2014: all characters numeric; replaced as int
num_15_to_17_asian_female_2014: all characters numeric; replaced as int
num_18_to_19_asian_female_2014: all characters numeric; replaced as int
num_20_to_24_asian_female_2014: all characters numeric; replaced as int
num_25_to_29_asian_female_2014: all characters numeric; replaced as int
num_30_to_34_asian_female_2014: all characters numeric; replaced as int
num_35_to_44_asian_female_2014: all characters numeric; replaced as int
num_45_to_54_asian_female_2014: all characters numeric; replaced as int
num_55_to_64_asian_female_2014: all characters numeric; replaced as int
num_65_to_74_asian_female_2014: all characters numeric; replaced as int
num_75_to_84_asian_female_2014: all characters numeric; replaced as int
num_over_85_asian_female_2014: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2014.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2014: all characters numeric; replaced as int
num_under_5_amind_male_2014: all characters numeric; replaced as byte
num_5_to_9_amind_male_2014: all characters numeric; replaced as byte
num_10_to_14_amind_male_2014: all characters numeric; replaced as byte
num_15_to_17_amind_male_2014: all characters numeric; replaced as byte
num_18_to_19_amind_male_2014: all characters numeric; replaced as byte
num_20_to_24_amind_male_2014: all characters numeric; replaced as byte
num_25_to_29_amind_male_2014: all characters numeric; replaced as byte
num_30_to_34_amind_male_2014: all characters numeric; replaced as byte
num_35_to_44_amind_male_2014: all characters numeric; replaced as byte
num_45_to_54_amind_male_2014: all characters numeric; replaced as byte
num_55_to_64_amind_male_2014: all characters numeric; replaced as byte
num_65_to_74_amind_male_2014: all characters numeric; replaced as byte
num_75_to_84_amind_male_2014: all characters numeric; replaced as byte
num_over_85_amind_male_2014: all characters numeric; replaced as byte
tot_amind_female_2014: all characters numeric; replaced as int
num_under_5_amind_female_2014: all characters numeric; replaced as byte
num_5_to_9_amind_female_2014: all characters numeric; replaced as byte
num_10_to_14_amind_female_2014: all characters numeric; replaced as byte
num_15_to_17_amind_female_2014: all characters numeric; replaced as byte
num_18_to_19_amind_female_2014: all characters numeric; replaced as byte
num_20_to_24_amind_female_2014: all characters numeric; replaced as byte
num_25_to_29_amind_female_2014: all characters numeric; replaced as byte
num_30_to_34_amind_female_2014: all characters numeric; replaced as byte
num_35_to_44_amind_female_2014: all characters numeric; replaced as byte
num_45_to_54_amind_female_2014: all characters numeric; replaced as byte
num_55_to_64_amind_female_2014: all characters numeric; replaced as byte
num_65_to_74_amind_female_2014: all characters numeric; replaced as byte
num_75_to_84_amind_female_2014: all characters numeric; replaced as byte
num_over_85_amind_female_2014: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2014.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2014: all characters numeric; replaced as byte
num_under_5_pacif_male_2014: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2014: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2014: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2014: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2014: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2014: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2014: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2014: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2014: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2014: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2014: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2014: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2014: all characters numeric; replaced as byte
num_over_85_pacif_male_2014: all characters numeric; replaced as byte
tot_pacif_female_2014: all characters numeric; replaced as byte
num_under_5_pacif_female_2014: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2014: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2014: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2014: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2014: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2014: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2014: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2014: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2014: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2014: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2014: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2014: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2014: all characters numeric; replaced as byte
num_over_85_pacif_female_2014: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2014.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(484 real changes made)
(484 real changes made)
(482 real changes made)
(484 real changes made)
(472 real changes made)
(500 real changes made)
(496 real changes made)
(496 real changes made)
(510 real changes made)
(514 real changes made)
(523 real changes made)
(506 real changes made)
(509 real changes made)
(455 real changes made)
(534 real changes made)
(534 real changes made)
(483 real changes made)
(488 real changes made)
(481 real changes made)
(475 real changes made)
(461 real changes made)
(494 real changes made)
(486 real changes made)
(497 real changes made)
(511 real changes made)
(517 real changes made)
(513 real changes made)
(513 real changes made)
(509 real changes made)
(482 real changes made)
(433 real changes made)
(433 real changes made)
(168 real changes made)
(189 real changes made)
(186 real changes made)
(192 real changes made)
(174 real changes made)
(229 real changes made)
(196 real changes made)
(188 real changes made)
(267 real changes made)
(293 real changes made)
(257 real changes made)
(194 real changes made)
(111 real changes made)
(52 real changes made)
(417 real changes made)
(417 real changes made)
(173 real changes made)
(179 real changes made)
(197 real changes made)
(164 real changes made)
(169 real changes made)
(221 real changes made)
(193 real changes made)
(174 real changes made)
(233 real changes made)
(253 real changes made)
(228 real changes made)
(176 real changes made)
(146 real changes made)
(86 real changes made)
(391 real changes made)
(391 real changes made)
(201 real changes made)
(200 real changes made)
(216 real changes made)
(186 real changes made)
(150 real changes made)
(200 real changes made)
(188 real changes made)
(219 real changes made)
(280 real changes made)
(285 real changes made)
(246 real changes made)
(194 real changes made)
(131 real changes made)
(49 real changes made)
(437 real changes made)
(437 real changes made)
(194 real changes made)
(226 real changes made)
(246 real changes made)
(194 real changes made)
(143 real changes made)
(196 real changes made)
(215 real changes made)
(249 real changes made)
(315 real changes made)
(287 real changes made)
(261 real changes made)
(205 real changes made)
(148 real changes made)
(74 real changes made)
(195 real changes made)
(195 real changes made)
(21 real changes made)
(30 real changes made)
(26 real changes made)
(18 real changes made)
(22 real changes made)
(41 real changes made)
(28 real changes made)
(30 real changes made)
(53 real changes made)
(75 real changes made)
(51 real changes made)
(32 real changes made)
(17 real changes made)
(5 real changes made)
(203 real changes made)
(203 real changes made)
(21 real changes made)
(30 real changes made)
(37 real changes made)
(27 real changes made)
(23 real changes made)
(30 real changes made)
(24 real changes made)
(33 real changes made)
(47 real changes made)
(64 real changes made)
(62 real changes made)
(39 real changes made)
(20 real changes made)
(6 real changes made)
(36 real changes made)
(36 real changes made)
(1 real change made)
(4 real changes made)
(0 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(0 real changes made)
(3 real changes made)
(7 real changes made)
(9 real changes made)
(2 real changes made)
(7 real changes made)
(1 real change made)
(1 real change made)
(48 real changes made)
(48 real changes made)
(1 real change made)
(4 real changes made)
(5 real changes made)
(2 real changes made)
(6 real changes made)
(5 real changes made)
(9 real changes made)
(3 real changes made)
(7 real changes made)
(4 real changes made)
(5 real changes made)
(3 real changes made)
(1 real change made)
(1 real change made)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2014.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2015: all characters numeric; replaced as int
num_under_5_white_male_2015: all characters numeric; replaced as int
num_5_to_9_white_male_2015: all characters numeric; replaced as int
num_10_to_14_white_male_2015: all characters numeric; replaced as int
num_15_to_17_white_male_2015: all characters numeric; replaced as int
num_18_to_19_white_male_2015: all characters numeric; replaced as int
num_20_to_24_white_male_2015: all characters numeric; replaced as int
num_25_to_29_white_male_2015: all characters numeric; replaced as int
num_30_to_34_white_male_2015: all characters numeric; replaced as int
num_35_to_44_white_male_2015: all characters numeric; replaced as int
num_45_to_54_white_male_2015: all characters numeric; replaced as int
num_55_to_64_white_male_2015: all characters numeric; replaced as int
num_65_to_74_white_male_2015: all characters numeric; replaced as int
num_75_to_84_white_male_2015: all characters numeric; replaced as int
num_over_85_white_male_2015: all characters numeric; replaced as int
tot_white_female_2015: all characters numeric; replaced as int
num_under_5_white_female_2015: all characters numeric; replaced as int
num_5_to_9_white_female_2015: all characters numeric; replaced as int
num_10_to_14_white_female_2015: all characters numeric; replaced as int
num_15_to_17_white_female_2015: all characters numeric; replaced as int
num_18_to_19_white_female_2015: all characters numeric; replaced as int
num_20_to_24_white_female_2015: all characters numeric; replaced as int
num_25_to_29_white_female_2015: all characters numeric; replaced as int
num_30_to_34_white_female_2015: all characters numeric; replaced as int
num_35_to_44_white_female_2015: all characters numeric; replaced as int
num_45_to_54_white_female_2015: all characters numeric; replaced as int
num_55_to_64_white_female_2015: all characters numeric; replaced as int
num_65_to_74_white_female_2015: all characters numeric; replaced as int
num_75_to_84_white_female_2015: all characters numeric; replaced as int
num_over_85_white_female_2015: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2015.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2015: all characters numeric; replaced as int
num_under_5_black_male_2015: all characters numeric; replaced as int
num_5_to_9_black_male_2015: all characters numeric; replaced as int
num_10_to_14_black_male_2015: all characters numeric; replaced as int
num_15_to_17_black_male_2015: all characters numeric; replaced as int
num_18_to_19_black_male_2015: all characters numeric; replaced as int
num_20_to_24_black_male_2015: all characters numeric; replaced as int
num_25_to_29_black_male_2015: all characters numeric; replaced as int
num_30_to_34_black_male_2015: all characters numeric; replaced as int
num_35_to_44_black_male_2015: all characters numeric; replaced as int
num_45_to_54_black_male_2015: all characters numeric; replaced as int
num_55_to_64_black_male_2015: all characters numeric; replaced as int
num_65_to_74_black_male_2015: all characters numeric; replaced as int
num_75_to_84_black_male_2015: all characters numeric; replaced as int
num_over_85_black_male_2015: all characters numeric; replaced as int
tot_black_female_2015: all characters numeric; replaced as int
num_under_5_black_female_2015: all characters numeric; replaced as int
num_5_to_9_black_female_2015: all characters numeric; replaced as int
num_10_to_14_black_female_2015: all characters numeric; replaced as int
num_15_to_17_black_female_2015: all characters numeric; replaced as int
num_18_to_19_black_female_2015: all characters numeric; replaced as int
num_20_to_24_black_female_2015: all characters numeric; replaced as int
num_25_to_29_black_female_2015: all characters numeric; replaced as int
num_30_to_34_black_female_2015: all characters numeric; replaced as int
num_35_to_44_black_female_2015: all characters numeric; replaced as int
num_45_to_54_black_female_2015: all characters numeric; replaced as int
num_55_to_64_black_female_2015: all characters numeric; replaced as int
num_65_to_74_black_female_2015: all characters numeric; replaced as int
num_75_to_84_black_female_2015: all characters numeric; replaced as int
num_over_85_black_female_2015: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2015.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2015: all characters numeric; replaced as int
num_under_5_asian_male_2015: all characters numeric; replaced as int
num_5_to_9_asian_male_2015: all characters numeric; replaced as int
num_10_to_14_asian_male_2015: all characters numeric; replaced as int
num_15_to_17_asian_male_2015: all characters numeric; replaced as int
num_18_to_19_asian_male_2015: all characters numeric; replaced as int
num_20_to_24_asian_male_2015: all characters numeric; replaced as int
num_25_to_29_asian_male_2015: all characters numeric; replaced as int
num_30_to_34_asian_male_2015: all characters numeric; replaced as int
num_35_to_44_asian_male_2015: all characters numeric; replaced as int
num_45_to_54_asian_male_2015: all characters numeric; replaced as int
num_55_to_64_asian_male_2015: all characters numeric; replaced as int
num_65_to_74_asian_male_2015: all characters numeric; replaced as int
num_75_to_84_asian_male_2015: all characters numeric; replaced as int
num_over_85_asian_male_2015: all characters numeric; replaced as int
tot_asian_female_2015: all characters numeric; replaced as int
num_under_5_asian_female_2015: all characters numeric; replaced as int
num_5_to_9_asian_female_2015: all characters numeric; replaced as int
num_10_to_14_asian_female_2015: all characters numeric; replaced as int
num_15_to_17_asian_female_2015: all characters numeric; replaced as int
num_18_to_19_asian_female_2015: all characters numeric; replaced as int
num_20_to_24_asian_female_2015: all characters numeric; replaced as int
num_25_to_29_asian_female_2015: all characters numeric; replaced as int
num_30_to_34_asian_female_2015: all characters numeric; replaced as int
num_35_to_44_asian_female_2015: all characters numeric; replaced as int
num_45_to_54_asian_female_2015: all characters numeric; replaced as int
num_55_to_64_asian_female_2015: all characters numeric; replaced as int
num_65_to_74_asian_female_2015: all characters numeric; replaced as int
num_75_to_84_asian_female_2015: all characters numeric; replaced as int
num_over_85_asian_female_2015: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2015.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2015: all characters numeric; replaced as int
num_under_5_amind_male_2015: all characters numeric; replaced as byte
num_5_to_9_amind_male_2015: all characters numeric; replaced as byte
num_10_to_14_amind_male_2015: all characters numeric; replaced as byte
num_15_to_17_amind_male_2015: all characters numeric; replaced as byte
num_18_to_19_amind_male_2015: all characters numeric; replaced as byte
num_20_to_24_amind_male_2015: all characters numeric; replaced as byte
num_25_to_29_amind_male_2015: all characters numeric; replaced as byte
num_30_to_34_amind_male_2015: all characters numeric; replaced as byte
num_35_to_44_amind_male_2015: all characters numeric; replaced as byte
num_45_to_54_amind_male_2015: all characters numeric; replaced as byte
num_55_to_64_amind_male_2015: all characters numeric; replaced as byte
num_65_to_74_amind_male_2015: all characters numeric; replaced as byte
num_75_to_84_amind_male_2015: all characters numeric; replaced as byte
num_over_85_amind_male_2015: all characters numeric; replaced as byte
tot_amind_female_2015: all characters numeric; replaced as int
num_under_5_amind_female_2015: all characters numeric; replaced as byte
num_5_to_9_amind_female_2015: all characters numeric; replaced as byte
num_10_to_14_amind_female_2015: all characters numeric; replaced as byte
num_15_to_17_amind_female_2015: all characters numeric; replaced as byte
num_18_to_19_amind_female_2015: all characters numeric; replaced as byte
num_20_to_24_amind_female_2015: all characters numeric; replaced as int
num_25_to_29_amind_female_2015: all characters numeric; replaced as byte
num_30_to_34_amind_female_2015: all characters numeric; replaced as byte
num_35_to_44_amind_female_2015: all characters numeric; replaced as byte
num_45_to_54_amind_female_2015: all characters numeric; replaced as byte
num_55_to_64_amind_female_2015: all characters numeric; replaced as byte
num_65_to_74_amind_female_2015: all characters numeric; replaced as byte
num_75_to_84_amind_female_2015: all characters numeric; replaced as byte
num_over_85_amind_female_2015: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2015.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2015: all characters numeric; replaced as byte
num_under_5_pacif_male_2015: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2015: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2015: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2015: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2015: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2015: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2015: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2015: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2015: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2015: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2015: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2015: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2015: all characters numeric; replaced as byte
num_over_85_pacif_male_2015: all characters numeric; replaced as byte
tot_pacif_female_2015: all characters numeric; replaced as int
num_under_5_pacif_female_2015: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2015: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2015: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2015: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2015: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2015: all characters numeric; replaced as int
num_25_to_29_pacif_female_2015: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2015: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2015: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2015: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2015: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2015: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2015: all characters numeric; replaced as byte
num_over_85_pacif_female_2015: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2015.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(481 real changes made)
(481 real changes made)
(485 real changes made)
(484 real changes made)
(473 real changes made)
(496 real changes made)
(494 real changes made)
(497 real changes made)
(517 real changes made)
(514 real changes made)
(520 real changes made)
(510 real changes made)
(507 real changes made)
(454 real changes made)
(533 real changes made)
(533 real changes made)
(482 real changes made)
(488 real changes made)
(484 real changes made)
(484 real changes made)
(469 real changes made)
(499 real changes made)
(491 real changes made)
(498 real changes made)
(513 real changes made)
(519 real changes made)
(512 real changes made)
(514 real changes made)
(507 real changes made)
(480 real changes made)
(435 real changes made)
(435 real changes made)
(169 real changes made)
(196 real changes made)
(195 real changes made)
(200 real changes made)
(186 real changes made)
(245 real changes made)
(194 real changes made)
(200 real changes made)
(277 real changes made)
(296 real changes made)
(257 real changes made)
(192 real changes made)
(112 real changes made)
(54 real changes made)
(423 real changes made)
(423 real changes made)
(173 real changes made)
(182 real changes made)
(206 real changes made)
(168 real changes made)
(168 real changes made)
(236 real changes made)
(195 real changes made)
(188 real changes made)
(237 real changes made)
(247 real changes made)
(235 real changes made)
(186 real changes made)
(147 real changes made)
(85 real changes made)
(399 real changes made)
(399 real changes made)
(199 real changes made)
(199 real changes made)
(214 real changes made)
(182 real changes made)
(155 real changes made)
(208 real changes made)
(191 real changes made)
(221 real changes made)
(282 real changes made)
(290 real changes made)
(259 real changes made)
(206 real changes made)
(127 real changes made)
(58 real changes made)
(442 real changes made)
(442 real changes made)
(201 real changes made)
(220 real changes made)
(249 real changes made)
(201 real changes made)
(154 real changes made)
(198 real changes made)
(222 real changes made)
(257 real changes made)
(324 real changes made)
(297 real changes made)
(272 real changes made)
(226 real changes made)
(149 real changes made)
(76 real changes made)
(191 real changes made)
(191 real changes made)
(24 real changes made)
(30 real changes made)
(25 real changes made)
(19 real changes made)
(18 real changes made)
(38 real changes made)
(28 real changes made)
(29 real changes made)
(50 real changes made)
(76 real changes made)
(58 real changes made)
(31 real changes made)
(13 real changes made)
(4 real changes made)
(209 real changes made)
(209 real changes made)
(21 real changes made)
(32 real changes made)
(35 real changes made)
(24 real changes made)
(23 real changes made)
(30 real changes made)
(31 real changes made)
(36 real changes made)
(47 real changes made)
(73 real changes made)
(58 real changes made)
(41 real changes made)
(16 real changes made)
(4 real changes made)
(40 real changes made)
(40 real changes made)
(2 real changes made)
(5 real changes made)
(2 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(1 real change made)
(3 real changes made)
(8 real changes made)
(10 real changes made)
(2 real changes made)
(7 real changes made)
(1 real change made)
(1 real change made)
(45 real changes made)
(45 real changes made)
(1 real change made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(4 real changes made)
(7 real changes made)
(9 real changes made)
(4 real changes made)
(6 real changes made)
(3 real changes made)
(4 real changes made)
(5 real changes made)
(2 real changes made)
(1 real change made)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2015.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2016: all characters numeric; replaced as int
num_under_5_white_male_2016: all characters numeric; replaced as int
num_5_to_9_white_male_2016: all characters numeric; replaced as int
num_10_to_14_white_male_2016: all characters numeric; replaced as int
num_15_to_17_white_male_2016: all characters numeric; replaced as int
num_18_to_19_white_male_2016: all characters numeric; replaced as int
num_20_to_24_white_male_2016: all characters numeric; replaced as int
num_25_to_29_white_male_2016: all characters numeric; replaced as int
num_30_to_34_white_male_2016: all characters numeric; replaced as int
num_35_to_44_white_male_2016: all characters numeric; replaced as int
num_45_to_54_white_male_2016: all characters numeric; replaced as int
num_55_to_64_white_male_2016: all characters numeric; replaced as int
num_65_to_74_white_male_2016: all characters numeric; replaced as int
num_75_to_84_white_male_2016: all characters numeric; replaced as int
num_over_85_white_male_2016: all characters numeric; replaced as int
tot_white_female_2016: all characters numeric; replaced as int
num_under_5_white_female_2016: all characters numeric; replaced as int
num_5_to_9_white_female_2016: all characters numeric; replaced as int
num_10_to_14_white_female_2016: all characters numeric; replaced as int
num_15_to_17_white_female_2016: all characters numeric; replaced as int
num_18_to_19_white_female_2016: all characters numeric; replaced as int
num_20_to_24_white_female_2016: all characters numeric; replaced as int
num_25_to_29_white_female_2016: all characters numeric; replaced as int
num_30_to_34_white_female_2016: all characters numeric; replaced as int
num_35_to_44_white_female_2016: all characters numeric; replaced as int
num_45_to_54_white_female_2016: all characters numeric; replaced as int
num_55_to_64_white_female_2016: all characters numeric; replaced as int
num_65_to_74_white_female_2016: all characters numeric; replaced as int
num_75_to_84_white_female_2016: all characters numeric; replaced as int
num_over_85_white_female_2016: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2016.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2016: all characters numeric; replaced as int
num_under_5_black_male_2016: all characters numeric; replaced as int
num_5_to_9_black_male_2016: all characters numeric; replaced as int
num_10_to_14_black_male_2016: all characters numeric; replaced as int
num_15_to_17_black_male_2016: all characters numeric; replaced as int
num_18_to_19_black_male_2016: all characters numeric; replaced as int
num_20_to_24_black_male_2016: all characters numeric; replaced as int
num_25_to_29_black_male_2016: all characters numeric; replaced as int
num_30_to_34_black_male_2016: all characters numeric; replaced as int
num_35_to_44_black_male_2016: all characters numeric; replaced as int
num_45_to_54_black_male_2016: all characters numeric; replaced as int
num_55_to_64_black_male_2016: all characters numeric; replaced as int
num_65_to_74_black_male_2016: all characters numeric; replaced as int
num_75_to_84_black_male_2016: all characters numeric; replaced as int
num_over_85_black_male_2016: all characters numeric; replaced as int
tot_black_female_2016: all characters numeric; replaced as int
num_under_5_black_female_2016: all characters numeric; replaced as int
num_5_to_9_black_female_2016: all characters numeric; replaced as int
num_10_to_14_black_female_2016: all characters numeric; replaced as int
num_15_to_17_black_female_2016: all characters numeric; replaced as int
num_18_to_19_black_female_2016: all characters numeric; replaced as int
num_20_to_24_black_female_2016: all characters numeric; replaced as int
num_25_to_29_black_female_2016: all characters numeric; replaced as int
num_30_to_34_black_female_2016: all characters numeric; replaced as int
num_35_to_44_black_female_2016: all characters numeric; replaced as int
num_45_to_54_black_female_2016: all characters numeric; replaced as int
num_55_to_64_black_female_2016: all characters numeric; replaced as int
num_65_to_74_black_female_2016: all characters numeric; replaced as int
num_75_to_84_black_female_2016: all characters numeric; replaced as int
num_over_85_black_female_2016: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2016.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2016: all characters numeric; replaced as int
num_under_5_asian_male_2016: all characters numeric; replaced as int
num_5_to_9_asian_male_2016: all characters numeric; replaced as int
num_10_to_14_asian_male_2016: all characters numeric; replaced as int
num_15_to_17_asian_male_2016: all characters numeric; replaced as int
num_18_to_19_asian_male_2016: all characters numeric; replaced as int
num_20_to_24_asian_male_2016: all characters numeric; replaced as int
num_25_to_29_asian_male_2016: all characters numeric; replaced as int
num_30_to_34_asian_male_2016: all characters numeric; replaced as int
num_35_to_44_asian_male_2016: all characters numeric; replaced as int
num_45_to_54_asian_male_2016: all characters numeric; replaced as int
num_55_to_64_asian_male_2016: all characters numeric; replaced as int
num_65_to_74_asian_male_2016: all characters numeric; replaced as int
num_75_to_84_asian_male_2016: all characters numeric; replaced as int
num_over_85_asian_male_2016: all characters numeric; replaced as int
tot_asian_female_2016: all characters numeric; replaced as int
num_under_5_asian_female_2016: all characters numeric; replaced as int
num_5_to_9_asian_female_2016: all characters numeric; replaced as int
num_10_to_14_asian_female_2016: all characters numeric; replaced as int
num_15_to_17_asian_female_2016: all characters numeric; replaced as int
num_18_to_19_asian_female_2016: all characters numeric; replaced as int
num_20_to_24_asian_female_2016: all characters numeric; replaced as int
num_25_to_29_asian_female_2016: all characters numeric; replaced as int
num_30_to_34_asian_female_2016: all characters numeric; replaced as int
num_35_to_44_asian_female_2016: all characters numeric; replaced as int
num_45_to_54_asian_female_2016: all characters numeric; replaced as int
num_55_to_64_asian_female_2016: all characters numeric; replaced as int
num_65_to_74_asian_female_2016: all characters numeric; replaced as int
num_75_to_84_asian_female_2016: all characters numeric; replaced as int
num_over_85_asian_female_2016: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2016.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2016: all characters numeric; replaced as int
num_under_5_amind_male_2016: all characters numeric; replaced as byte
num_5_to_9_amind_male_2016: all characters numeric; replaced as byte
num_10_to_14_amind_male_2016: all characters numeric; replaced as byte
num_15_to_17_amind_male_2016: all characters numeric; replaced as byte
num_18_to_19_amind_male_2016: all characters numeric; replaced as byte
num_20_to_24_amind_male_2016: all characters numeric; replaced as byte
num_25_to_29_amind_male_2016: all characters numeric; replaced as byte
num_30_to_34_amind_male_2016: all characters numeric; replaced as byte
num_35_to_44_amind_male_2016: all characters numeric; replaced as byte
num_45_to_54_amind_male_2016: all characters numeric; replaced as byte
num_55_to_64_amind_male_2016: all characters numeric; replaced as byte
num_65_to_74_amind_male_2016: all characters numeric; replaced as byte
num_75_to_84_amind_male_2016: all characters numeric; replaced as byte
num_over_85_amind_male_2016: all characters numeric; replaced as byte
tot_amind_female_2016: all characters numeric; replaced as int
num_under_5_amind_female_2016: all characters numeric; replaced as byte
num_5_to_9_amind_female_2016: all characters numeric; replaced as byte
num_10_to_14_amind_female_2016: all characters numeric; replaced as byte
num_15_to_17_amind_female_2016: all characters numeric; replaced as byte
num_18_to_19_amind_female_2016: all characters numeric; replaced as byte
num_20_to_24_amind_female_2016: all characters numeric; replaced as int
num_25_to_29_amind_female_2016: all characters numeric; replaced as byte
num_30_to_34_amind_female_2016: all characters numeric; replaced as byte
num_35_to_44_amind_female_2016: all characters numeric; replaced as byte
num_45_to_54_amind_female_2016: all characters numeric; replaced as byte
num_55_to_64_amind_female_2016: all characters numeric; replaced as byte
num_65_to_74_amind_female_2016: all characters numeric; replaced as byte
num_75_to_84_amind_female_2016: all characters numeric; replaced as byte
num_over_85_amind_female_2016: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2016.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2016: all characters numeric; replaced as byte
num_under_5_pacif_male_2016: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2016: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2016: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2016: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2016: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2016: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2016: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2016: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2016: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2016: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2016: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2016: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2016: all characters numeric; replaced as byte
num_over_85_pacif_male_2016: all characters numeric; replaced as byte
tot_pacif_female_2016: all characters numeric; replaced as int
num_under_5_pacif_female_2016: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2016: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2016: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2016: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2016: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2016: all characters numeric; replaced as int
num_25_to_29_pacif_female_2016: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2016: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2016: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2016: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2016: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2016: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2016: all characters numeric; replaced as byte
num_over_85_pacif_female_2016: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2016.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(481 real changes made)
(481 real changes made)
(482 real changes made)
(484 real changes made)
(475 real changes made)
(492 real changes made)
(492 real changes made)
(497 real changes made)
(518 real changes made)
(514 real changes made)
(521 real changes made)
(515 real changes made)
(508 real changes made)
(461 real changes made)
(534 real changes made)
(534 real changes made)
(479 real changes made)
(489 real changes made)
(485 real changes made)
(481 real changes made)
(463 real changes made)
(498 real changes made)
(491 real changes made)
(499 real changes made)
(513 real changes made)
(519 real changes made)
(511 real changes made)
(515 real changes made)
(504 real changes made)
(481 real changes made)
(436 real changes made)
(436 real changes made)
(175 real changes made)
(193 real changes made)
(202 real changes made)
(195 real changes made)
(181 real changes made)
(245 real changes made)
(199 real changes made)
(206 real changes made)
(288 real changes made)
(295 real changes made)
(262 real changes made)
(205 real changes made)
(120 real changes made)
(62 real changes made)
(427 real changes made)
(427 real changes made)
(175 real changes made)
(187 real changes made)
(210 real changes made)
(175 real changes made)
(157 real changes made)
(226 real changes made)
(198 real changes made)
(199 real changes made)
(245 real changes made)
(252 real changes made)
(234 real changes made)
(190 real changes made)
(149 real changes made)
(86 real changes made)
(400 real changes made)
(400 real changes made)
(205 real changes made)
(208 real changes made)
(203 real changes made)
(181 real changes made)
(152 real changes made)
(208 real changes made)
(199 real changes made)
(222 real changes made)
(284 real changes made)
(288 real changes made)
(258 real changes made)
(197 real changes made)
(132 real changes made)
(62 real changes made)
(440 real changes made)
(440 real changes made)
(205 real changes made)
(215 real changes made)
(247 real changes made)
(199 real changes made)
(157 real changes made)
(205 real changes made)
(222 real changes made)
(262 real changes made)
(327 real changes made)
(294 real changes made)
(279 real changes made)
(230 real changes made)
(153 real changes made)
(76 real changes made)
(187 real changes made)
(187 real changes made)
(22 real changes made)
(27 real changes made)
(27 real changes made)
(19 real changes made)
(17 real changes made)
(38 real changes made)
(33 real changes made)
(24 real changes made)
(52 real changes made)
(74 real changes made)
(54 real changes made)
(32 real changes made)
(11 real changes made)
(5 real changes made)
(196 real changes made)
(196 real changes made)
(20 real changes made)
(27 real changes made)
(32 real changes made)
(17 real changes made)
(22 real changes made)
(31 real changes made)
(29 real changes made)
(29 real changes made)
(47 real changes made)
(67 real changes made)
(61 real changes made)
(37 real changes made)
(13 real changes made)
(7 real changes made)
(52 real changes made)
(52 real changes made)
(3 real changes made)
(6 real changes made)
(3 real changes made)
(4 real changes made)
(5 real changes made)
(7 real changes made)
(2 real changes made)
(6 real changes made)
(10 real changes made)
(11 real changes made)
(3 real changes made)
(6 real changes made)
(2 real changes made)
(1 real change made)
(57 real changes made)
(57 real changes made)
(1 real change made)
(6 real changes made)
(4 real changes made)
(3 real changes made)
(4 real changes made)
(11 real changes made)
(10 real changes made)
(5 real changes made)
(5 real changes made)
(6 real changes made)
(7 real changes made)
(4 real changes made)
(4 real changes made)
(1 real change made)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
(2 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2016.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2017: all characters numeric; replaced as int
num_under_5_white_male_2017: all characters numeric; replaced as int
num_5_to_9_white_male_2017: all characters numeric; replaced as int
num_10_to_14_white_male_2017: all characters numeric; replaced as int
num_15_to_17_white_male_2017: all characters numeric; replaced as int
num_18_to_19_white_male_2017: all characters numeric; replaced as int
num_20_to_24_white_male_2017: all characters numeric; replaced as int
num_25_to_29_white_male_2017: all characters numeric; replaced as int
num_30_to_34_white_male_2017: all characters numeric; replaced as int
num_35_to_44_white_male_2017: all characters numeric; replaced as int
num_45_to_54_white_male_2017: all characters numeric; replaced as int
num_55_to_64_white_male_2017: all characters numeric; replaced as int
num_65_to_74_white_male_2017: all characters numeric; replaced as int
num_75_to_84_white_male_2017: all characters numeric; replaced as int
num_over_85_white_male_2017: all characters numeric; replaced as int
tot_white_female_2017: all characters numeric; replaced as int
num_under_5_white_female_2017: all characters numeric; replaced as int
num_5_to_9_white_female_2017: all characters numeric; replaced as int
num_10_to_14_white_female_2017: all characters numeric; replaced as int
num_15_to_17_white_female_2017: all characters numeric; replaced as int
num_18_to_19_white_female_2017: all characters numeric; replaced as int
num_20_to_24_white_female_2017: all characters numeric; replaced as int
num_25_to_29_white_female_2017: all characters numeric; replaced as int
num_30_to_34_white_female_2017: all characters numeric; replaced as int
num_35_to_44_white_female_2017: all characters numeric; replaced as int
num_45_to_54_white_female_2017: all characters numeric; replaced as int
num_55_to_64_white_female_2017: all characters numeric; replaced as int
num_65_to_74_white_female_2017: all characters numeric; replaced as int
num_75_to_84_white_female_2017: all characters numeric; replaced as int
num_over_85_white_female_2017: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2017.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2017: all characters numeric; replaced as int
num_under_5_black_male_2017: all characters numeric; replaced as int
num_5_to_9_black_male_2017: all characters numeric; replaced as int
num_10_to_14_black_male_2017: all characters numeric; replaced as int
num_15_to_17_black_male_2017: all characters numeric; replaced as int
num_18_to_19_black_male_2017: all characters numeric; replaced as int
num_20_to_24_black_male_2017: all characters numeric; replaced as int
num_25_to_29_black_male_2017: all characters numeric; replaced as int
num_30_to_34_black_male_2017: all characters numeric; replaced as int
num_35_to_44_black_male_2017: all characters numeric; replaced as int
num_45_to_54_black_male_2017: all characters numeric; replaced as int
num_55_to_64_black_male_2017: all characters numeric; replaced as int
num_65_to_74_black_male_2017: all characters numeric; replaced as int
num_75_to_84_black_male_2017: all characters numeric; replaced as int
num_over_85_black_male_2017: all characters numeric; replaced as int
tot_black_female_2017: all characters numeric; replaced as int
num_under_5_black_female_2017: all characters numeric; replaced as int
num_5_to_9_black_female_2017: all characters numeric; replaced as int
num_10_to_14_black_female_2017: all characters numeric; replaced as int
num_15_to_17_black_female_2017: all characters numeric; replaced as int
num_18_to_19_black_female_2017: all characters numeric; replaced as int
num_20_to_24_black_female_2017: all characters numeric; replaced as int
num_25_to_29_black_female_2017: all characters numeric; replaced as int
num_30_to_34_black_female_2017: all characters numeric; replaced as int
num_35_to_44_black_female_2017: all characters numeric; replaced as int
num_45_to_54_black_female_2017: all characters numeric; replaced as int
num_55_to_64_black_female_2017: all characters numeric; replaced as int
num_65_to_74_black_female_2017: all characters numeric; replaced as int
num_75_to_84_black_female_2017: all characters numeric; replaced as int
num_over_85_black_female_2017: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2017.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2017: all characters numeric; replaced as int
num_under_5_asian_male_2017: all characters numeric; replaced as int
num_5_to_9_asian_male_2017: all characters numeric; replaced as int
num_10_to_14_asian_male_2017: all characters numeric; replaced as int
num_15_to_17_asian_male_2017: all characters numeric; replaced as int
num_18_to_19_asian_male_2017: all characters numeric; replaced as int
num_20_to_24_asian_male_2017: all characters numeric; replaced as int
num_25_to_29_asian_male_2017: all characters numeric; replaced as int
num_30_to_34_asian_male_2017: all characters numeric; replaced as int
num_35_to_44_asian_male_2017: all characters numeric; replaced as int
num_45_to_54_asian_male_2017: all characters numeric; replaced as int
num_55_to_64_asian_male_2017: all characters numeric; replaced as int
num_65_to_74_asian_male_2017: all characters numeric; replaced as int
num_75_to_84_asian_male_2017: all characters numeric; replaced as int
num_over_85_asian_male_2017: all characters numeric; replaced as int
tot_asian_female_2017: all characters numeric; replaced as int
num_under_5_asian_female_2017: all characters numeric; replaced as int
num_5_to_9_asian_female_2017: all characters numeric; replaced as int
num_10_to_14_asian_female_2017: all characters numeric; replaced as int
num_15_to_17_asian_female_2017: all characters numeric; replaced as int
num_18_to_19_asian_female_2017: all characters numeric; replaced as int
num_20_to_24_asian_female_2017: all characters numeric; replaced as int
num_25_to_29_asian_female_2017: all characters numeric; replaced as int
num_30_to_34_asian_female_2017: all characters numeric; replaced as int
num_35_to_44_asian_female_2017: all characters numeric; replaced as int
num_45_to_54_asian_female_2017: all characters numeric; replaced as int
num_55_to_64_asian_female_2017: all characters numeric; replaced as int
num_65_to_74_asian_female_2017: all characters numeric; replaced as int
num_75_to_84_asian_female_2017: all characters numeric; replaced as int
num_over_85_asian_female_2017: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2017.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2017: all characters numeric; replaced as int
num_under_5_amind_male_2017: all characters numeric; replaced as byte
num_5_to_9_amind_male_2017: all characters numeric; replaced as byte
num_10_to_14_amind_male_2017: all characters numeric; replaced as byte
num_15_to_17_amind_male_2017: all characters numeric; replaced as int
num_18_to_19_amind_male_2017: all characters numeric; replaced as byte
num_20_to_24_amind_male_2017: all characters numeric; replaced as byte
num_25_to_29_amind_male_2017: all characters numeric; replaced as byte
num_30_to_34_amind_male_2017: all characters numeric; replaced as byte
num_35_to_44_amind_male_2017: all characters numeric; replaced as byte
num_45_to_54_amind_male_2017: all characters numeric; replaced as byte
num_55_to_64_amind_male_2017: all characters numeric; replaced as byte
num_65_to_74_amind_male_2017: all characters numeric; replaced as byte
num_75_to_84_amind_male_2017: all characters numeric; replaced as byte
num_over_85_amind_male_2017: all characters numeric; replaced as byte
tot_amind_female_2017: all characters numeric; replaced as int
num_under_5_amind_female_2017: all characters numeric; replaced as byte
num_5_to_9_amind_female_2017: all characters numeric; replaced as byte
num_10_to_14_amind_female_2017: all characters numeric; replaced as byte
num_15_to_17_amind_female_2017: all characters numeric; replaced as byte
num_18_to_19_amind_female_2017: all characters numeric; replaced as byte
num_20_to_24_amind_female_2017: all characters numeric; replaced as int
num_25_to_29_amind_female_2017: all characters numeric; replaced as byte
num_30_to_34_amind_female_2017: all characters numeric; replaced as byte
num_35_to_44_amind_female_2017: all characters numeric; replaced as byte
num_45_to_54_amind_female_2017: all characters numeric; replaced as byte
num_55_to_64_amind_female_2017: all characters numeric; replaced as byte
num_65_to_74_amind_female_2017: all characters numeric; replaced as byte
num_75_to_84_amind_female_2017: all characters numeric; replaced as byte
num_over_85_amind_female_2017: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2017.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2017: all characters numeric; replaced as int
num_under_5_pacif_male_2017: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2017: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2017: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2017: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2017: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2017: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2017: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2017: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2017: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2017: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2017: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2017: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2017: all characters numeric; replaced as byte
num_over_85_pacif_male_2017: all characters numeric; replaced as byte
tot_pacif_female_2017: all characters numeric; replaced as int
num_under_5_pacif_female_2017: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2017: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2017: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2017: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2017: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2017: all characters numeric; replaced as int
num_25_to_29_pacif_female_2017: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2017: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2017: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2017: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2017: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2017: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2017: all characters numeric; replaced as byte
num_over_85_pacif_female_2017: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2017.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(483 real changes made)
(487 real changes made)
(485 real changes made)
(481 real changes made)
(467 real changes made)
(492 real changes made)
(494 real changes made)
(493 real changes made)
(516 real changes made)
(514 real changes made)
(520 real changes made)
(517 real changes made)
(505 real changes made)
(459 real changes made)
(532 real changes made)
(532 real changes made)
(483 real changes made)
(484 real changes made)
(482 real changes made)
(476 real changes made)
(465 real changes made)
(497 real changes made)
(488 real changes made)
(497 real changes made)
(512 real changes made)
(516 real changes made)
(513 real changes made)
(511 real changes made)
(504 real changes made)
(486 real changes made)
(439 real changes made)
(439 real changes made)
(179 real changes made)
(185 real changes made)
(208 real changes made)
(183 real changes made)
(184 real changes made)
(240 real changes made)
(202 real changes made)
(210 real changes made)
(297 real changes made)
(286 real changes made)
(267 real changes made)
(204 real changes made)
(127 real changes made)
(65 real changes made)
(421 real changes made)
(421 real changes made)
(176 real changes made)
(187 real changes made)
(213 real changes made)
(170 real changes made)
(147 real changes made)
(221 real changes made)
(199 real changes made)
(205 real changes made)
(243 real changes made)
(252 real changes made)
(248 real changes made)
(195 real changes made)
(156 real changes made)
(81 real changes made)
(410 real changes made)
(410 real changes made)
(197 real changes made)
(212 real changes made)
(198 real changes made)
(185 real changes made)
(144 real changes made)
(205 real changes made)
(203 real changes made)
(215 real changes made)
(287 real changes made)
(291 real changes made)
(265 real changes made)
(203 real changes made)
(133 real changes made)
(66 real changes made)
(437 real changes made)
(437 real changes made)
(200 real changes made)
(211 real changes made)
(237 real changes made)
(210 real changes made)
(158 real changes made)
(209 real changes made)
(231 real changes made)
(258 real changes made)
(324 real changes made)
(304 real changes made)
(287 real changes made)
(231 real changes made)
(163 real changes made)
(71 real changes made)
(182 real changes made)
(182 real changes made)
(23 real changes made)
(31 real changes made)
(24 real changes made)
(19 real changes made)
(19 real changes made)
(33 real changes made)
(30 real changes made)
(24 real changes made)
(50 real changes made)
(70 real changes made)
(54 real changes made)
(31 real changes made)
(9 real changes made)
(4 real changes made)
(176 real changes made)
(176 real changes made)
(21 real changes made)
(28 real changes made)
(34 real changes made)
(15 real changes made)
(18 real changes made)
(31 real changes made)
(31 real changes made)
(29 real changes made)
(42 real changes made)
(59 real changes made)
(59 real changes made)
(39 real changes made)
(12 real changes made)
(5 real changes made)
(49 real changes made)
(49 real changes made)
(3 real changes made)
(6 real changes made)
(4 real changes made)
(4 real changes made)
(5 real changes made)
(8 real changes made)
(2 real changes made)
(6 real changes made)
(11 real changes made)
(10 real changes made)
(3 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(61 real changes made)
(61 real changes made)
(2 real changes made)
(5 real changes made)
(4 real changes made)
(3 real changes made)
(9 real changes made)
(11 real changes made)
(9 real changes made)
(6 real changes made)
(5 real changes made)
(6 real changes made)
(7 real changes made)
(4 real changes made)
(3 real changes made)
(1 real change made)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2017.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2018: all characters numeric; replaced as int
num_under_5_white_male_2018: all characters numeric; replaced as int
num_5_to_9_white_male_2018: all characters numeric; replaced as int
num_10_to_14_white_male_2018: all characters numeric; replaced as int
num_15_to_17_white_male_2018: all characters numeric; replaced as int
num_18_to_19_white_male_2018: all characters numeric; replaced as int
num_20_to_24_white_male_2018: all characters numeric; replaced as int
num_25_to_29_white_male_2018: all characters numeric; replaced as int
num_30_to_34_white_male_2018: all characters numeric; replaced as int
num_35_to_44_white_male_2018: all characters numeric; replaced as int
num_45_to_54_white_male_2018: all characters numeric; replaced as int
num_55_to_64_white_male_2018: all characters numeric; replaced as int
num_65_to_74_white_male_2018: all characters numeric; replaced as int
num_75_to_84_white_male_2018: all characters numeric; replaced as int
num_over_85_white_male_2018: all characters numeric; replaced as int
tot_white_female_2018: all characters numeric; replaced as int
num_under_5_white_female_2018: all characters numeric; replaced as int
num_5_to_9_white_female_2018: all characters numeric; replaced as int
num_10_to_14_white_female_2018: all characters numeric; replaced as int
num_15_to_17_white_female_2018: all characters numeric; replaced as int
num_18_to_19_white_female_2018: all characters numeric; replaced as int
num_20_to_24_white_female_2018: all characters numeric; replaced as int
num_25_to_29_white_female_2018: all characters numeric; replaced as int
num_30_to_34_white_female_2018: all characters numeric; replaced as int
num_35_to_44_white_female_2018: all characters numeric; replaced as int
num_45_to_54_white_female_2018: all characters numeric; replaced as int
num_55_to_64_white_female_2018: all characters numeric; replaced as int
num_65_to_74_white_female_2018: all characters numeric; replaced as int
num_75_to_84_white_female_2018: all characters numeric; replaced as int
num_over_85_white_female_2018: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2018.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2018: all characters numeric; replaced as int
num_under_5_black_male_2018: all characters numeric; replaced as int
num_5_to_9_black_male_2018: all characters numeric; replaced as int
num_10_to_14_black_male_2018: all characters numeric; replaced as int
num_15_to_17_black_male_2018: all characters numeric; replaced as int
num_18_to_19_black_male_2018: all characters numeric; replaced as int
num_20_to_24_black_male_2018: all characters numeric; replaced as int
num_25_to_29_black_male_2018: all characters numeric; replaced as int
num_30_to_34_black_male_2018: all characters numeric; replaced as int
num_35_to_44_black_male_2018: all characters numeric; replaced as int
num_45_to_54_black_male_2018: all characters numeric; replaced as int
num_55_to_64_black_male_2018: all characters numeric; replaced as int
num_65_to_74_black_male_2018: all characters numeric; replaced as int
num_75_to_84_black_male_2018: all characters numeric; replaced as int
num_over_85_black_male_2018: all characters numeric; replaced as int
tot_black_female_2018: all characters numeric; replaced as int
num_under_5_black_female_2018: all characters numeric; replaced as int
num_5_to_9_black_female_2018: all characters numeric; replaced as int
num_10_to_14_black_female_2018: all characters numeric; replaced as int
num_15_to_17_black_female_2018: all characters numeric; replaced as int
num_18_to_19_black_female_2018: all characters numeric; replaced as int
num_20_to_24_black_female_2018: all characters numeric; replaced as int
num_25_to_29_black_female_2018: all characters numeric; replaced as int
num_30_to_34_black_female_2018: all characters numeric; replaced as int
num_35_to_44_black_female_2018: all characters numeric; replaced as int
num_45_to_54_black_female_2018: all characters numeric; replaced as int
num_55_to_64_black_female_2018: all characters numeric; replaced as int
num_65_to_74_black_female_2018: all characters numeric; replaced as int
num_75_to_84_black_female_2018: all characters numeric; replaced as int
num_over_85_black_female_2018: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2018.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2018: all characters numeric; replaced as int
num_under_5_asian_male_2018: all characters numeric; replaced as int
num_5_to_9_asian_male_2018: all characters numeric; replaced as int
num_10_to_14_asian_male_2018: all characters numeric; replaced as int
num_15_to_17_asian_male_2018: all characters numeric; replaced as int
num_18_to_19_asian_male_2018: all characters numeric; replaced as int
num_20_to_24_asian_male_2018: all characters numeric; replaced as int
num_25_to_29_asian_male_2018: all characters numeric; replaced as int
num_30_to_34_asian_male_2018: all characters numeric; replaced as int
num_35_to_44_asian_male_2018: all characters numeric; replaced as int
num_45_to_54_asian_male_2018: all characters numeric; replaced as int
num_55_to_64_asian_male_2018: all characters numeric; replaced as int
num_65_to_74_asian_male_2018: all characters numeric; replaced as int
num_75_to_84_asian_male_2018: all characters numeric; replaced as int
num_over_85_asian_male_2018: all characters numeric; replaced as int
tot_asian_female_2018: all characters numeric; replaced as int
num_under_5_asian_female_2018: all characters numeric; replaced as int
num_5_to_9_asian_female_2018: all characters numeric; replaced as int
num_10_to_14_asian_female_2018: all characters numeric; replaced as int
num_15_to_17_asian_female_2018: all characters numeric; replaced as int
num_18_to_19_asian_female_2018: all characters numeric; replaced as int
num_20_to_24_asian_female_2018: all characters numeric; replaced as int
num_25_to_29_asian_female_2018: all characters numeric; replaced as int
num_30_to_34_asian_female_2018: all characters numeric; replaced as int
num_35_to_44_asian_female_2018: all characters numeric; replaced as int
num_45_to_54_asian_female_2018: all characters numeric; replaced as int
num_55_to_64_asian_female_2018: all characters numeric; replaced as int
num_65_to_74_asian_female_2018: all characters numeric; replaced as int
num_75_to_84_asian_female_2018: all characters numeric; replaced as int
num_over_85_asian_female_2018: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2018.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2018: all characters numeric; replaced as int
num_under_5_amind_male_2018: all characters numeric; replaced as byte
num_5_to_9_amind_male_2018: all characters numeric; replaced as byte
num_10_to_14_amind_male_2018: all characters numeric; replaced as int
num_15_to_17_amind_male_2018: all characters numeric; replaced as int
num_18_to_19_amind_male_2018: all characters numeric; replaced as byte
num_20_to_24_amind_male_2018: all characters numeric; replaced as byte
num_25_to_29_amind_male_2018: all characters numeric; replaced as int
num_30_to_34_amind_male_2018: all characters numeric; replaced as byte
num_35_to_44_amind_male_2018: all characters numeric; replaced as byte
num_45_to_54_amind_male_2018: all characters numeric; replaced as byte
num_55_to_64_amind_male_2018: all characters numeric; replaced as byte
num_65_to_74_amind_male_2018: all characters numeric; replaced as byte
num_75_to_84_amind_male_2018: all characters numeric; replaced as byte
num_over_85_amind_male_2018: all characters numeric; replaced as byte
tot_amind_female_2018: all characters numeric; replaced as int
num_under_5_amind_female_2018: all characters numeric; replaced as int
num_5_to_9_amind_female_2018: all characters numeric; replaced as byte
num_10_to_14_amind_female_2018: all characters numeric; replaced as byte
num_15_to_17_amind_female_2018: all characters numeric; replaced as byte
num_18_to_19_amind_female_2018: all characters numeric; replaced as byte
num_20_to_24_amind_female_2018: all characters numeric; replaced as byte
num_25_to_29_amind_female_2018: all characters numeric; replaced as byte
num_30_to_34_amind_female_2018: all characters numeric; replaced as byte
num_35_to_44_amind_female_2018: all characters numeric; replaced as int
num_45_to_54_amind_female_2018: all characters numeric; replaced as byte
num_55_to_64_amind_female_2018: all characters numeric; replaced as byte
num_65_to_74_amind_female_2018: all characters numeric; replaced as byte
num_75_to_84_amind_female_2018: all characters numeric; replaced as byte
num_over_85_amind_female_2018: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2018.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2018: all characters numeric; replaced as int
num_under_5_pacif_male_2018: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2018: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2018: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2018: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2018: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2018: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2018: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2018: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2018: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2018: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2018: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2018: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2018: all characters numeric; replaced as byte
num_over_85_pacif_male_2018: all characters numeric; replaced as byte
tot_pacif_female_2018: all characters numeric; replaced as int
num_under_5_pacif_female_2018: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2018: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2018: all characters numeric; replaced as int
num_15_to_17_pacif_female_2018: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2018: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2018: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2018: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2018: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2018: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2018: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2018: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2018: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2018: all characters numeric; replaced as byte
num_over_85_pacif_female_2018: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2018.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(480 real changes made)
(482 real changes made)
(485 real changes made)
(481 real changes made)
(466 real changes made)
(491 real changes made)
(495 real changes made)
(495 real changes made)
(517 real changes made)
(514 real changes made)
(517 real changes made)
(517 real changes made)
(506 real changes made)
(457 real changes made)
(532 real changes made)
(532 real changes made)
(483 real changes made)
(487 real changes made)
(484 real changes made)
(474 real changes made)
(464 real changes made)
(494 real changes made)
(487 real changes made)
(500 real changes made)
(510 real changes made)
(515 real changes made)
(513 real changes made)
(511 real changes made)
(504 real changes made)
(484 real changes made)
(438 real changes made)
(438 real changes made)
(179 real changes made)
(183 real changes made)
(220 real changes made)
(185 real changes made)
(187 real changes made)
(245 real changes made)
(212 real changes made)
(219 real changes made)
(304 real changes made)
(285 real changes made)
(268 real changes made)
(209 real changes made)
(125 real changes made)
(58 real changes made)
(421 real changes made)
(421 real changes made)
(170 real changes made)
(187 real changes made)
(220 real changes made)
(175 real changes made)
(148 real changes made)
(211 real changes made)
(195 real changes made)
(213 real changes made)
(251 real changes made)
(265 real changes made)
(247 real changes made)
(198 real changes made)
(152 real changes made)
(87 real changes made)
(403 real changes made)
(403 real changes made)
(193 real changes made)
(203 real changes made)
(200 real changes made)
(186 real changes made)
(147 real changes made)
(200 real changes made)
(207 real changes made)
(212 real changes made)
(287 real changes made)
(286 real changes made)
(260 real changes made)
(209 real changes made)
(128 real changes made)
(66 real changes made)
(434 real changes made)
(434 real changes made)
(197 real changes made)
(207 real changes made)
(220 real changes made)
(200 real changes made)
(152 real changes made)
(206 real changes made)
(233 real changes made)
(251 real changes made)
(324 real changes made)
(308 real changes made)
(282 real changes made)
(229 real changes made)
(169 real changes made)
(80 real changes made)
(183 real changes made)
(183 real changes made)
(22 real changes made)
(32 real changes made)
(24 real changes made)
(17 real changes made)
(20 real changes made)
(34 real changes made)
(26 real changes made)
(20 real changes made)
(49 real changes made)
(69 real changes made)
(48 real changes made)
(32 real changes made)
(11 real changes made)
(4 real changes made)
(183 real changes made)
(183 real changes made)
(15 real changes made)
(22 real changes made)
(29 real changes made)
(15 real changes made)
(18 real changes made)
(27 real changes made)
(31 real changes made)
(30 real changes made)
(44 real changes made)
(56 real changes made)
(53 real changes made)
(39 real changes made)
(12 real changes made)
(12 real changes made)
(53 real changes made)
(53 real changes made)
(4 real changes made)
(6 real changes made)
(4 real changes made)
(2 real changes made)
(5 real changes made)
(7 real changes made)
(4 real changes made)
(5 real changes made)
(11 real changes made)
(10 real changes made)
(5 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(64 real changes made)
(64 real changes made)
(5 real changes made)
(4 real changes made)
(4 real changes made)
(1 real change made)
(9 real changes made)
(11 real changes made)
(11 real changes made)
(11 real changes made)
(4 real changes made)
(7 real changes made)
(8 real changes made)
(3 real changes made)
(3 real changes made)
(1 real change made)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2018.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2019: all characters numeric; replaced as int
num_under_5_white_male_2019: all characters numeric; replaced as int
num_5_to_9_white_male_2019: all characters numeric; replaced as int
num_10_to_14_white_male_2019: all characters numeric; replaced as int
num_15_to_17_white_male_2019: all characters numeric; replaced as int
num_18_to_19_white_male_2019: all characters numeric; replaced as int
num_20_to_24_white_male_2019: all characters numeric; replaced as int
num_25_to_29_white_male_2019: all characters numeric; replaced as int
num_30_to_34_white_male_2019: all characters numeric; replaced as int
num_35_to_44_white_male_2019: all characters numeric; replaced as int
num_45_to_54_white_male_2019: all characters numeric; replaced as int
num_55_to_64_white_male_2019: all characters numeric; replaced as int
num_65_to_74_white_male_2019: all characters numeric; replaced as int
num_75_to_84_white_male_2019: all characters numeric; replaced as int
num_over_85_white_male_2019: all characters numeric; replaced as int
tot_white_female_2019: all characters numeric; replaced as int
num_under_5_white_female_2019: all characters numeric; replaced as int
num_5_to_9_white_female_2019: all characters numeric; replaced as int
num_10_to_14_white_female_2019: all characters numeric; replaced as int
num_15_to_17_white_female_2019: all characters numeric; replaced as int
num_18_to_19_white_female_2019: all characters numeric; replaced as int
num_20_to_24_white_female_2019: all characters numeric; replaced as int
num_25_to_29_white_female_2019: all characters numeric; replaced as int
num_30_to_34_white_female_2019: all characters numeric; replaced as int
num_35_to_44_white_female_2019: all characters numeric; replaced as int
num_45_to_54_white_female_2019: all characters numeric; replaced as int
num_55_to_64_white_female_2019: all characters numeric; replaced as int
num_65_to_74_white_female_2019: all characters numeric; replaced as int
num_75_to_84_white_female_2019: all characters numeric; replaced as int
num_over_85_white_female_2019: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2019.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2019: all characters numeric; replaced as int
num_under_5_black_male_2019: all characters numeric; replaced as int
num_5_to_9_black_male_2019: all characters numeric; replaced as int
num_10_to_14_black_male_2019: all characters numeric; replaced as int
num_15_to_17_black_male_2019: all characters numeric; replaced as int
num_18_to_19_black_male_2019: all characters numeric; replaced as int
num_20_to_24_black_male_2019: all characters numeric; replaced as int
num_25_to_29_black_male_2019: all characters numeric; replaced as int
num_30_to_34_black_male_2019: all characters numeric; replaced as int
num_35_to_44_black_male_2019: all characters numeric; replaced as int
num_45_to_54_black_male_2019: all characters numeric; replaced as int
num_55_to_64_black_male_2019: all characters numeric; replaced as int
num_65_to_74_black_male_2019: all characters numeric; replaced as int
num_75_to_84_black_male_2019: all characters numeric; replaced as int
num_over_85_black_male_2019: all characters numeric; replaced as int
tot_black_female_2019: all characters numeric; replaced as int
num_under_5_black_female_2019: all characters numeric; replaced as int
num_5_to_9_black_female_2019: all characters numeric; replaced as int
num_10_to_14_black_female_2019: all characters numeric; replaced as int
num_15_to_17_black_female_2019: all characters numeric; replaced as int
num_18_to_19_black_female_2019: all characters numeric; replaced as int
num_20_to_24_black_female_2019: all characters numeric; replaced as int
num_25_to_29_black_female_2019: all characters numeric; replaced as int
num_30_to_34_black_female_2019: all characters numeric; replaced as int
num_35_to_44_black_female_2019: all characters numeric; replaced as int
num_45_to_54_black_female_2019: all characters numeric; replaced as int
num_55_to_64_black_female_2019: all characters numeric; replaced as int
num_65_to_74_black_female_2019: all characters numeric; replaced as int
num_75_to_84_black_female_2019: all characters numeric; replaced as int
num_over_85_black_female_2019: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2019.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2019: all characters numeric; replaced as int
num_under_5_asian_male_2019: all characters numeric; replaced as int
num_5_to_9_asian_male_2019: all characters numeric; replaced as int
num_10_to_14_asian_male_2019: all characters numeric; replaced as int
num_15_to_17_asian_male_2019: all characters numeric; replaced as int
num_18_to_19_asian_male_2019: all characters numeric; replaced as int
num_20_to_24_asian_male_2019: all characters numeric; replaced as int
num_25_to_29_asian_male_2019: all characters numeric; replaced as int
num_30_to_34_asian_male_2019: all characters numeric; replaced as int
num_35_to_44_asian_male_2019: all characters numeric; replaced as int
num_45_to_54_asian_male_2019: all characters numeric; replaced as int
num_55_to_64_asian_male_2019: all characters numeric; replaced as int
num_65_to_74_asian_male_2019: all characters numeric; replaced as int
num_75_to_84_asian_male_2019: all characters numeric; replaced as int
num_over_85_asian_male_2019: all characters numeric; replaced as int
tot_asian_female_2019: all characters numeric; replaced as int
num_under_5_asian_female_2019: all characters numeric; replaced as int
num_5_to_9_asian_female_2019: all characters numeric; replaced as int
num_10_to_14_asian_female_2019: all characters numeric; replaced as int
num_15_to_17_asian_female_2019: all characters numeric; replaced as int
num_18_to_19_asian_female_2019: all characters numeric; replaced as int
num_20_to_24_asian_female_2019: all characters numeric; replaced as int
num_25_to_29_asian_female_2019: all characters numeric; replaced as int
num_30_to_34_asian_female_2019: all characters numeric; replaced as int
num_35_to_44_asian_female_2019: all characters numeric; replaced as int
num_45_to_54_asian_female_2019: all characters numeric; replaced as int
num_55_to_64_asian_female_2019: all characters numeric; replaced as int
num_65_to_74_asian_female_2019: all characters numeric; replaced as int
num_75_to_84_asian_female_2019: all characters numeric; replaced as int
num_over_85_asian_female_2019: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2019.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2019: all characters numeric; replaced as int
num_under_5_amind_male_2019: all characters numeric; replaced as byte
num_5_to_9_amind_male_2019: all characters numeric; replaced as byte
num_10_to_14_amind_male_2019: all characters numeric; replaced as byte
num_15_to_17_amind_male_2019: all characters numeric; replaced as int
num_18_to_19_amind_male_2019: all characters numeric; replaced as byte
num_20_to_24_amind_male_2019: all characters numeric; replaced as int
num_25_to_29_amind_male_2019: all characters numeric; replaced as int
num_30_to_34_amind_male_2019: all characters numeric; replaced as byte
num_35_to_44_amind_male_2019: all characters numeric; replaced as byte
num_45_to_54_amind_male_2019: all characters numeric; replaced as int
num_55_to_64_amind_male_2019: all characters numeric; replaced as byte
num_65_to_74_amind_male_2019: all characters numeric; replaced as byte
num_75_to_84_amind_male_2019: all characters numeric; replaced as byte
num_over_85_amind_male_2019: all characters numeric; replaced as byte
tot_amind_female_2019: all characters numeric; replaced as int
num_under_5_amind_female_2019: all characters numeric; replaced as int
num_5_to_9_amind_female_2019: all characters numeric; replaced as byte
num_10_to_14_amind_female_2019: all characters numeric; replaced as byte
num_15_to_17_amind_female_2019: all characters numeric; replaced as byte
num_18_to_19_amind_female_2019: all characters numeric; replaced as byte
num_20_to_24_amind_female_2019: all characters numeric; replaced as byte
num_25_to_29_amind_female_2019: all characters numeric; replaced as byte
num_30_to_34_amind_female_2019: all characters numeric; replaced as byte
num_35_to_44_amind_female_2019: all characters numeric; replaced as int
num_45_to_54_amind_female_2019: all characters numeric; replaced as byte
num_55_to_64_amind_female_2019: all characters numeric; replaced as int
num_65_to_74_amind_female_2019: all characters numeric; replaced as byte
num_75_to_84_amind_female_2019: all characters numeric; replaced as byte
num_over_85_amind_female_2019: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2019.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2019: all characters numeric; replaced as byte
num_under_5_pacif_male_2019: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2019: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2019: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2019: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2019: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2019: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2019: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2019: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2019: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2019: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2019: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2019: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2019: all characters numeric; replaced as byte
num_over_85_pacif_male_2019: all characters numeric; replaced as byte
tot_pacif_female_2019: all characters numeric; replaced as int
num_under_5_pacif_female_2019: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2019: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2019: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2019: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2019: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2019: all characters numeric; replaced as int
num_25_to_29_pacif_female_2019: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2019: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2019: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2019: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2019: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2019: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2019: all characters numeric; replaced as byte
num_over_85_pacif_female_2019: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2019.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(534 real changes made)
(534 real changes made)
(477 real changes made)
(485 real changes made)
(484 real changes made)
(481 real changes made)
(464 real changes made)
(493 real changes made)
(497 real changes made)
(497 real changes made)
(511 real changes made)
(512 real changes made)
(520 real changes made)
(516 real changes made)
(504 real changes made)
(463 real changes made)
(533 real changes made)
(533 real changes made)
(477 real changes made)
(479 real changes made)
(484 real changes made)
(471 real changes made)
(456 real changes made)
(493 real changes made)
(487 real changes made)
(500 real changes made)
(513 real changes made)
(513 real changes made)
(516 real changes made)
(510 real changes made)
(500 real changes made)
(487 real changes made)
(432 real changes made)
(432 real changes made)
(168 real changes made)
(175 real changes made)
(210 real changes made)
(193 real changes made)
(190 real changes made)
(240 real changes made)
(212 real changes made)
(217 real changes made)
(294 real changes made)
(274 real changes made)
(265 real changes made)
(214 real changes made)
(130 real changes made)
(72 real changes made)
(420 real changes made)
(420 real changes made)
(164 real changes made)
(181 real changes made)
(210 real changes made)
(171 real changes made)
(148 real changes made)
(208 real changes made)
(191 real changes made)
(212 real changes made)
(257 real changes made)
(256 real changes made)
(244 real changes made)
(201 real changes made)
(148 real changes made)
(93 real changes made)
(409 real changes made)
(409 real changes made)
(198 real changes made)
(202 real changes made)
(206 real changes made)
(177 real changes made)
(140 real changes made)
(199 real changes made)
(201 real changes made)
(213 real changes made)
(292 real changes made)
(283 real changes made)
(257 real changes made)
(210 real changes made)
(134 real changes made)
(68 real changes made)
(428 real changes made)
(428 real changes made)
(194 real changes made)
(195 real changes made)
(214 real changes made)
(202 real changes made)
(163 real changes made)
(207 real changes made)
(228 real changes made)
(243 real changes made)
(323 real changes made)
(305 real changes made)
(286 real changes made)
(230 real changes made)
(157 real changes made)
(84 real changes made)
(191 real changes made)
(191 real changes made)
(18 real changes made)
(26 real changes made)
(23 real changes made)
(15 real changes made)
(19 real changes made)
(33 real changes made)
(27 real changes made)
(20 real changes made)
(47 real changes made)
(65 real changes made)
(41 real changes made)
(35 real changes made)
(15 real changes made)
(4 real changes made)
(188 real changes made)
(188 real changes made)
(16 real changes made)
(21 real changes made)
(27 real changes made)
(15 real changes made)
(17 real changes made)
(29 real changes made)
(27 real changes made)
(24 real changes made)
(42 real changes made)
(61 real changes made)
(55 real changes made)
(33 real changes made)
(13 real changes made)
(13 real changes made)
(56 real changes made)
(56 real changes made)
(5 real changes made)
(5 real changes made)
(5 real changes made)
(2 real changes made)
(4 real changes made)
(8 real changes made)
(6 real changes made)
(6 real changes made)
(9 real changes made)
(11 real changes made)
(8 real changes made)
(2 real changes made)
(2 real changes made)
(0 real changes made)
(69 real changes made)
(69 real changes made)
(6 real changes made)
(4 real changes made)
(3 real changes made)
(2 real changes made)
(9 real changes made)
(15 real changes made)
(10 real changes made)
(10 real changes made)
(4 real changes made)
(11 real changes made)
(8 real changes made)
(6 real changes made)
(3 real changes made)
(1 real change made)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2019.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_white_male_2020: all characters numeric; replaced as int
num_under_5_white_male_2020: all characters numeric; replaced as int
num_5_to_9_white_male_2020: all characters numeric; replaced as int
num_10_to_14_white_male_2020: all characters numeric; replaced as int
num_15_to_17_white_male_2020: all characters numeric; replaced as int
num_18_to_19_white_male_2020: all characters numeric; replaced as int
num_20_to_24_white_male_2020: all characters numeric; replaced as int
num_25_to_29_white_male_2020: all characters numeric; replaced as int
num_30_to_34_white_male_2020: all characters numeric; replaced as int
num_35_to_44_white_male_2020: all characters numeric; replaced as int
num_45_to_54_white_male_2020: all characters numeric; replaced as int
num_55_to_64_white_male_2020: all characters numeric; replaced as int
num_65_to_74_white_male_2020: all characters numeric; replaced as int
num_75_to_84_white_male_2020: all characters numeric; replaced as int
num_over_85_white_male_2020: all characters numeric; replaced as int
tot_white_female_2020: all characters numeric; replaced as int
num_under_5_white_female_2020: all characters numeric; replaced as int
num_5_to_9_white_female_2020: all characters numeric; replaced as int
num_10_to_14_white_female_2020: all characters numeric; replaced as int
num_15_to_17_white_female_2020: all characters numeric; replaced as int
num_18_to_19_white_female_2020: all characters numeric; replaced as int
num_20_to_24_white_female_2020: all characters numeric; replaced as int
num_25_to_29_white_female_2020: all characters numeric; replaced as int
num_30_to_34_white_female_2020: all characters numeric; replaced as int
num_35_to_44_white_female_2020: all characters numeric; replaced as int
num_45_to_54_white_female_2020: all characters numeric; replaced as int
num_55_to_64_white_female_2020: all characters numeric; replaced as int
num_65_to_74_white_female_2020: all characters numeric; replaced as int
num_75_to_84_white_female_2020: all characters numeric; replaced as int
num_over_85_white_female_2020: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_white_2020.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_black_male_2020: all characters numeric; replaced as int
num_under_5_black_male_2020: all characters numeric; replaced as int
num_5_to_9_black_male_2020: all characters numeric; replaced as int
num_10_to_14_black_male_2020: all characters numeric; replaced as int
num_15_to_17_black_male_2020: all characters numeric; replaced as int
num_18_to_19_black_male_2020: all characters numeric; replaced as int
num_20_to_24_black_male_2020: all characters numeric; replaced as int
num_25_to_29_black_male_2020: all characters numeric; replaced as int
num_30_to_34_black_male_2020: all characters numeric; replaced as int
num_35_to_44_black_male_2020: all characters numeric; replaced as int
num_45_to_54_black_male_2020: all characters numeric; replaced as int
num_55_to_64_black_male_2020: all characters numeric; replaced as int
num_65_to_74_black_male_2020: all characters numeric; replaced as int
num_75_to_84_black_male_2020: all characters numeric; replaced as int
num_over_85_black_male_2020: all characters numeric; replaced as int
tot_black_female_2020: all characters numeric; replaced as int
num_under_5_black_female_2020: all characters numeric; replaced as int
num_5_to_9_black_female_2020: all characters numeric; replaced as int
num_10_to_14_black_female_2020: all characters numeric; replaced as int
num_15_to_17_black_female_2020: all characters numeric; replaced as int
num_18_to_19_black_female_2020: all characters numeric; replaced as int
num_20_to_24_black_female_2020: all characters numeric; replaced as int
num_25_to_29_black_female_2020: all characters numeric; replaced as int
num_30_to_34_black_female_2020: all characters numeric; replaced as int
num_35_to_44_black_female_2020: all characters numeric; replaced as int
num_45_to_54_black_female_2020: all characters numeric; replaced as int
num_55_to_64_black_female_2020: all characters numeric; replaced as int
num_65_to_74_black_female_2020: all characters numeric; replaced as int
num_75_to_84_black_female_2020: all characters numeric; replaced as int
num_over_85_black_female_2020: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_black_2020.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_asian_male_2020: all characters numeric; replaced as int
num_under_5_asian_male_2020: all characters numeric; replaced as int
num_5_to_9_asian_male_2020: all characters numeric; replaced as int
num_10_to_14_asian_male_2020: all characters numeric; replaced as int
num_15_to_17_asian_male_2020: all characters numeric; replaced as int
num_18_to_19_asian_male_2020: all characters numeric; replaced as int
num_20_to_24_asian_male_2020: all characters numeric; replaced as int
num_25_to_29_asian_male_2020: all characters numeric; replaced as int
num_30_to_34_asian_male_2020: all characters numeric; replaced as int
num_35_to_44_asian_male_2020: all characters numeric; replaced as int
num_45_to_54_asian_male_2020: all characters numeric; replaced as int
num_55_to_64_asian_male_2020: all characters numeric; replaced as int
num_65_to_74_asian_male_2020: all characters numeric; replaced as int
num_75_to_84_asian_male_2020: all characters numeric; replaced as int
num_over_85_asian_male_2020: all characters numeric; replaced as int
tot_asian_female_2020: all characters numeric; replaced as int
num_under_5_asian_female_2020: all characters numeric; replaced as int
num_5_to_9_asian_female_2020: all characters numeric; replaced as int
num_10_to_14_asian_female_2020: all characters numeric; replaced as int
num_15_to_17_asian_female_2020: all characters numeric; replaced as int
num_18_to_19_asian_female_2020: all characters numeric; replaced as int
num_20_to_24_asian_female_2020: all characters numeric; replaced as int
num_25_to_29_asian_female_2020: all characters numeric; replaced as int
num_30_to_34_asian_female_2020: all characters numeric; replaced as int
num_35_to_44_asian_female_2020: all characters numeric; replaced as int
num_45_to_54_asian_female_2020: all characters numeric; replaced as int
num_55_to_64_asian_female_2020: all characters numeric; replaced as int
num_65_to_74_asian_female_2020: all characters numeric; replaced as int
num_75_to_84_asian_female_2020: all characters numeric; replaced as int
num_over_85_asian_female_2020: all characters numeric; replaced as int
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_asian_2020.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_amind_male_2020: all characters numeric; replaced as int
num_under_5_amind_male_2020: all characters numeric; replaced as byte
num_5_to_9_amind_male_2020: all characters numeric; replaced as byte
num_10_to_14_amind_male_2020: all characters numeric; replaced as byte
num_15_to_17_amind_male_2020: all characters numeric; replaced as int
num_18_to_19_amind_male_2020: all characters numeric; replaced as byte
num_20_to_24_amind_male_2020: all characters numeric; replaced as int
num_25_to_29_amind_male_2020: all characters numeric; replaced as int
num_30_to_34_amind_male_2020: all characters numeric; replaced as byte
num_35_to_44_amind_male_2020: all characters numeric; replaced as byte
num_45_to_54_amind_male_2020: all characters numeric; replaced as byte
num_55_to_64_amind_male_2020: all characters numeric; replaced as byte
num_65_to_74_amind_male_2020: all characters numeric; replaced as byte
num_75_to_84_amind_male_2020: all characters numeric; replaced as byte
num_over_85_amind_male_2020: all characters numeric; replaced as byte
tot_amind_female_2020: all characters numeric; replaced as int
num_under_5_amind_female_2020: all characters numeric; replaced as int
num_5_to_9_amind_female_2020: all characters numeric; replaced as byte
num_10_to_14_amind_female_2020: all characters numeric; replaced as int
num_15_to_17_amind_female_2020: all characters numeric; replaced as byte
num_18_to_19_amind_female_2020: all characters numeric; replaced as byte
num_20_to_24_amind_female_2020: all characters numeric; replaced as byte
num_25_to_29_amind_female_2020: all characters numeric; replaced as byte
num_30_to_34_amind_female_2020: all characters numeric; replaced as byte
num_35_to_44_amind_female_2020: all characters numeric; replaced as byte
num_45_to_54_amind_female_2020: all characters numeric; replaced as byte
num_55_to_64_amind_female_2020: all characters numeric; replaced as byte
num_65_to_74_amind_female_2020: all characters numeric; replaced as byte
num_75_to_84_amind_female_2020: all characters numeric; replaced as byte
num_over_85_amind_female_2020: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_amind_2020.dta saved
(2 observations deleted)
variables created as string: 
zipcode1  zipcode2
tot_pacif_male_2020: all characters numeric; replaced as int
num_under_5_pacif_male_2020: all characters numeric; replaced as byte
num_5_to_9_pacif_male_2020: all characters numeric; replaced as byte
num_10_to_14_pacif_male_2020: all characters numeric; replaced as byte
num_15_to_17_pacif_male_2020: all characters numeric; replaced as byte
num_18_to_19_pacif_male_2020: all characters numeric; replaced as byte
num_20_to_24_pacif_male_2020: all characters numeric; replaced as byte
num_25_to_29_pacif_male_2020: all characters numeric; replaced as byte
num_30_to_34_pacif_male_2020: all characters numeric; replaced as byte
num_35_to_44_pacif_male_2020: all characters numeric; replaced as byte
num_45_to_54_pacif_male_2020: all characters numeric; replaced as byte
num_55_to_64_pacif_male_2020: all characters numeric; replaced as byte
num_65_to_74_pacif_male_2020: all characters numeric; replaced as byte
num_75_to_84_pacif_male_2020: all characters numeric; replaced as byte
num_over_85_pacif_male_2020: all characters numeric; replaced as byte
tot_pacif_female_2020: all characters numeric; replaced as int
num_under_5_pacif_female_2020: all characters numeric; replaced as byte
num_5_to_9_pacif_female_2020: all characters numeric; replaced as byte
num_10_to_14_pacif_female_2020: all characters numeric; replaced as byte
num_15_to_17_pacif_female_2020: all characters numeric; replaced as byte
num_18_to_19_pacif_female_2020: all characters numeric; replaced as byte
num_20_to_24_pacif_female_2020: all characters numeric; replaced as byte
num_25_to_29_pacif_female_2020: all characters numeric; replaced as byte
num_30_to_34_pacif_female_2020: all characters numeric; replaced as byte
num_35_to_44_pacif_female_2020: all characters numeric; replaced as byte
num_45_to_54_pacif_female_2020: all characters numeric; replaced as byte
num_55_to_64_pacif_female_2020: all characters numeric; replaced as byte
num_65_to_74_pacif_female_2020: all characters numeric; replaced as byte
num_75_to_84_pacif_female_2020: all characters numeric; replaced as byte
num_over_85_pacif_female_2020: all characters numeric; replaced as byte
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_pacif_2020.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------
(533 real changes made)
(533 real changes made)
(477 real changes made)
(480 real changes made)
(479 real changes made)
(481 real changes made)
(463 real changes made)
(495 real changes made)
(493 real changes made)
(491 real changes made)
(509 real changes made)
(512 real changes made)
(519 real changes made)
(513 real changes made)
(502 real changes made)
(462 real changes made)
(533 real changes made)
(533 real changes made)
(473 real changes made)
(480 real changes made)
(482 real changes made)
(468 real changes made)
(445 real changes made)
(494 real changes made)
(489 real changes made)
(500 real changes made)
(513 real changes made)
(511 real changes made)
(517 real changes made)
(509 real changes made)
(501 real changes made)
(482 real changes made)
(425 real changes made)
(425 real changes made)
(161 real changes made)
(170 real changes made)
(191 real changes made)
(173 real changes made)
(181 real changes made)
(231 real changes made)
(209 real changes made)
(207 real changes made)
(266 real changes made)
(271 real changes made)
(259 real changes made)
(211 real changes made)
(130 real changes made)
(78 real changes made)
(411 real changes made)
(411 real changes made)
(156 real changes made)
(182 real changes made)
(193 real changes made)
(162 real changes made)
(146 real changes made)
(205 real changes made)
(189 real changes made)
(204 real changes made)
(258 real changes made)
(251 real changes made)
(236 real changes made)
(203 real changes made)
(143 real changes made)
(104 real changes made)
(408 real changes made)
(408 real changes made)
(190 real changes made)
(201 real changes made)
(204 real changes made)
(180 real changes made)
(143 real changes made)
(201 real changes made)
(199 real changes made)
(214 real changes made)
(289 real changes made)
(280 real changes made)
(257 real changes made)
(214 real changes made)
(136 real changes made)
(74 real changes made)
(424 real changes made)
(424 real changes made)
(186 real changes made)
(191 real changes made)
(202 real changes made)
(201 real changes made)
(158 real changes made)
(212 real changes made)
(216 real changes made)
(234 real changes made)
(313 real changes made)
(304 real changes made)
(283 real changes made)
(225 real changes made)
(158 real changes made)
(82 real changes made)
(186 real changes made)
(186 real changes made)
(17 real changes made)
(20 real changes made)
(25 real changes made)
(15 real changes made)
(17 real changes made)
(35 real changes made)
(25 real changes made)
(22 real changes made)
(41 real changes made)
(52 real changes made)
(40 real changes made)
(34 real changes made)
(15 real changes made)
(5 real changes made)
(174 real changes made)
(174 real changes made)
(13 real changes made)
(19 real changes made)
(23 real changes made)
(13 real changes made)
(15 real changes made)
(24 real changes made)
(24 real changes made)
(21 real changes made)
(44 real changes made)
(54 real changes made)
(53 real changes made)
(25 real changes made)
(15 real changes made)
(13 real changes made)
(54 real changes made)
(54 real changes made)
(4 real changes made)
(3 real changes made)
(3 real changes made)
(1 real change made)
(5 real changes made)
(8 real changes made)
(6 real changes made)
(6 real changes made)
(8 real changes made)
(10 real changes made)
(8 real changes made)
(2 real changes made)
(2 real changes made)
(0 real changes made)
(67 real changes made)
(67 real changes made)
(6 real changes made)
(3 real changes made)
(2 real changes made)
(1 real change made)
(11 real changes made)
(15 real changes made)
(9 real changes made)
(10 real changes made)
(4 real changes made)
(12 real changes made)
(8 real changes made)
(4 real changes made)
(2 real changes made)
(1 real change made)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
(3 missing values generated)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/census_age_sex_2020.dta saved

. 
. * Merge datasets from 2011-2020 into one dataset containing all years
. use "$MyProject/processed/intermediate/census_age_sex_2011.dta", clear

. forvalues y = 2012/2020 {
  2.         merge 1:1 zipcode using "$MyProject/processed/intermediate/census_age_sex_`y'.dta"
  3.         drop _merge
  4. }

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               538  (_merge==3)
    -----------------------------------------

. 
. * Save dataset containing all years
. compress
  (0 bytes saved)

. save "$MyProject/processed/census_age_sex.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/census_age_sex.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2d_clean_dispensaries_data.do"

. ************
. * SCRIPT: 2d_clean_dispensaries_data.do
. * PURPOSE: processes the dispensaries dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/intermediate/dispensaries_uncleaned.dta", clear

. 
. * Select only desired columns
. keep business_name dba_name license_type establishment_address_1 establishment_city establishment_zip_code establishment_county commence_operations_date latitude longitude

. 
. * Keep only entries that have certain license types
. keep if license_type=="Marijuana Retailer"
(520 observations deleted)

. drop license_type

. 
. * Keep only entries that have commenced operations
. keep if commence_operations_date!=""
(162 observations deleted)

. 
. * Create variables for commencement operations month, day, and year
. split commence_operations_date, parse("/")
variables created as string: 
commence_o~1  commence_o~2  commence_o~3

. destring commence_operations_date1, gen(commence_month)
commence_operations_date1: all characters numeric; commence_month generated as byte

. destring commence_operations_date2, gen(commence_day)
commence_operations_date2: all characters numeric; commence_day generated as byte

. destring commence_operations_date3, gen(commence_year)
commence_operations_date3: all characters numeric; commence_year generated as int

. drop commence_operations_date commence_operations_date1 commence_operations_date2 commence_operations_date3

. 
. * Change format of zip code to be 5 digits
. format establishment_zip_code %05.0f

. 
. * Rename address variable
. rename establishment_address_1 establishment_address

. 
. * Manually update lat/lon coordinates of HVV Massachusetts, Inc.
. replace lat = 42.387990 if establishment_address=="220 William McClellan Hwy"
(1 real change made)

. replace lon = -71.017820 if establishment_address=="220 William McClellan Hwy"
(1 real change made)

. 
. * Save dataset
. compress
  variable business_name was str60 now str58
  variable dba_name was str64 now str32
  variable establishment_address was str54 now str51
  variable establishment_city was str18 now str16
  (7,995 bytes saved)

. save "$MyProject/processed/dispensaries.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries.dta saved

. outsheet using "$MyProject/processed/dispensaries.csv", comma replace

. 
. * Create dataset with only dispensaries in the Boston area
. keep if establishment_city=="Boston" | establishment_city=="Brookline"
(194 observations deleted)

. gen id = _n

. order id

. compress
  variable id was float now byte
  variable business_name was str58 now str34
  variable dba_name was str32 now str14
  variable establishment_address was str51 now str25
  variable establishment_city was str16 now str9
  variable establishment_county was str10 now str7
  (891 bytes saved)

. save "$MyProject/processed/dispensaries_boston.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_boston.dta saved

. outsheet using "$MyProject/processed/dispensaries_boston.csv", comma replace

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2e_clean_ma_zoning_data.do"

. ************
. * SCRIPT: 2e_clean_ma_zoning_data.do
. * PURPOSE: processes the massachusetts zoning dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/intermediate/ma_zoning_laws_uncleaned.dta", clear

. 
. * Rename variable names to be values from the first row
. foreach var of varlist * {
  2.         local x = strtoname(`var'[1])
  3.         rename `var' `x'
  4. }

. drop in 1
(1 observation deleted)

. 
. * Drop cities with no response
. drop if Adult_Use_Status == "No response" & Delivery_Status == "No response"
(22 observations deleted)

. 
. * Create dummy variables for legality of retail, adult use, and delivery
. gen retail_legal = Adult_Use_Status == "Zoning in place" | Adult_Use_Status == "No zoning in place" | Adult_Use_Status == "Zoning in place, retail license cap" | Adult_Use_Statu
> s == "Zoning in place; license cap" | Adult_Use_Status == "Zoning in place; license cap; delivery ban" | Adult_Use_Status == "Zoning in place; retail cap" | Adult_Use_Status == 
> "Zoning in place; retail license cap"

. gen adult_use_legal = retail_legal | Adult_Use_Status == "Retail ban" | Adult_Use_Status == "Zoning in place; retail ban"

. gen delivery_legal = Adult_Use_Status != "Ban in place" & (Delivery_Status == "Delivery permitted" | Delivery_Status == "Delivery permitted; Host Community Agreement signed with
>  business maintaining/pursuing delivery license" | Delivery_Status == "No zoning in place" | Adult_Use_Status == "No zoning in place")

. drop Adult_Use_Status

. drop Delivery_Status

. 
. * Rename address variable
. rename City_Town city

. drop if missing(city)
(1 observation deleted)

. 
. * Save dataset
. compress
  variable retail_legal was float now byte
  variable adult_use_legal was float now byte
  variable delivery_legal was float now byte
  (2,952 bytes saved)

. save "$MyProject/processed/ma_zoning_laws.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/ma_zoning_laws.dta saved

. outsheet using "$MyProject/processed/ma_zoning_laws.csv", comma replace

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2f_clean_prop_assessments_data.do"

. ************
. * SCRIPT: 2f_clean_prop_assessments_data.do
. * PURPOSE: processes the massachusetts property assessments datasets in preparation for analysis
. ************
. 
. * Clean dataset for each year, one at a time
. forvalues y = 2014/2021 {
  2.         use "$MyProject/processed/intermediate/property_assessments_ma_`y'_uncleaned.dta", clear
  3.         
.         * Rename 2021 variables to have the same name as other years
.         if `y' == 2021 {
  4.                 rename bldg_value av_bldg
  5.                 rename yr_remodel yr_remod
  6.                 rename res_floor num_floors
  7.                 rename bed_rms r_bdrms
  8.                 rename full_bth r_full_bth
  9.                 rename hlf_bth r_half_bth
 10.                 rename kitchen r_kitch
 11.                 rename heat_type r_heat_typ
 12.         }
 13.         
.         * Select only desired columns
.         keep zipcode lu av_bldg living_area yr_built yr_remod num_floors r_bdrms r_full_bth r_half_bth r_kitch r_heat_typ
 14.         
.         * Create variable for the year the building was assessed
.         gen year_assessed = `y'
 15.         
.         * Change zipcode column to be of uniform format across years
.         if `y' == 2018 | `y' == 2019 | `y' == 2020 | `y' == 2021 {
 16.                 tostring zipcode, replace
 17.                 replace zipcode = "0" + zipcode
 18.         }
 19.         else {
 20.                 replace zipcode = substr(zipcode, 1, 5)
 21.         }
 22.         
.         * Convert dollar amount av_bldg to int (2021 only)
.         if `y' == 2021 {
 23.                 split av_bldg, parse(".00") gen(dollars)
 24.                 destring dollars1, replace ignore("$,")
 25.                 drop av_bldg
 26.                 rename dollars1 av_bldg
 27.         }
 28. 
.         * Drop entries with missing, 0-valued, or unreasonable data
.         drop if av_bldg == 0 | missing(av_bldg)
 29.         drop if living_area < 250 | missing(living_area)
 30.         drop if yr_built == 0 | missing(yr_built)
 31.         drop if num_floors == 0 | missing(num_floors)
 32.         drop if r_bdrms == 0 | missing(r_bdrms)
 33.         
.         * Create variable for price per square foot
.         gen ppsqft = av_bldg / living_area
 34.         drop if ppsqft < 20
 35.         
.         * Create variable for years since built
.         gen yrs_since_built = `y' - yr_built
 36.         
.         * Create variable for years since remodel
.         replace yr_remod = 0 if missing(yr_remod)
 37.         replace yr_remod = yr_built if yr_remod==0
 38.         gen yrs_since_remodel = `y' - yr_remod
 39.         drop yr_built yr_remod
 40.         
.         * Replace missing values with 0
.         replace living_area = 0 if missing(living_area)
 41.         replace r_full_bth = 0 if missing(r_full_bth)
 42.         replace r_half_bth = 0 if missing(r_half_bth)
 43.         
.         * Replace string kitchen values with ints
.         if `y' == 2020 {
 44.                 replace r_kitch = "0" if missing(r_kitch)
 45.                 replace r_kitch = substr(r_kitch, 1, 1)
 46.                 replace r_kitch = "0" if real(r_kitch)==. & r_kitch=="N"
 47.                 replace r_kitch = "1" if real(r_kitch)==. & r_kitch!="N"
 48.                 destring r_kitch, replace
 49.         }
 50.         else {
 51.                 replace r_kitch = 0 if missing(r_kitch)
 52.         }
 53.         
.         * Create dummy variables for heat type
.         gen heat_electric = r_heat_typ==`"E"' | r_heat_typ==`"E - Electric"'
 54.         gen heat_forced_hot_air = r_heat_typ==`"F"' | r_heat_typ==`"F - Forced Hot Air"'
 55.         gen heat_pump = r_heat_typ==`"P"' | r_heat_typ==`"P - Heat Pump"'
 56.         gen heat_space = r_heat_typ==`"S"' | r_heat_typ==`"S - Space Heat"'
 57.         gen heat_steam = r_heat_typ==`"W"' | r_heat_typ==`"W - Ht Water/Steam"'
 58.         gen heat_other = r_heat_typ==`"O"' | r_heat_typ==`"O - Other"'
 59.         drop r_heat_typ
 60.         
.         * Save dataset for year `y'
.         compress
 61.         save "$MyProject/processed/intermediate/property_assessments_ma_`y'.dta", replace
 62. }
(164,091 real changes made)
(21,893 observations deleted)
(6,913 observations deleted)
(42 observations deleted)
(205 observations deleted)
(72,419 observations deleted)
(128 observations deleted)
(0 real changes made)
(43,034 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  variable zipcode was str6 now str5
  variable lu was str21 now str2
  (2,874,586 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2014.dta saved
(168,104 real changes made)
(22,311 observations deleted)
(8,173 observations deleted)
(40 observations deleted)
(252 observations deleted)
(74,564 observations deleted)
(79 observations deleted)
(2,842 real changes made)
(42,311 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  variable zipcode was str6 now str5
  (1,692,792 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2015.dta saved
(169,193 real changes made)
(22,306 observations deleted)
(8,706 observations deleted)
(45 observations deleted)
(253 observations deleted)
(75,322 observations deleted)
(97 observations deleted)
(2,903 real changes made)
(41,499 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  variable zipcode was str6 now str5
  (1,686,690 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2016.dta saved
(170,903 real changes made)
(22,308 observations deleted)
(9,556 observations deleted)
(55 observations deleted)
(284 observations deleted)
(76,244 observations deleted)
(72 observations deleted)
(3,002 real changes made)
(40,502 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  variable zipcode was str6 now str5
  (1,684,557 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2017.dta saved
zipcode was int now str4
variable zipcode was str4 now str5
(172,841 real changes made)
(22,307 observations deleted)
(10,267 observations deleted)
(48 observations deleted)
(269 observations deleted)
(77,606 observations deleted)
(75 observations deleted)
(3,047 real changes made)
(39,426 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  (1,618,994 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2018.dta saved
zipcode was int now str4
variable zipcode was str4 now str5
(174,668 real changes made)
(22,445 observations deleted)
(10,831 observations deleted)
(59 observations deleted)
(232 observations deleted)
(78,902 observations deleted)
(42 observations deleted)
(3,168 real changes made)
(38,482 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  (1,616,082 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2019.dta saved
zipcode was int now str4
variable zipcode was str4 now str5
(175,052 real changes made)
(17,692 observations deleted)
(16,503 observations deleted)
(39 observations deleted)
(36 observations deleted)
(79,454 observations deleted)
(27 observations deleted)
(37,056 real changes made)
(37,057 real changes made)
(0 real changes made)
(0 real changes made)
(2 real changes made)
(9 real changes made)
(61,292 real changes made)
(3 real changes made)
(3 real changes made)
r_kitch: all characters numeric; replaced as byte
  variable living_area was long now int
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  (1,593,826 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2020.dta saved
zipcode was int now str4
variable zipcode was str4 now str5
(177,091 real changes made)
variable created as string: 
dollars1
dollars1: characters $ , removed; replaced as long
(18079 missing values generated)
(18,079 observations deleted)
(16,654 observations deleted)
(59 observations deleted)
(28 observations deleted)
(16,068 observations deleted)
(42 observations deleted)
(59,928 real changes made)
(59,928 real changes made)
(0 real changes made)
(5 real changes made)
(92,580 real changes made)
(9 real changes made)
  variable year_assessed was float now int
  variable yrs_since_built was float now int
  variable yrs_since_remodel was float now int
  variable heat_electric was float now byte
  variable heat_forced_hot_air was float now byte
  variable heat_pump was float now byte
  variable heat_space was float now byte
  variable heat_steam was float now byte
  variable heat_other was float now byte
  (3,027,864 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/property_assessments_ma_2021.dta saved

. 
. * Merge datasets from 2014-2021 into one dataset containing all years
. use "$MyProject/processed/intermediate/property_assessments_ma_2014.dta", clear

. forvalues y = 2015/2021 {
  2.         append using "$MyProject/processed/intermediate/property_assessments_ma_`y'.dta"
  3. }
(variable living_area was int, now long to accommodate using data's values)

. 
. * Only keep common building types
. replace lu = "A" if lu == "R4"
(13 real changes made)

. replace lu = "CD" if lu == "CC"
(1 real change made)

. replace lu = "E" if lu == "C"
(2 real changes made)

. replace lu = "R" if lu == "R1" | lu == "R2" | lu == "R3" | lu == "RC"
(494,676 real changes made)

. drop if lu == "EA" | lu == "XX"
(382 observations deleted)

. 
. * Save dataset containing all years
. compress
  (0 bytes saved)

. save "$MyProject/processed/property_assessments_ma.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/property_assessments_ma.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2g_clean_ma_home_values_data.do"

. ************
. * SCRIPT: 2g_clean_ma_home_values_data.do
. * PURPOSE: processes the zillow home value dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/intermediate/zillow_home_values_uncleaned.dta", clear

. 
. * Select only desired columns
. drop regionid sizerank regiontype statename city metro countyname

. 
. * Rename zipcode
. rename regionname zipcode

. 
. * Rename v10-v274 to their label (month/year)
. foreach v of varlist v* {
  2.         local x: variable label `v'
  3.         local year = substr("`x'", 1, 4)
  4.         local month = substr("`x'", 6, 2)
  5.         rename `v' hv_`month'_`year'
  6. }

. 
. save "$MyProject/processed/zillow_home_values.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zillow_home_values.dta saved

. 
. * Filter to only include observations from Massachusetts
. keep if state=="MA"
(29,950 observations deleted)

. 
. * Make zipcode type string
. tostring zipcode, replace
zipcode was long now str4

. replace zipcode = "0" + zipcode
variable zipcode was str4 now str5
(518 real changes made)

. 
. * Add city name
. merge 1:1 zipcode using "$MyProject/processed/zip_code_centroids.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                            94
        from master                        18  (_merge==1)
        from using                         76  (_merge==2)

    Matched                               500  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(94 observations deleted)

. drop _merge latitude longitude min_dist_disp min_dist_2019 min_dist_2020 min_dist_2021 min_dist_2022 state

. order zipcode city

. 
. * Add MA zoning laws
. merge m:1 city using "$MyProject/processed/ma_zoning_laws.dta"
(variable city was str18, now str21 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                           169
        from master                       137  (_merge==1)
        from using                         32  (_merge==2)

    Matched                               363  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(169 observations deleted)

. drop _merge

. 
. * Save dataset
. compress
  variable city was str21 now str16
  (1,815 bytes saved)

. save "$MyProject/processed/zillow_home_values_ma.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zillow_home_values_ma.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2h_clean_us_home_values_data.do"

. ************
. * SCRIPT: 2h_clean_us_home_values_data.do
. * PURPOSE: processes the zillow home value dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/zillow_home_values.dta", clear

. 
. * Make zipcode type string
. tostring zipcode, replace
zipcode was long now str5

. replace zipcode = "0" + zipcode if strlen(zipcode)==4
(2,351 real changes made)

. replace zipcode = "00" + zipcode if strlen(zipcode)==3
(7 real changes made)

. 
. * Add state legality
. rename state abbreviation

. merge m:1 abbreviation using "$MyProject/processed/us_states_legality.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,468  (_merge==3)
    -----------------------------------------

. drop _merge

. 
. * Save dataset
. compress
  (0 bytes saved)

. save "$MyProject/processed/zillow_home_values_us.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/zillow_home_values_us.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2i_clean_boston_crash_data.do"

. ************
. * SCRIPT: 2h_clean_boston_crash_data.do
. * PURPOSE: processes the boston crash dataset in preparation for analysis
. ************
. 
. * Clean dataset for each year, one at a time
. forvalues y = 2014/2021 {
  2.         use "$MyProject/processed/intermediate/crashes_boston_`y'_uncleaned.dta", clear
  3.         
.         * Rename variables so all years are the same
.         if `y' == 2020 | `y' == 2021 {
  4.                 rename CRASH_NUMB crash_numb
  5.         }
  6.         
.         * Select only desired columns
.         keep crash_numb city_town_name crash_date_text crash_hour numb_vehc  numb_nonfatal_injr numb_fatal_injr ambnt_light_descr weath_cond_descr road_surf_cond_descr lat lon a
> ge_drvr_yngst age_drvr_oldest drvr_distracted_cl
  7.         
.         * Rename variables
.         rename crash_numb crash_num
  8.         rename city_town_name city_town
  9.         rename numb_vehc num_vehicles
 10.         rename numb_nonfatal_injr num_nonfatal_injuries
 11.         rename numb_fatal_injr num_fatal_injuries
 12.         
.         * Drop observations with no vehicles involved
.         drop if num_vehicles==0
 13.         
.         * Replace missing lat/lon data with average of city/town
.         replace city_town = proper(city_town)
 14.         by city_town, sort: egen mean_lat = mean(lat)
 15.         by city_town, sort: egen mean_lon = mean(lon)
 16.         replace lat = mean_lat if missing(lat)
 17.         replace lon = mean_lon if missing(lon)
 18.         drop city_town mean_lat mean_lon
 19.         order crash_num lat lon
 20.         
.         * Save dataset for year `y'
.         compress
 21.         save "$MyProject/processed/intermediate/crashes_boston_`y'.dta", replace
 22. }
(14 observations deleted)
(130,219 real changes made)
(3 missing values generated)
(3 missing values generated)
(5,203 real changes made)
(5,203 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2014.dta saved
(3 observations deleted)
(139,047 real changes made)
(4 missing values generated)
(4 missing values generated)
(6,347 real changes made)
(6,347 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2015.dta saved
(2 observations deleted)
(143,472 real changes made)
(6,800 real changes made)
(6,800 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2016.dta saved
(1 observation deleted)
(145,067 real changes made)
(1 missing value generated)
(1 missing value generated)
(6,144 real changes made)
(6,144 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2017.dta saved
(0 observations deleted)
(142,272 real changes made)
(5,949 real changes made)
(5,949 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2018.dta saved
(0 observations deleted)
(140,939 real changes made)
(7,888 real changes made)
(7,888 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2019.dta saved
(1 observation deleted)
(100,723 real changes made)
(1 missing value generated)
(1 missing value generated)
(3,618 real changes made)
(3,618 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2020.dta saved
(1 observation deleted)
(123,063 real changes made)
(6,006 real changes made)
(6,006 real changes made)
  (0 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crashes_boston_2021.dta saved

. 
. * Merge datasets from 2014-2021 into one dataset containing all years
. use "$MyProject/processed/intermediate/crashes_boston_2014.dta", clear

. forvalues y = 2015/2021 {
  2.         append using "$MyProject/processed/intermediate/crashes_boston_`y'.dta"
  3. }
(variable drvr_distracted_cl was str181, now str245 to accommodate using data's values)

. 
. * Create variables for crash month, day, and year
. split crash_date_text, parse("/")
variables created as string: 
crash_date~1  crash_date~2  crash_date~3

. destring crash_date_text1, gen(crash_month)
crash_date_text1: all characters numeric; crash_month generated as byte

. destring crash_date_text2, gen(crash_day)
crash_date_text2: all characters numeric; crash_day generated as byte

. destring crash_date_text3, gen(crash_year)
crash_date_text3: all characters numeric; crash_year generated as int

. drop crash_date_text crash_date_text1 crash_date_text2 crash_date_text3

. 
. * Create variable for day of the week (0 = Sunday, 1 = Monday, ..., 6 = Saturday)
. gen crash_dow = dow(mdy(crash_month, crash_day, crash_year))

. 
. * Create variable for crash hour (0-23)
. gen hour = substr(crash_hour, 1, 2)
(446 missing values generated)

. destring hour, replace
hour: all characters numeric; replaced as byte
(446 missing values generated)

. gen am = substr(crash_hour, 6, 2)=="AM"

. gen ch = cond(am, cond(hour==12, 0, hour), cond(hour==12, 12, hour+12))
(446 missing values generated)

. drop crash_hour hour am

. rename ch crash_hour

. 
. * Generate dummy variables for road conditions
. gen road_condition_ice = road_surf_cond_descr==`"Ice"'

. gen road_condition_wet = road_surf_cond_descr==`"Wet"' | road_surf_cond_descr==`"Water (standing, moving)"'

. gen road_condition_snow = road_surf_cond_descr==`"Snow"' | road_surf_cond_descr==`"Slush"'

. gen road_condition_unknown = road_surf_cond_descr==`"Unknown"' | road_surf_cond_descr==`"Other"' | road_surf_cond_descr==`"Not reported"' | road_surf_cond_descr==`"Reported but 
> invalid"'

. drop road_surf_cond_descr

. 
. * Generate dummy variables for light conditions
. gen light_condition_dark = ambnt_light_descr==`"Dark - roadway not lighted"' | ambnt_light_descr==`"Dark - unknown roadway lighting"'

. gen light_condition_dark_lighted = ambnt_light_descr==`"Dark - lighted roadway"'

. gen light_condition_dawn = ambnt_light_descr==`"Dawn"'

. gen light_condition_dusk = ambnt_light_descr==`"Dusk"'

. gen light_condition_unknown = ambnt_light_descr==`"Unknown"' | ambnt_light_descr==`"Other"' | ambnt_light_descr==`"Not reported"' | ambnt_light_descr==`"Reported but invalid"'

. drop ambnt_light_descr

. 
. * Generate dummy variables for weather conditions
. split weath_cond_descr, parse("/")
variables created as string: 
weath_cond~1  weath_cond~2

. gen weather_condition_rain = weath_cond_descr1==`"Rain"' | weath_cond_descr2==`"Rain"'

. gen weather_condition_snow = weath_cond_descr1==`"Snow"' | weath_cond_descr2==`"Snow"' | weath_cond_descr1==`"Blowing sand, snow"' | weath_cond_descr2==`"Blowing sand, snow"'

. gen weather_condition_sleet = weath_cond_descr1==`"Sleet, hail (freezing rain or drizzle)"' | weath_cond_descr2==`"Sleet, hail (freezing rain or drizzle)"'

. gen weather_condition_fog = weath_cond_descr1==`"Fog, smog, smoke"' | weath_cond_descr2==`"Fog, smog, smoke"'

. gen weather_condition_wind = weath_cond_descr1==`"Severe crosswinds"' | weath_cond_descr2==`"Severe crosswinds"'

. gen weather_condition_unknown = weath_cond_descr1==`"Not reported"' | weath_cond_descr1==`"Reported but invalid"' | ((weath_cond_descr1==`"Unknown"' | weath_cond_descr1==`"Other
> "') & (weath_cond_descr2==`"Unknown"' | weath_cond_descr2==`"Other"'))

. drop weath_cond_descr weath_cond_descr1 weath_cond_descr2

. 
. * Generate dummy variables for young/old drivers
. gen young_driver_under_16 = age_drvr_yngst==`"<16"' | age_drvr_oldest==`"<16"'

. gen young_driver_under_18 = (age_drvr_yngst==`"16-17"' | age_drvr_oldest==`"16-17"') & !young_driver_under_16

. gen young_driver_under_21 = (age_drvr_yngst==`"18-20"' | age_drvr_oldest==`"18-20"') & !(young_driver_under_16 | young_driver_under_18)

. gen young_driver_under_25 = (age_drvr_yngst==`"21-24"' | age_drvr_oldest==`"21-24"') & !(young_driver_under_16 | young_driver_under_18 | young_driver_under_21)

. gen old_driver_over_84 = age_drvr_yngst==`">84"' | age_drvr_oldest==`">84"'

. gen old_driver_over_74 = (age_drvr_yngst==`"75-84"' | age_drvr_oldest==`"75-84"') & !old_driver_over_84

. gen old_driver_over_64 = (age_drvr_yngst==`"65-74"' | age_drvr_oldest==`"65-74"') & !(old_driver_over_84 | old_driver_over_74)

. drop age_drvr_yngst age_drvr_oldest

. 
. * Generate dummy variables for distracted drivers
. split drvr_distracted_cl, parse(" / ")
variables created as string: 
drvr_dist~l1  drvr_dist~l2  drvr_distr~3  drvr_distr~4  drvr_distr~5  drvr_distr~6  drvr_distr~7  drvr_distr~8  drvr_distr~9  drvr_dist~10  drvr_dist~11  drvr_dist~12

. drop drvr_distracted_cl

. gen distracted = 0

. forvalues i = 1/12 {
  2.         split drvr_distracted_cl`i', parse(": ") generate(d_`i'_)
  3.         replace distracted = 1 if d_`i'_2 == `"Manually operating an electronic device"' | d_`i'_2 == `"Other activity, electronic device"' | d_`i'_2 == `"Talking on hand-hel
> d electronic device"' | d_`i'_2 == `"Talking on hands-free electronic device"' | d_`i'_2 == `"Other activity (searching, eating, personal hygiene, etc.)"' | d_`i'_2 == `"Externa
> l distraction (outside the vehicle)"'
  4. }
variables created as string: 
d_1_1  d_1_2
(63,158 real changes made)
variables created as string: 
d_2_1  d_2_2
(9,293 real changes made)
variables created as string: 
d_3_1  d_3_2
(914 real changes made)
variables created as string: 
d_4_1  d_4_2
(106 real changes made)
variables created as string: 
d_5_1  d_5_2
(13 real changes made)
variables created as string: 
d_6_1  d_6_2
(1 real change made)
variables created as string: 
d_7_1  d_7_2
(1 real change made)
variables created as string: 
d_8_1  d_8_2
(0 real changes made)
variables created as string: 
d_9_1  d_9_2
(0 real changes made)
variables created as string: 
d_10_1  d_10_2
(0 real changes made)
variables created as string: 
d_11_1  d_11_2
(0 real changes made)
variables created as string: 
d_12_1  d_12_2
(0 real changes made)

. forvalues i = 1/12 {
  2.         drop drvr_distracted_cl`i' d_`i'_1 d_`i'_2
  3. }

. 
. * Save dataset containing all years
. compress
  variable crash_dow was float now byte
  variable crash_hour was float now byte
  variable road_condition_ice was float now byte
  variable road_condition_wet was float now byte
  variable road_condition_snow was float now byte
  variable road_condition_unknown was float now byte
  variable light_condition_dark was float now byte
  variable light_condition_dark_lighted was float now byte
  variable light_condition_dawn was float now byte
  variable light_condition_dusk was float now byte
  variable light_condition_unknown was float now byte
  variable weather_condition_rain was float now byte
  variable weather_condition_snow was float now byte
  variable weather_condition_sleet was float now byte
  variable weather_condition_fog was float now byte
  variable weather_condition_wind was float now byte
  variable weather_condition_unknown was float now byte
  variable young_driver_under_16 was float now byte
  variable young_driver_under_18 was float now byte
  variable young_driver_under_21 was float now byte
  variable young_driver_under_25 was float now byte
  variable old_driver_over_84 was float now byte
  variable old_driver_over_74 was float now byte
  variable old_driver_over_64 was float now byte
  variable distracted was float now byte
  (79,860,150 bytes saved)

. save "$MyProject/processed/crashes_boston.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crashes_boston.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2j_clean_us_crash_data.do"

. ************
. * SCRIPT: 2i_clean_us_crash_data.do
. * PURPOSE: processes the us crash dataset in preparation for analysis
. ************
. 
. use "$MyProject/processed/intermediate/crashes_us_uncleaned.dta", clear

. 
. * Delete first row
. drop if _n==1
(1 observation deleted)

. compress
  (0 bytes saved)

. 
. * Delete row with USA totals
. drop if State=="USA"
(1 observation deleted)

. 
. * Select only desired columns
. keep State v3-v28 v30-v55

. 
. * Rename v3-v28 to their label (fatalities in a given yer)
. foreach v of varlist v3-v28 {
  2.         local x: variable label `v'
  3.         rename `v' num_fatalities_`x'
  4. }

. * Rename v30-v55 to their label (fatalities per 100 million miles traveled)
. foreach v of varlist v30-v55 {
  2.         local x: variable label `v'
  3.         rename `v' fatality_rate_`x'
  4. }

. 
. * Save dataset
. compress
  variable num_fatalities_1994 was long now int
  variable num_fatalities_1995 was long now int
  variable num_fatalities_1996 was long now int
  variable num_fatalities_1997 was long now int
  variable num_fatalities_1998 was long now int
  variable num_fatalities_1999 was long now int
  variable num_fatalities_2000 was long now int
  variable num_fatalities_2001 was long now int
  variable num_fatalities_2002 was long now int
  variable num_fatalities_2003 was long now int
  variable num_fatalities_2004 was long now int
  variable num_fatalities_2005 was long now int
  variable num_fatalities_2006 was long now int
  variable num_fatalities_2007 was long now int
  variable num_fatalities_2008 was long now int
  variable num_fatalities_2009 was long now int
  variable num_fatalities_2010 was long now int
  variable num_fatalities_2012 was long now int
  variable num_fatalities_2013 was long now int
  variable num_fatalities_2014 was long now int
  variable num_fatalities_2015 was long now int
  variable num_fatalities_2016 was long now int
  variable num_fatalities_2017 was long now int
  variable num_fatalities_2018 was long now int
  variable num_fatalities_2019 was long now int
  (2,550 bytes saved)

. save "$MyProject/processed/crashes_us.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crashes_us.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2k_clean_boston_crime_data.do"

. ************
. * SCRIPT: 2j_clean_boston_crime_data.do
. * PURPOSE: processes the boston crime dataset in preparation for analysis
. ************
. 
. * Clean dataset of offense codes
. use "$MyProject/processed/intermediate/offense_codes.dta", clear

. foreach var of varlist * {
  2.         local x = strtoname(`var'[1])
  3.         rename `var' `x'
  4. }

. drop in 1
(1 observation deleted)

. 
. * Rename variables
. rename CODE code

. rename NAME name

. 
. * Convert code variable to int type
. destring code, replace
code: all characters numeric; replaced as int

. 
. * Drop duplicate codes, keeping the first occurrence
. sort code

. qui by code: gen dup = cond(_N==1, 0, _n)

. drop if dup > 1
(151 observations deleted)

. drop dup

. 
. * Create dummy variables for each type of crime
. gen arson = (code >= 900 & code <= 930)

. gen assault = (code >= 401 & code <= 433) | (code >= 801 & code <= 803) | (code==1702) | (code >= 1725 & code <= 1727) | (code == 3170)

. gen auto_law_violation = (code == 2624) | (code >= 2900 & code <= 2917)

. gen burglary = (code >= 510 & code <= 562) | (code == 2010) | (code == 2616)

. gen counterfeiting = (code == 1001) | (code == 1002)

. gen destruction = (code >= 1401 & code <= 1415) | (code == 3106) | (code == 3701) | (code == 3802) | (code == 3831)

. gen disorderly = (code >= 2401 & code <= 2407) | (code >= 3301 & code <= 3305)

. gen drug = (code >= 1805 & code <= 1875) | (code == 2609) | (code >= 3021 & code <= 3023)

. gen dui = (code == 2101) | (code == 2102)

. gen embezzlement = (code == 1201)

. gen extortion = (code == 2604)

. gen family_offenses = (code >= 2003 & code <= 2005)

. gen fraud = (code >= 1101 & code <= 1109)

. gen gambling = (code >= 1901 & code <= 1904)

. gen harassment = (code == 804) | (code == 2629) | (code == 2670) | (code == 3151)

. gen homicide = (code >= 111 & code <= 125)

. gen kidnapping = (code == 2511) | (code == 2622)

. gen larceny = (code >= 611 & code <= 649)

. gen liquor_law = (code >= 2201 & code <= 2204) | (code == 2646)

. gen motor_vehicle_theft = (code >= 701 & code <= 790)

. gen obscene_material = (code == 2623 | code == 2628)

. gen prostitution = (code >= 1601 & code <= 1607)

. gen robbery = (code >= 301 & code <= 381)

. gen sex_offenses = (code >= 211 & code <= 271) | (code >= 1610 & code <= 1723) | (code == 1730) | (code == 1731)

. gen stolen_property = (code >= 1300 & code <= 1304)

. gen weapon = (code >= 1501 & code <= 1510) | (code == 3119)

. 
. gen motor_vehicle_accident = (code >= 3701 & code <= 3831)

. 
. gen crimes_against_property = (arson + burglary + counterfeiting + destruction + embezzlement + extortion + fraud + larceny + motor_vehicle_theft + robbery + stolen_property >= 
> 1)

. gen crimes_against_persons = (assault + homicide + kidnapping + sex_offenses >= 1)

. gen crimes_against_society = (auto_law_violation + disorderly + drug + dui + family_offenses + gambling + liquor_law + obscene_material + prostitution + weapon >= 1)

. 
. drop arson assault auto_law_violation burglary counterfeiting destruction disorderly drug dui embezzlement extortion family_offenses fraud gambling harassment homicide kidnappin
> g larceny liquor_law motor_vehicle_theft obscene_material prostitution robbery sex_offenses stolen_property weapon

. 
. rename code offense_code

. 
. compress
  variable motor_vehicle_accident was float now byte
  variable crimes_against_property was float now byte
  variable crimes_against_persons was float now byte
  variable crimes_against_society was float now byte
  (5,100 bytes saved)

. save "$MyProject/processed/offense_codes.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/offense_codes.dta saved

. 
. * Clean dataset for each year, one at a time
. forvalues y = 2015/2022 {
  2.         use "$MyProject/processed/intermediate/crime_boston_`y'_uncleaned.dta", clear
  3.         
.         * Merge with offense codes dataset
.         sort offense_code
  4.         merge m:1 offense_code using "$MyProject/processed/offense_codes.dta"
  5.         drop if _merge==2
  6.         
.         * Select only desired columns
.         keep district occurred_on_date year month day_of_week hour latitude longitude motor_vehicle_accident crimes_against_property crimes_against_persons crimes_against_societ
> y
  7.         
.         * Generate day of month from occurred_on_date
.         split occurred_on_date, parse(" ")
  8.         split occurred_on_date1, parse("-")
  9.         rename occurred_on_date13 day
 10.         drop occurred_on_date*
 11.         
.         * Convert day_of_week variable to int (0 = Sunday, 1 = Monday, ..., 6 = Saturday)
.         rename day_of_week dow
 12.         gen day_of_week = cond(dow == "Sunday", 0, cond(dow == "Monday", 1, cond(dow == "Tuesday", 2, cond(dow == "Wednesday", 3, cond(dow == "Thursday", 4, cond(dow == "Frid
> ay", 5, cond(dow == "Saturday", 6, .)))))))
 13.         drop dow
 14.         
.         * Save dataset for year `y'
.         compress
 15.         save "$MyProject/processed/intermediate/crime_boston_`y'.dta", replace
 16. }

    Result                      Number of obs
    -----------------------------------------
    Not matched                           225
        from master                         0  (_merge==1)
        from using                        225  (_merge==2)

    Matched                            53,597  (_merge==3)
    -----------------------------------------
(225 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (160,791 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2015.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                           221
        from master                         0  (_merge==1)
        from using                        221  (_merge==2)

    Matched                            99,430  (_merge==3)
    -----------------------------------------
(221 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (298,290 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2016.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                           236
        from master                         0  (_merge==1)
        from using                        236  (_merge==2)

    Matched                           101,338  (_merge==3)
    -----------------------------------------
(236 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (304,014 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2017.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                           241
        from master                         0  (_merge==1)
        from using                        241  (_merge==2)

    Matched                            98,888  (_merge==3)
    -----------------------------------------
(241 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (296,664 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2018.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,948
        from master                     1,693  (_merge==1)
        from using                        255  (_merge==2)

    Matched                            85,491  (_merge==3)
    -----------------------------------------
(255 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (261,552 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2019.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,029
        from master                     4,718  (_merge==1)
        from using                        311  (_merge==2)

    Matched                            66,176  (_merge==3)
    -----------------------------------------
(311 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (212,682 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2020.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,648
        from master                     5,339  (_merge==1)
        from using                        309  (_merge==2)

    Matched                            66,382  (_merge==3)
    -----------------------------------------
(309 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (215,163 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2021.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                           407
        from master                        91  (_merge==1)
        from using                        316  (_merge==2)

    Matched                            14,559  (_merge==3)
    -----------------------------------------
(316 observations deleted)
variables created as string: 
occurred_o~1  occurred_o~2
variables created as string: 
occurred_~11  occurred_~12  occurred_~13
  variable day_of_week was float now byte
  (43,950 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_boston_2022.dta saved

. 
. * Merge datasets from 2014-2021 into one dataset containing all years
. use "$MyProject/processed/intermediate/crime_boston_2015.dta", clear

. forvalues y = 2016/2022 {
  2.         append using "$MyProject/processed/intermediate/crime_boston_`y'.dta"
  3. }
(variable district was str3, now str8 to accommodate using data's values)

. 
. * Drop rows with unknown offense_code
. drop if missing(crimes_against_property)
(11,841 observations deleted)

. 
. * Drop rows with missing location data
. drop if (missing(district) | district == "External") & (missing(latitude) | missing(longitude))
(318 observations deleted)

. 
. * Replace missing latitude/longitude data with median of district
. replace latitude = . if latitude <= 40
(71,714 real changes made, 71,714 to missing)

. bysort district: egen median_latitude = median(latitude)

. replace latitude = median_latitude if missing(latitude)
(93,926 real changes made)

. drop median_latitude

. 
. replace longitude = . if longitude >= -50
(71,714 real changes made, 71,714 to missing)

. bysort district: egen median_longitude = median(longitude)

. replace longitude = median_longitude if missing(longitude)
(93,926 real changes made)

. drop median_longitude

. 
. drop district

. 
. * Save dataset
. compress
  (0 bytes saved)

. save "$MyProject/processed/crime_boston.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston.dta saved

. 
. * Add zipcodes
. gen zipcode = .
(585,543 missing values generated)

. gen min_dist = .
(585,543 missing values generated)

. save "$MyProject/processed/crime_boston_zipcodes.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved

. 
. forvalues i = 1/30 {
  2.         use "$MyProject/processed/boston_zip_code_centroids.dta", clear
  3.         sort zipcode
  4.         
.         local z = zipcode[`i']
  5.         local zip_lat = latitude[`i']
  6.         local zip_lon = longitude[`i']
  7.         
.         use "$MyProject/processed/crime_boston_zipcodes.dta", clear
  8.         geodist `zip_lat' `zip_lon' latitude longitude, gen(dist_`z') mile
  9.         
.         replace zipcode = `z' if missing(zipcode) | dist_`z' < min_dist
 10.         replace min_dist = dist_`z' if missing(min_dist) | dist_`z' < min_dist
 11.         
.         save "$MyProject/processed/crime_boston_zipcodes.dta", replace
 12. }
(585,543 real changes made)
(585,543 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(63,545 real changes made)
(63,545 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(41,435 real changes made)
(41,435 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(387,468 real changes made)
(387,468 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(28,663 real changes made)
(28,663 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(13,660 real changes made)
(13,660 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(415,951 real changes made)
(415,951 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(57,020 real changes made)
(57,020 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(273,305 real changes made)
(273,305 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(313,783 real changes made)
(313,783 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(53,733 real changes made)
(53,733 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(233,835 real changes made)
(233,835 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(83,583 real changes made)
(83,583 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(109,315 real changes made)
(109,315 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(38,792 real changes made)
(38,792 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(95,420 real changes made)
(95,420 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(30,001 real changes made)
(30,001 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(24,140 real changes made)
(24,140 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(11,640 real changes made)
(11,640 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(44,512 real changes made)
(44,512 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(50,239 real changes made)
(50,239 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(17,871 real changes made)
(17,871 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(38,332 real changes made)
(38,332 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(23,941 real changes made)
(23,941 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(24,352 real changes made)
(24,352 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(669 real changes made)
(669 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(11,184 real changes made)
(11,184 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(23,976 real changes made)
(23,976 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(2,913 real changes made)
(2,913 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved
(7,500 real changes made)
(7,500 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved

. 
. drop min_dist dist_*

. format zipcode %05.0f

. destring day, replace
day: all characters numeric; replaced as byte

. order year zipcode day_of_week month day hour

. 
. * Save dataset
. compress
  variable zipcode was float now int
  (1,171,086 bytes saved)

. save "$MyProject/processed/crime_boston_zipcodes.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_boston_zipcodes.dta saved

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/2l_clean_us_crime_data.do"

. ************
. * SCRIPT: 2k_clean_us_crime_data.do
. * PURPOSE: processes the fbi table 8 dataset in preparation for analysis
. ************
. 
. forvalues y = 2008/2019 {
  2.         use "$MyProject/processed/intermediate/crime_us_`y'_uncleaned.dta", clear
  3.         
.         * Drop first 3 rows
.         drop if _n==1 | _n==2 | _n==3
  4.         
.         * Drop any additional empty columns
.         keep A B C D E F G H I J K L M
  5.         
.         * Drop end rows with notes about dataset
.         if `y' == 2008 {
  6.                 drop if _n >= 8774
  7.         }
  8.         else if `y' == 2009 {
  9.                 drop if _n >= 9148
 10.         }
 11.         else if `y' == 2010 {
 12.                 drop if _n >= 9312
 13.         }
 14.         else if `y' == 2011 {
 15.                 drop if _n >= 9316
 16.         }
 17.         else if `y' == 2012 {
 18.                 drop if _n >= 9493
 19.         }
 20.         else if `y' == 2013 {
 21.                 drop if _n >= 9294
 22.         }
 23.         else if `y' == 2014 {
 24.                 drop if _n >= 9349
 25.         }
 26.         else if `y' == 2015 {
 27.                 drop if _n >= 9397
 28.         }
 29.         else if `y' == 2016 {
 30.                 split A, parse(" - ") gen(state)
 31.                 drop A state2
 32.                 rename state1 A
 33.                 order A
 34.                 drop if _n == 1
 35.                 drop if _n >= 2614
 36.         }
 37.         else if `y' == 2017 {
 38.                 drop if _n >= 9581
 39.         }
 40.         else if `y' == 2018 {
 41.                 drop if _n >= 9254
 42.         }
 43.         else if `y' == 2019 {
 44.                 drop if _n >= 8107
 45.         }
 46.         
.         * Rename variables
.         rename A state
 47.         rename B city
 48.         rename C population
 49.         rename D violent_crime
 50.         rename E murder
 51.         rename F rape
 52.         rename G robbery
 53.         rename H assault
 54.         rename I property_crime
 55.         rename J burglary
 56.         rename K larceny
 57.         rename L mv_theft
 58.         rename M arson
 59.         drop if _n == 1
 60.         
.         * Convert string variables to numeric
.         destring population, replace
 61.         destring violent_crime, replace
 62.         destring murder, replace
 63.         destring rape, replace
 64.         destring robbery, replace
 65.         destring assault, replace
 66.         destring property_crime, replace
 67.         destring burglary, replace
 68.         destring larceny, replace
 69.         destring mv_theft, replace
 70.         destring arson, replace
 71.         
.         * Fill in missing data with 0
.         replace murder = 0 if missing(murder)
 72.         replace rape = 0 if missing(rape)
 73.         replace robbery = 0 if missing(robbery)
 74.         replace assault = 0 if missing(assault)
 75.         replace burglary = 0 if missing(burglary)
 76.         replace larceny = 0 if missing(larceny)
 77.         replace mv_theft = 0 if missing(mv_theft)
 78.         replace arson = 0 if missing(arson)
 79.         
.         replace violent_crime = murder + rape + robbery + assault
 80.         replace property_crime = burglary + larceny + mv_theft + arson
 81.         
.         * Rename variables to have year `y' appended
.         rename population population_`y'
 82.         rename violent_crime violent_crime_`y'
 83.         rename murder murder`y'
 84.         rename rape rape_`y'
 85.         rename robbery robbery_`y'
 86.         rename assault assault_`y'
 87.         rename property_crime property_crime_`y'
 88.         rename burglary burglary_`y'
 89.         rename larceny larceny_`y'
 90.         rename mv_theft mv_theft_`y'
 91.         rename arson arson_`y'
 92.         
.         * Fill in states column
.         replace state = state[_n-1] if missing(state)
 93.         replace state = proper(state)
 94.         replace state = "District of Columbia" if state == "District Of Columbia"
 95.         
.         * Remove footnote marking from state/city names
.         qui forval j = 0/9 {
 96.                 replace state = subinstr(state, "`j'", "", .)
 97.                 replace city = subinstr(city, "`j'", "", .)
 98.         }
 99.         
.         * Create variable for city, state
.         merge m:1 state using "$MyProject/processed/us_states_legality.dta"
100.         drop medical recreational year_legalized_med year_legalized_rec _merge
101.         gen city_state = city + ", " + abbreviation
102.         order state abbreviation city city_state
103.         
.         * Save dataset for year `y'
.         compress
104.         save "$MyProject/processed/intermediate/crime_us_`y'.dta", replace
105. }
(3 observations deleted)
(8 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
violent_crime: all characters numeric; replaced as long
(229 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(214 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(15 missing values generated)
property_crime: all characters numeric; replaced as long
(14 missing values generated)
burglary: all characters numeric; replaced as int
(10 missing values generated)
larceny: all characters numeric; replaced as long
(2 missing values generated)
mv_theft: all characters numeric; replaced as int
(2 missing values generated)
arson: all characters numeric; replaced as int
(548 missing values generated)
(0 real changes made)
(214 real changes made)
(0 real changes made)
(15 real changes made)
(10 real changes made)
(2 real changes made)
(2 real changes made)
(548 real changes made)
(229 real changes made)
(4,060 real changes made)
(8,721 real changes made)
(8,772 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             8,772  (_merge==3)
    -----------------------------------------
  variable state was str394 now str20
  (3,280,728 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2008.dta saved
(3 observations deleted)
(9 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(2 missing values generated)
violent_crime: all characters numeric; replaced as long
(336 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(315 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(22 missing values generated)
property_crime: all characters numeric; replaced as long
(29 missing values generated)
burglary: all characters numeric; replaced as int
(13 missing values generated)
larceny: all characters numeric; replaced as long
(16 missing values generated)
mv_theft: all characters numeric; replaced as int
(4 missing values generated)
arson: all characters numeric; replaced as int
(322 missing values generated)
(0 real changes made)
(315 real changes made)
(0 real changes made)
(22 real changes made)
(13 real changes made)
(16 real changes made)
(4 real changes made)
(322 real changes made)
(336 real changes made)
(4,105 real changes made)
(9,095 real changes made)
(9,146 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             9,146  (_merge==3)
    -----------------------------------------
  variable state was str395 now str20
  (3,429,750 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2009.dta saved
(3 observations deleted)
(7 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(4 missing values generated)
violent_crime: all characters numeric; replaced as long
(229 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(205 missing values generated)
robbery: all characters numeric; replaced as int
(2 missing values generated)
assault: all characters numeric; replaced as int
(22 missing values generated)
property_crime: all characters numeric; replaced as long
(30 missing values generated)
burglary: all characters numeric; replaced as int
(16 missing values generated)
larceny: all characters numeric; replaced as long
(14 missing values generated)
mv_theft: all characters numeric; replaced as int
(3 missing values generated)
arson: all characters numeric; replaced as int
(378 missing values generated)
(0 real changes made)
(205 real changes made)
(2 real changes made)
(22 real changes made)
(16 real changes made)
(14 real changes made)
(3 real changes made)
(378 real changes made)
(229 real changes made)
(4,178 real changes made)
(9,259 real changes made)
(9,310 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             9,310  (_merge==3)
    -----------------------------------------
  variable state was str374 now str20
  (3,295,740 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2010.dta saved
(3 observations deleted)
(7 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(3 missing values generated)
violent_crime: all characters numeric; replaced as long
(209 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(207 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(2 missing values generated)
property_crime: all characters numeric; replaced as long
(5 missing values generated)
burglary: all characters numeric; replaced as int
(1 missing value generated)
larceny: all characters numeric; replaced as long
(5 missing values generated)
mv_theft: all characters numeric; replaced as int
(1 missing value generated)
arson: all characters numeric; replaced as int
(86 missing values generated)
(0 real changes made)
(207 real changes made)
(0 real changes made)
(2 real changes made)
(1 real change made)
(5 real changes made)
(1 real change made)
(86 real changes made)
(209 real changes made)
(4,102 real changes made)
(9,264 real changes made)
(9,314 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            45
        from master                        43  (_merge==1)
        from using                          2  (_merge==2)

    Matched                             9,271  (_merge==3)
    -----------------------------------------
  variable state was str374 now str20
  (3,297,864 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2011.dta saved
(3 observations deleted)
(7 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(1 missing value generated)
violent_crime: all characters numeric; replaced as long
(222 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(211 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(11 missing values generated)
property_crime: all characters numeric; replaced as long
(17 missing values generated)
burglary: all characters numeric; replaced as int
(12 missing values generated)
larceny: all characters numeric; replaced as long
(6 missing values generated)
mv_theft: all characters numeric; replaced as int
arson: all characters numeric; replaced as int
(411 missing values generated)
(0 real changes made)
(211 real changes made)
(0 real changes made)
(11 real changes made)
(12 real changes made)
(6 real changes made)
(0 real changes made)
(411 real changes made)
(222 real changes made)
(3,987 real changes made)
(9,441 real changes made)
(9,491 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             1
        from master                         0  (_merge==1)
        from using                          1  (_merge==2)

    Matched                             9,491  (_merge==3)
    -----------------------------------------
  variable state was str374 now str20
  (3,360,168 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2012.dta saved
(3 observations deleted)
(10 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(3 missing values generated)
violent_crime: all characters numeric; replaced as long
(4 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(3861 missing values generated)
robbery: all characters numeric; replaced as int
(5433 missing values generated)
assault: all characters numeric; replaced as int
property_crime: all characters numeric; replaced as int
(3 missing values generated)
burglary: all characters numeric; replaced as long
(4 missing values generated)
larceny: all characters numeric; replaced as int
(2 missing values generated)
mv_theft: all characters numeric; replaced as long
(2 missing values generated)
arson: all characters numeric; replaced as int
(0 real changes made)
(3,861 real changes made)
(5,433 real changes made)
(0 real changes made)
(4 real changes made)
(2 real changes made)
(2 real changes made)
(0 real changes made)
(7,862 real changes made)
variable property_crime was int now long
(9,113 real changes made)
(9,242 real changes made)
(9,292 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             1
        from master                         0  (_merge==1)
        from using                          1  (_merge==2)

    Matched                             9,292  (_merge==3)
    -----------------------------------------
  variable violent_crime_2013 was long now int
  variable state was str339 now str20
  (2,983,053 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2013.dta saved
(3 observations deleted)
(17 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(2 missing values generated)
violent_crime: all characters numeric; replaced as long
(4 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(2207 missing values generated)
robbery: all characters numeric; replaced as int
(7140 missing values generated)
assault: all characters numeric; replaced as int
property_crime: all characters numeric; replaced as int
(4 missing values generated)
burglary: all characters numeric; replaced as long
(19 missing values generated)
larceny: all characters numeric; replaced as int
(4 missing values generated)
mv_theft: all characters numeric; replaced as long
(12 missing values generated)
arson: all characters numeric; replaced as int
(3 missing values generated)
(0 real changes made)
(2,207 real changes made)
(7,140 real changes made)
(0 real changes made)
(19 real changes made)
(4 real changes made)
(12 real changes made)
(3 real changes made)
(7,891 real changes made)
variable property_crime was int now long
(9,137 real changes made)
(9,297 real changes made)
(9,347 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             1
        from master                         0  (_merge==1)
        from using                          1  (_merge==2)

    Matched                             9,347  (_merge==3)
    -----------------------------------------
  variable violent_crime_2014 was long now int
  variable state was str339 now str20
  (3,000,708 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2014.dta saved
(3 observations deleted)
(10 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
violent_crime: all characters numeric; replaced as long
(2 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(1159 missing values generated)
robbery: all characters numeric; replaced as int
(8236 missing values generated)
assault: all characters numeric; replaced as int
property_crime: all characters numeric; replaced as int
(2 missing values generated)
burglary: all characters numeric; replaced as long
(11 missing values generated)
larceny: all characters numeric; replaced as int
(8 missing values generated)
mv_theft: all characters numeric; replaced as long
(3 missing values generated)
arson: all characters numeric; replaced as int
(1 missing value generated)
(0 real changes made)
(1,159 real changes made)
(8,236 real changes made)
(0 real changes made)
(11 real changes made)
(8 real changes made)
(3 real changes made)
(1 real change made)
(7,928 real changes made)
variable property_crime was int now long
(9,164 real changes made)
(9,344 real changes made)
(9,395 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             9,395  (_merge==3)
    -----------------------------------------
  variable violent_crime_2015 was long now int
  variable state was str341 now str20
  (3,034,585 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2015.dta saved
(3 observations deleted)
variables created as string: 
state1  state2
(1 observation deleted)
(9 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as int
(2 missing values generated)
violent_crime: all characters numeric; replaced as byte
murder: all characters numeric; replaced as int
(336 missing values generated)
rape: all characters numeric; replaced as int
(2277 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(1 missing value generated)
property_crime: all characters numeric; replaced as long
(14 missing values generated)
burglary: all characters numeric; replaced as int
(10 missing values generated)
larceny: all characters numeric; replaced as int
(3 missing values generated)
mv_theft: all characters numeric; replaced as int
(2 missing values generated)
arson: all characters numeric; replaced as int
(115 missing values generated)
(336 real changes made)
(2,277 real changes made)
(0 real changes made)
(1 real change made)
(10 real changes made)
(3 real changes made)
(2 real changes made)
(115 real changes made)
variable violent_crime was byte now int
(2,432 real changes made)
(1,292 real changes made)
(2,522 real changes made)
(2,612 real changes made)
(0 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             5
        from master                         0  (_merge==1)
        from using                          5  (_merge==2)

    Matched                             2,612  (_merge==3)
    -----------------------------------------
  variable state was str341 now str20
  (840,057 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2016.dta saved
(3 observations deleted)
(10 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(2 missing values generated)
violent_crime: all characters numeric; replaced as long
(257 missing values generated)
murder: all characters numeric; replaced as int
rape: all characters numeric; replaced as int
(252 missing values generated)
robbery: all characters numeric; replaced as int
assault: all characters numeric; replaced as int
(5 missing values generated)
property_crime: all characters numeric; replaced as long
(20 missing values generated)
burglary: all characters numeric; replaced as int
(16 missing values generated)
larceny: all characters numeric; replaced as long
(6 missing values generated)
mv_theft: all characters numeric; replaced as int
(1 missing value generated)
arson: all characters numeric; replaced as int
(304 missing values generated)
(0 real changes made)
(252 real changes made)
(0 real changes made)
(5 real changes made)
(16 real changes made)
(6 real changes made)
(1 real change made)
(304 real changes made)
(257 real changes made)
(3,513 real changes made)
(9,528 real changes made)
(9,579 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             9,579  (_merge==3)
    -----------------------------------------
  variable state was str247 now str20
  (2,174,433 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2017.dta saved
(3 observations deleted)
(10 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(4 missing values generated)
violent_crime: all characters numeric; replaced as long
(190 missing values generated)
murder: all characters numeric; replaced as int
(2 missing values generated)
rape: all characters numeric; replaced as int
(181 missing values generated)
robbery: all characters numeric; replaced as int
(3 missing values generated)
assault: all characters numeric; replaced as int
(7 missing values generated)
property_crime: all characters numeric; replaced as long
(40 missing values generated)
burglary: all characters numeric; replaced as int
(24 missing values generated)
larceny: all characters numeric; replaced as long
(16 missing values generated)
mv_theft: all characters numeric; replaced as int
(4 missing values generated)
arson: all characters numeric; replaced as int
(327 missing values generated)
(2 real changes made)
(181 real changes made)
(3 real changes made)
(7 real changes made)
(24 real changes made)
(16 real changes made)
(4 real changes made)
(327 real changes made)
(190 real changes made)
(3,183 real changes made)
(9,201 real changes made)
(9,252 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             9,252  (_merge==3)
    -----------------------------------------
  variable state was str247 now str20
  (2,100,204 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2018.dta saved
(3 observations deleted)
(8 observations deleted)
(1 observation deleted)
population: all characters numeric; replaced as long
(2 missing values generated)
violent_crime: all characters numeric; replaced as long
(21 missing values generated)
murder: all characters numeric; replaced as int
(3 missing values generated)
rape: all characters numeric; replaced as int
(15 missing values generated)
robbery: all characters numeric; replaced as int
(1 missing value generated)
assault: all characters numeric; replaced as int
(2 missing values generated)
property_crime: all characters numeric; replaced as long
(23 missing values generated)
burglary: all characters numeric; replaced as int
(13 missing values generated)
larceny: all characters numeric; replaced as long
(7 missing values generated)
mv_theft: all characters numeric; replaced as int
(3 missing values generated)
arson: all characters numeric; replaced as int
(126 missing values generated)
(3 real changes made)
(15 real changes made)
(1 real change made)
(2 real changes made)
(13 real changes made)
(7 real changes made)
(3 real changes made)
(126 real changes made)
(21 real changes made)
(2,981 real changes made)
(8,054 real changes made)
(8,105 real changes made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             8,105  (_merge==3)
    -----------------------------------------
  variable state was str241 now str20
  (1,791,205 bytes saved)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/intermediate/crime_us_2019.dta saved

. 
. * Merge datasets from 2008-2019 into one dataset containing all years
. use "$MyProject/processed/intermediate/crime_us_2008.dta", clear

. forvalues y = 2009/2019 {
  2.         merge 1:1 city_state using "$MyProject/processed/intermediate/crime_us_`y'.dta"
  3.         drop _merge
  4. }

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,474
        from master                       550  (_merge==1)
        from using                        924  (_merge==2)

    Matched                             8,222  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,612
        from master                       999  (_merge==1)
        from using                        613  (_merge==2)

    Matched                             8,697  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,673
        from master                     1,333  (_merge==1)
        from using                        340  (_merge==2)

    Matched                             8,976  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,665
        from master                     1,411  (_merge==1)
        from using                        254  (_merge==2)

    Matched                             9,238  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,984
        from master                     1,797  (_merge==1)
        from using                        187  (_merge==2)

    Matched                             9,106  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         1,944
        from master                     1,843  (_merge==1)
        from using                        101  (_merge==2)

    Matched                             9,247  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         2,160
        from master                     1,978  (_merge==1)
        from using                        182  (_merge==2)

    Matched                             9,213  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        13,032
        from master                    10,894  (_merge==1)
        from using                      2,138  (_merge==2)

    Matched                               479  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,424
        from master                     4,178  (_merge==1)
        from using                        246  (_merge==2)

    Matched                             9,333  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,749
        from master                     4,627  (_merge==1)
        from using                        122  (_merge==2)

    Matched                             9,130  (_merge==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,906
        from master                     5,840  (_merge==1)
        from using                         66  (_merge==2)

    Matched                             8,039  (_merge==3)
    -----------------------------------------

. 
. * Add legalization data
. merge m:1 state using "$MyProject/processed/us_states_legality.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                            43
        from master                        43  (_merge==1)
        from using                          0  (_merge==2)

    Matched                            13,902  (_merge==3)
    -----------------------------------------

. drop _merge

. 
. 
. * Save dataset containing all years
. compress
  (0 bytes saved)

. save "$MyProject/processed/crime_us.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/crime_us.dta saved

. 
. ** EOF
. 
end of do-file

. 
. do "$MyProject/scripts/3a_summarize_us_states_legality_data.do"

. ************
. * SCRIPT: 3a_summarize_us_states_legality_data.do
. * PURPOSE: summarizes the us states legality dataset
. ************
. 
. use "$MyProject/processed/us_states_legality.dta", clear

. 
. * Generate .csv to use in Tableau
. gen status = cond(recreational==1, 2, medical)

. keep state status

. outsheet using "$MyProject/processed/us_states_legality.csv", comma replace

. 
. expand 2
(51 observations created)

. sort state

. gen type_legal = mod(_n, 2)

. gen legal = (status == 1 | status == 2) if type_legal == 0 // medical
(51 missing values generated)

. replace legal = status == 2 if type_legal == 1 // recreational
(51 real changes made)

. gen illegal = 1 - legal

. gen t = 1

. 
. * Summarize legal status by state
. est clear

. estpost tabstat legal illegal t, by(type_legal) stat(sum)

Summary statistics: sum
     for variables: legal illegal t
  by categories of: type_legal

  type_legal |  e(legal)  e(illeg~)       e(t) 
-------------+---------------------------------
           0 |        39         12         51 
           1 |        19         32         51 
-------------+---------------------------------
       Total |        58         44        102 

. esttab using "$MyProject/results/tables/us-states-legality.tex", replace ///
>         cells("legal illegal t") ///
>         collabels("Legal" "Illegal" "Total") ///
>         coeflabel(0 "Medical" 1 "Recreational") ///
>         nonumber nomtitle nonote noobs label ///
>         drop("Total")
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/us-states-legality.tex)

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3b_summarize_census_income_data.do"

. ************
. * SCRIPT: 3b_summarize_census_income_data.do
. * PURPOSE: summarizes the census income dataset
. ************
. 
. use "$MyProject/processed/census_income.dta", clear

. 
. * Generate mean/count by year & legal status
. forvalues y = 2011/2020 {
  2.         forvalues s = 0/1 {
  3.                 egen total_inc_retail_`s'_`y' = sum(total_inc_`y') if retail_legal==`s'
  4.                 egen total_hh_retail_`s'_`y' = sum(num_hh_`y') if retail_legal==`s'
  5.                 gen mean_inc_retail_`s'_`y' = total_inc_retail_`s'_`y' / total_hh_retail_`s'_`y'
  6.                 egen med_inc_retail_`s'_`y' = median(est_hh_med_inc_`y') if retail_legal==`s'
  7.         }
  8.         egen total_inc_retail_`y' = sum(total_inc_`y')
  9.         egen total_hh_retail_`y' = sum(num_hh_`y')
 10.         gen mean_inc_retail_`y' = total_inc_retail_`y' / total_hh_retail_`y'
 11.         egen med_inc_retail_`y' = median(est_hh_med_inc_`y')
 12. }
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)

. collapse mean_inc_* med_inc_* total_hh_*

. 
. * Transpose so that years are rows
. xpose, clear

. gen year = 2011 + int((_n-1)/3) if _n <= 30
(60 missing values generated)

. gen retail_legal = mod((_n-1), 3)

. 
. gen mean_inc = v1 if _n <= 30
(60 missing values generated)

. gen med_inc = v1[_n+30] if _n <= 30
(60 missing values generated)

. gen total_hh = v1[_n+60] if _n <= 30
(60 missing values generated)

. 
. drop v1

. drop if _n > 30
(60 observations deleted)

. collapse mean_inc med_inc total_hh, by(year retail_legal)

. 
. * Create table of summary statistics
. est clear

. 
. estpost tabstat mean_inc med_inc total_hh if retail_legal==0, by(year) nototal

Summary statistics: mean
     for variables: mean_inc med_inc total_hh
  by categories of: year

        year | e(mean_~)  e(med_i~)  e(total~) 
-------------+---------------------------------
        2011 |  106567.9      89234     716804 
        2012 |  108059.8    90498.5     719726 
        2013 |    109529    87825.5     721233 
        2014 |  111622.1    90204.5     727001 
        2015 |  113055.2      91087     729917 
        2016 |  116250.4      93357     732010 
        2017 |    121650      96781     739903 
        2018 |    126772   101189.5     745839 
        2019 |  131803.5     101826     748453 
        2020 |  137996.6     107297     753761 

. est store a

. estpost tabstat mean_inc med_inc total_hh if retail_legal==1, by(year) nototal

Summary statistics: mean
     for variables: mean_inc med_inc total_hh
  by categories of: year

        year | e(mean_~)  e(med_i~)  e(total~) 
-------------+---------------------------------
        2011 |   79756.4      66933    1370419 
        2012 |  81003.65      67297    1371070 
        2013 |   81712.2      67722    1371868 
        2014 |  83684.58      68373    1374061 
        2015 |   84878.7      70507    1376055 
        2016 |  87879.16    71037.5    1381010 
        2017 |  92072.47      74137    1394034 
        2018 |  96490.43      76648    1401920 
        2019 |  100707.2    79660.5    1408987 
        2020 |  104379.4      82755    1427034 

. est store b

. estpost tabstat mean_inc med_inc total_hh if retail_legal==2, by(year) nototal

Summary statistics: mean
     for variables: mean_inc med_inc total_hh
  by categories of: year

        year | e(mean_~)  e(med_i~)  e(total~) 
-------------+---------------------------------
        2011 |  88964.13      73919    2087223 
        2012 |  90317.34    73864.5    2090796 
        2013 |  91297.23      73097    2093101 
        2014 |  93351.41      75310    2101062 
        2015 |  94644.49      76025    2105972 
        2016 |  97707.76      77710    2113020 
        2017 |  102327.9    80706.5    2133937 
        2018 |  107006.1    83493.5    2147759 
        2019 |  111495.1      86570    2157440 
        2020 |  115998.7      91696    2180795 

. est store c

. 
. esttab a b c using "$MyProject/results/tables/census-income-data.tex", replace ///
>         cells("mean_inc(fmt(%9.1fc)) med_inc(fmt(%8.1fc)) total_hh(fmt(%10.0fc))") ///
>         mtitles("\textbf{\underline{Cannabis Retail Illegal}}" "\textbf{\underline{Cannabis Retail Legal}}" "\textbf{\underline{Total}}") ///
>         collabels("Mean" "Median" "Obs." "Mean" "Median" "Obs." "Mean" "Median" "Obs.") ///
>         label nonumber noobs booktabs compress
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/census-income-data.tex)

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3c_summarize_census_race_sex_data.do"

. ************
. * SCRIPT: 3c_summarize_census_race_sex_data.do
. * PURPOSE: summarizes the census race by sex dataset
. ************
. 
. use "$MyProject/processed/census_age_sex.dta", clear

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3d_summarize_dispensaries_data.do"

. ************
. * SCRIPT: 3d_summarize_dispensaries_data.do
. * PURPOSE: summarizes the dispensaries dataset
. ************
. 
. use "$MyProject/processed/dispensaries.dta", clear

. 
. * Generate month/year variable
. gen month_str = cond(commence_month <= 4, "Jan-Apr", cond(commence_month <= 8, "May-Aug", "Sep-Dec"))

. egen month_year_str = concat(month_str commence_year), punct(" ")

. 
. * Generate .csv to use in Tableau
. outsheet using "$MyProject/processed/dispensaries_ma.csv", comma replace

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3e_summarize_ma_zoning_data.do"

. ************
. * SCRIPT: 3e_summarize_ma_zoning_data.do
. * PURPOSE: summarizes the massachusetts zoning dataset
. ************
. 
. use "$MyProject/processed/ma_zoning_laws.dta", clear

. 
. * Rename Manchester-by-the-Sea to match spatial data
. replace city = "Manchester" if city=="Manchester-by-the-Sea"
(1 real change made)

. 
. * Make city names all caps to match spatial data
. replace city = upper(city)
(328 real changes made)

. 
. * Generate .csv to use in Tableau
. keep city retail_legal adult_use_legal delivery_legal 

. outsheet using "$MyProject/processed/ma_zoning_laws.csv", comma replace

. 
. expand 3
(656 observations created)

. sort city

. gen type_legal = mod(_n, 3)

. gen legal = adult_use_legal if type_legal == 0
(656 missing values generated)

. replace legal = retail_legal if type_legal == 1
(328 real changes made)

. replace legal = delivery_legal if type_legal == 2
(328 real changes made)

. gen illegal = 1 - legal

. count
  984

. gen unknown = 3 * (23 / r(N))

. gen t = 1

. 
. * Generate summary statistics table
. est clear

. estpost tabstat legal illegal unknown t, by(type_legal) stat(sum)

Summary statistics: sum
     for variables: legal illegal unknown t
  by categories of: type_legal

  type_legal |  e(legal)  e(illeg~)  e(unkno~)       e(t) 
-------------+--------------------------------------------
           0 |       209        119         23        328 
           1 |       198        130         23        328 
           2 |       192        136         23        328 
-------------+--------------------------------------------
       Total |       599        385         69        984 

. esttab using "$MyProject/results/tables/ma-zoning-data.tex", replace ///
>         cells("legal illegal unknown t") ///
>         collabels("Legal" "Illegal" "Unknown" "Total") ///
>         coeflabel(0 "Adult use" 1 "Retail" 2 "Delivery") ///
>         nonumber nomtitle nonote noobs label ///
>         drop("Total")
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/ma-zoning-data.tex)

.         
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3f_summarize_prop_assessments_data.do"

. ************
. * SCRIPT: 3f_summarize_prop_assessments_data.do
. * PURPOSE: summarizes the property assessments dataset
. ************
. 
. use "$MyProject/processed/property_assessments_ma.dta", clear

. 
. * Assign labels describing types of properties
. gen lu_int = 0

. replace lu_int = 1 if lu == "CD"
(64,354 real changes made)

. replace lu_int = 2 if lu == "E"
(1,410 real changes made)

. replace lu_int = 3 if lu == "R"
(494,676 real changes made)

. 
. label define origin 0 "Apartment/dorm" 1 "Condominium" 2 "Essential" 3 "Residential"

. label values lu_int origin

. label variable lu_int "Type"

.                         
. * Make a table summarizing by property type
. est clear

. eststo clear

. 
. estpost tabstat av_bldg ppsqft living_area num_floors, by(lu_int) stat(mean sd count) col(stat)

Summary statistics: mean sd count
     for variables: av_bldg ppsqft living_area num_floors
  by categories of: lu_int

      lu_int |   e(mean)      e(sd)   e(count) 
-------------+---------------------------------
Apartment/~m |                                 
     av_bldg |  202706.7   202225.1       1114 
      ppsqft |  61.31684   51.80815       1114 
 living_area |  3316.573   1142.826       1114 
  num_floors |  2.688061   .4864297       1114 
-------------+---------------------------------
Condominium  |                                 
     av_bldg |    782549   851343.6      64354 
      ppsqft |  699.5828   331.7674      64354 
 living_area |  1084.426   581.9959      64354 
  num_floors |  1.285499   .8187775      64354 
-------------+---------------------------------
Essential    |                                 
     av_bldg |  439434.7   287248.8       1410 
      ppsqft |  175.7912   97.38514       1410 
 living_area |  2808.606   1366.785       1410 
  num_floors |   2.10922   .6744238       1410 
-------------+---------------------------------
Residential  |                                 
     av_bldg |  401870.6     396935     494676 
      ppsqft |  172.0178   100.4055     494676 
 living_area |  2406.054    1035.18     494676 
  num_floors |  2.180224   .6169918     494676 
-------------+---------------------------------
Total        |                                 
     av_bldg |  445195.5   486778.2     561554 
      ppsqft |  232.2666   223.1905     561554 
 living_area |  2257.412   1081.757     561554 
  num_floors |  2.078518   .7040595     561554 

. 
. esttab using "$MyProject/results/tables/property-types.tex", replace ///
>         cells("mean(fmt(%9.1fc)) sd(fmt(%9.1fc)) count(fmt(%9.0fc))") ///
>         collabels("Mean" "SD" "Obs") ///
>         coeflabel(av_bldg "Assessed value" ppsqft "Price per square foot" living_area "Living area" num_floors "Number of floors") ///
>         label nonumber noobs booktabs compress
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/property-types.tex)

. 
. 
. * Add zipcode data
. merge m:1 zipcode using "$MyProject/processed/zip_code_centroids.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                           543
        from master                         0  (_merge==1)
        from using                        543  (_merge==2)

    Matched                           561,554  (_merge==3)
    -----------------------------------------

. drop if _merge!=3
(543 observations deleted)

. drop _merge

. 
. * Only considering property values before any dispensaries
. drop if year_assessed >= 2019
(249,521 observations deleted)

. 
. * Divide properties into "close" vs. "not close"
. gen close = min_dist_disp < 1

. sort close

. 
. * Generate table of summary statistics
. est clear

. eststo clear

. 
. estpost su av_bldg living_area ppsqft num_floors r_bdrms if close==1

             |  e(count)   e(sum_w)    e(mean)     e(Var)      e(sd)     e(min)     e(max)     e(sum) 
-------------+----------------------------------------------------------------------------------------
     av_bldg |    122789     122789   409057.2   2.50e+11   499836.7      19000   1.91e+07   5.02e+10 
 living_area |    122789     122789   2761.979    1193977   1092.693        400      22159   3.39e+08 
      ppsqft |    122789     122789   150.8658   12728.61   112.8212   20.03968   1517.647   1.85e+07 
  num_floors |    122789     122789   2.454145   .3446246   .5870473          1          6     301342 
     r_bdrms |    122789     122789   5.218733   4.598896   2.144504          1         18     640803 

. est store a

. estpost su av_bldg living_area ppsqft num_floors r_bdrms if close==0

             |  e(count)   e(sum_w)    e(mean)     e(Var)      e(sd)     e(min)     e(max)     e(sum) 
-------------+----------------------------------------------------------------------------------------
     av_bldg |    189244     189244   306731.4   4.02e+10   200534.3      23700    4316000   5.80e+10 
 living_area |    189244     189244   2172.998   850645.6   922.3045        300       9161   4.11e+08 
      ppsqft |    189244     189244   148.4111   4760.035   68.99301   20.09764       1671   2.81e+07 
  num_floors |    189244     189244   2.002719   .3235964   .5688553          1          5   379002.5 
     r_bdrms |    189244     189244   4.257651   2.982441   1.726975          1         16     805735 

. est store b

. 
. esttab a b using "$MyProject/results/tables/property-assessments.tex", replace ///
>         cells("mean(fmt(2)) sd(fmt(2)) count(fmt(0))") ///
>         mtitles("\textbf{\underline{Properties within 1 mi.}}" "\textbf{\underline{Properties outside 1 mi.}}") ///
>         collabels("Mean" "SD" "Obs") ///
>         coeflabel(av_bldg "Assessed Value (\\$)" living_area "Living Area (sq.ft.)" ppsqft "Price per Square Foot" num_floors "Number of Floors" r_bdrms "Number of Bedrooms") //
> /
>         label nonumber noobs booktabs compress
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/property-assessments.tex)

. 
. * Generate .csv to use in Tableau
. collapse close av_bldg ppsqft living_area num_floors r_bdrms, by(zipcode)

. outsheet using "$MyProject/processed/zipcode_dists.csv", comma replace

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3g_summarize_ma_home_values_data.do"

. ************
. * SCRIPT: 3g_summarize_ma_home_values_data.do
. * PURPOSE: summarizes the zillow home values dataset for zipcodes in massachusetts
. ************
. 
. use "$MyProject/processed/zillow_home_values_ma.dta", clear

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3h_summarize_us_home_values_data.do"

. ************
. * SCRIPT: 3h_summarize_us_home_values_data.do
. * PURPOSE: summarizes the zillow home values dataset for all us zipcodes
. ************
. 
. use "$MyProject/processed/zillow_home_values_us.dta", clear

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3i_summarize_boston_crash_data.do"

. ************
. * SCRIPT: 3i_summarize_boston_crash_data.do
. * PURPOSE: summarizes the boston crash dataset
. ************
. 
. use "$MyProject/processed/crashes_boston.dta", clear

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3j_summarize_us_crash_data.do"

. ************
. * SCRIPT: 3j_summarize_us_crash_data.do
. * PURPOSE: summarizes the us crash dataset
. ************
. 
. use "$MyProject/processed/crashes_us.dta", clear

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3k_summarize_boston_crime_data.do"

. ************
. * SCRIPT: 3k_summarize_boston_crime_data.do
. * PURPOSE: summarizes the boston crime dataset
. ************
. 
. * (1) Plot occurrences of crime by year
. use "$MyProject/processed/crime_boston_zipcodes.dta", clear

. drop if year == 2015 | year == 2022
(68,040 observations deleted)

. 
. collapse (sum) crimes_against_property crimes_against_persons crimes_against_society, by(year)

. 
. gen num_days = 365

. replace num_days = 366 if year == 2016 | year == 2020
(2 real changes made)

. 
. replace crimes_against_property = crimes_against_property / num_days
(6 real changes made)

. replace crimes_against_persons = crimes_against_persons / num_days
(6 real changes made)

. replace crimes_against_society = crimes_against_society / num_days
(6 real changes made)

. 
. set graphics on

. 
. graph twoway (lfit crimes_against_property year, lpattern(dash) lcolor(edkblue%50)) (scatter crimes_against_property year, color(edkblue)) ///
>         (lfit crimes_against_society year, lpattern(dash) lcolor(emidblue%50)) (scatter crimes_against_society year, color(emidblue)) ///
>         (lfit crimes_against_persons year, lpattern(dash) lcolor(eltblue%50)) (scatter crimes_against_persons year, color(eltblue)), ///
>         xtitle("Year") ///
>         xlabel(2016(1)2021) ///
>         ytitle("Avg. number of crimes per day") ///
>         ylabel(, angle(0)) ///
>         legend(order(1 "fitted" 2 "Crimes against property" 3 "fitted" 4 "Crimes against persons" 5 "fitted" 6 "Crimes against society") rows(3))

.         
. graph export "$MyProject/results/figures/boston-crime-by-year.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/boston-crime-by-year.png saved as PNG format

. 
. * (2) Plot occurrences of crime by day of the week
. use "$MyProject/processed/crime_boston_zipcodes.dta", clear

. drop if year == 2015 | year == 2022
(68,040 observations deleted)

. 
. collapse (sum) crimes_against_property crimes_against_persons crimes_against_society, by(day_of_week)

. 
. gen num_days = 313

. replace num_days = 314 if day_of_week == 5 // fridays
(1 real change made)

. 
. replace crimes_against_persons = crimes_against_persons / num_days
(7 real changes made)

. replace crimes_against_property = crimes_against_property / num_days
(7 real changes made)

. replace crimes_against_society = crimes_against_society / num_days
(7 real changes made)

. 
. egen mean_c_persons = mean(crimes_against_persons)

. egen mean_c_property = mean(crimes_against_property)

. egen mean_c_society = mean(crimes_against_society)

. 
. graph twoway ///
>         (line mean_c_property day_of_week, lpattern(dash) lcolor(edkblue%50)) (scatter crimes_against_property day_of_week, color(edkblue)) ///
>         (lfit mean_c_society day_of_week, lpattern(dash) lcolor(emidblue%50)) (scatter crimes_against_society day_of_week, color(emidblue)) ///
>         (lfit mean_c_persons day_of_week, lpattern(dash) lcolor(eltblue%50)) (scatter crimes_against_persons day_of_week, color(eltblue)), ///
>         xtitle("Day of the Week") ///
>         ytitle("Avg. number of crimes per day") ///
>         xlabel(0 "Sun" 1 "Mon" 2 "Tue" 3 "Wed" 4 "Thu" 5 "Fri" 6 "Sat") ///
>         legend(order(1 "avg." 2 "Crimes against property" 3 "avg." 4 "Crimes against society" 5 "avg." 6 "Crimes against persons") rows(3))

.         
. graph export "$MyProject/results/figures/boston-crime-by-day-of-week.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/boston-crime-by-day-of-week.png saved as PNG format

. 
. * (3) Plot occurrences of crime by month
. use "$MyProject/processed/crime_boston_zipcodes.dta", clear

. drop if year == 2015 | year == 2022
(68,040 observations deleted)

. 
. collapse (sum) crimes_against_property crimes_against_persons crimes_against_society, by(month)

. 
. gen num_days = 186 // 31 * 6

. replace num_days = 180 if month == 4 | month == 6 | month == 9 | month == 11 // 30 * 6
(4 real changes made)

. replace num_days = 170 if month == 2 // (28 * 4) + (29 * 2)
(1 real change made)

. 
. replace crimes_against_property = crimes_against_property / num_days
(12 real changes made)

. replace crimes_against_persons = crimes_against_persons / num_days
(12 real changes made)

. replace crimes_against_society = crimes_against_society / num_days
(12 real changes made)

. 
. egen mean_c_persons = mean(crimes_against_persons)

. egen mean_c_property = mean(crimes_against_property)

. egen mean_c_society = mean(crimes_against_society)

. 
. graph twoway (lfit mean_c_property month, lpattern(dash) lcolor(edkblue%50)) (scatter crimes_against_property month, color(edkblue)) ///
>         (lfit mean_c_society month, lpattern(dash) lcolor(emidblue%50)) (scatter crimes_against_society month, color(emidblue)) ///
>         (lfit mean_c_persons month, lpattern(dash) lcolor(eltblue%50)) (scatter crimes_against_persons month, color(eltblue)), ///
>         xtitle("Month") ///
>         xlabel(1 "Jan" 2 "Feb" 3 "Mar" 4 "Apr" 5 "May" 6 "Jun" 7 "Jul" 8 "Aug" 9 "Sep" 10 "Oct" 11 "Nov" 12 "Dec") ///
>         ytitle("Avg. number of crimes per day") ///
>         ylabel(, angle(0)) ///
>         legend(order(1 "avg." 2 "Crimes against property" 3 "avg." 4 "Crimes against persons" 5 "avg." 6 "Crimes against society") rows(3))

.         
. graph export "$MyProject/results/figures/boston-crime-by-month.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/boston-crime-by-month.png saved as PNG format

. 
. * (4) Plot occurrences of crime by time of day
. use "$MyProject/processed/crime_boston_zipcodes.dta", clear

. drop if year == 2015 | year == 2022
(68,040 observations deleted)

. 
. collapse (sum) crimes_against_property crimes_against_persons crimes_against_society, by(hour)

. 
. replace crimes_against_property = crimes_against_property / 2192
(24 real changes made)

. replace crimes_against_persons = crimes_against_persons / 2192
(24 real changes made)

. replace crimes_against_society = crimes_against_society / 2192
(24 real changes made)

. 
. egen mean_c_persons = mean(crimes_against_persons)

. egen mean_c_property = mean(crimes_against_property)

. egen mean_c_society = mean(crimes_against_society)

. 
. graph twoway (lfit mean_c_property hour, lpattern(dash) lcolor(edkblue%50)) (scatter crimes_against_property hour, color(edkblue)) ///
>         (lfit mean_c_society hour, lpattern(dash) lcolor(emidblue%50)) (scatter crimes_against_society hour, color(emidblue)) ///
>         (lfit mean_c_persons hour, lpattern(dash) lcolor(eltblue%50)) (scatter crimes_against_persons hour, color(eltblue)), ///
>         xtitle("Time") ///
>         xlabel(0 "12 AM" 3 "3 AM" 6 "6 AM" 9 "9 AM" 12 "12 PM" 15 "3 PM" 18 "6 PM" 21 "9 PM") ///
>         ytitle("Avg. number of crimes per hour") ///
>         ylabel(, angle(0)) ///
>         legend(order(1 "avg." 2 "Crimes against property" 3 "avg." 4 "Crimes against persons" 5 "avg." 6 "Crimes against society") rows(3))

.         
. graph export "$MyProject/results/figures/boston-crime-by-hour.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/boston-crime-by-hour.png saved as PNG format

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/3l_summarize_us_crime_data.do"

. ************
. * SCRIPT: 3k_summarize_us_crime_data.do
. * PURPOSE: summarizes the us crime dataset
. ************
. 
. use "$MyProject/processed/crime_us.dta", clear

. 
. ** EOF
. 
end of do-file

. 
. do "$MyProject/scripts/4a_test_demographic_balance_boston.do"

. ************
. * SCRIPT: 4a_test_demographic_balance_boston.do
. * PURPOSE: runs a 2-sample t-test to check that the demographics in treatment/control groups are similar
. ************
. 
. * Format property dataset
. use "$MyProject/processed/property_assessments_ma.dta", clear

. 
. sort zipcode

. merge m:1 zipcode using "$MyProject/processed/zip_code_centroids.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                           543
        from master                         0  (_merge==1)
        from using                        543  (_merge==2)

    Matched                           561,554  (_merge==3)
    -----------------------------------------

. keep if _merge==3
(543 observations deleted)

. drop _merge

. 
. * Divide properties into "close" vs. "not close"
. gen close = min_dist_disp < 1

. sort close

. 
. * Run t-test
. global controls av_bldg ppsqft living_area num_floors r_bdrms

. 
. est clear

. estpost ttest $controls , by(close)

             |      e(b)   e(count)      e(se)       e(t)    e(df_t)     e(p_l)       e(p)     e(p_u)     e(N_1)    e(mu_1)     e(N_2)    e(mu_2) 
-------------+------------------------------------------------------------------------------------------------------------------------------------
     av_bldg | -181231.4     561554   1294.088  -140.0457     561552          0          0          1     326176   369231.5     235378   550462.9 
      ppsqft | -77.53012     561554   .5946863  -130.3714     561552          0          0          1     326176   199.7694     235378   277.2996 
 living_area |  -391.328     561554    2.87863  -135.9425     561552          0          0          1     326176   2093.385     235378   2484.713 
  num_floors | -.3005425     561554   .0018614  -161.4593     561552          0          0          1     326176   1.952544     235378   2.253087 
     r_bdrms | -.5676981     561554    .005559  -102.1228     561552          0          0          1     326176   4.094271     235378   4.661969 

. 
. esttab using "$MyProject/results/tables/ttest-properties.tex", replace ///
>         cells("mu_1 mu_2 b se count") ///
>         collabels("Treated" "Untreated" "Diff." "S.E." "Obs." ) ///
>         coeflabel(av_bldg "Building value" ppsqft "Price per square foot" living_area "Living area" num_floors "Number of floors" r_bdrms "Number of bedrooms") ///
>         label booktabs nonum compress
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/ttest-properties.tex)

.         
. ** TODO ^
. 
. * EOF
. 
end of do-file

. do "$MyProject/scripts/4b_test_demographic_balance_ma.do"

. ************
. * SCRIPT: 4b_test_demographic_balance_ma.do
. * PURPOSE: runs a 2-sample t-test to check that the demographics in treatment/control groups are similar
. ************
. 
. 
. 
. * EOF
. 
end of do-file

. do "$MyProject/scripts/4c_test_demographic_balance_us.do"

. ************
. * SCRIPT: 4c_test_demographic_balance_us.do
. * PURPOSE: runs a 2-sample t-test to check that the demographics in treatment/control groups are similar
. ************
. 
. 
. 
. * EOF
. 
end of do-file

. 
. do "$MyProject/scripts/5a_test_parallel_trends_income.do"

. ************
. * SCRIPT: 5a_test_parallel_trends_income.do
. * PURPOSE: plots income to test for parallel trends
. ************
. 
. use "$MyProject/processed/census_income.dta", clear

. 
. * Generate mean/count by year & legal status
. forvalues y = 2011/2020 {
  2.         foreach t in "delivery" "retail" "adult_use" {
  3.                 forvalues s = 0/1 {
  4.                         egen total_inc_`t'_`s'_`y' = sum(total_inc_`y') if `t'_legal==`s'
  5.                         egen total_hh_`t'_`s'_`y' = sum(num_hh_`y') if `t'_legal==`s'
  6.                         gen mean_inc_`t'_`s'_`y' = total_inc_`t'_`s'_`y' / total_hh_`t'_`s'_`y'
  7.                 }
  8.         }
  9. }
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)
(233 missing values generated)
(233 missing values generated)
(233 missing values generated)
(127 missing values generated)
(127 missing values generated)
(127 missing values generated)
(238 missing values generated)
(238 missing values generated)
(238 missing values generated)
(122 missing values generated)
(122 missing values generated)
(122 missing values generated)
(248 missing values generated)
(248 missing values generated)
(248 missing values generated)
(112 missing values generated)
(112 missing values generated)
(112 missing values generated)

. 
. * Transpose so that years are rows
. collapse mean_inc_* total_hh_*

. xpose, clear

. gen year = 2011 + int((_n-1)/6) if _n <= 60
(60 missing values generated)

. local i = 1

. foreach t in "delivery" "retail" "adult_use" {
  2.         forvalues s = 0/1 {
  3.                 gen mean_inc_`t'_`s' = v1 if mod(_n, 6)==`i' & _n <= 60
  4.                 gen total_hh_`t'_`s' = v1[_n+60] if mod(_n, 6)==`i' & _n <= 60
  5.                 local i = mod(`i'+1, 6)
  6.         }
  7. }
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)
(110 missing values generated)

. drop v1

. drop if _n > 60
(60 observations deleted)

. collapse mean_inc_* total_hh_*, by(year)

. 
. set graphics off

. 
. * Plot means over time
. twoway line mean_inc_delivery_0 year || line mean_inc_delivery_1 year, saving(delivery_means, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Avg. household income ($)") ///
>         ylabel(80000 "80,000" 100000 "100,000" 120000 "120,000" 140000 "140,000", angle(0)) ///
>         legend(label(1 "Cannabis delivery is illegal") label(2 "Cannabis delivery is legal") rows(2)) ///
>         title("By legal status of cannabis delivery")
file delivery_means.gph saved

.         
. twoway line mean_inc_retail_0 year || line mean_inc_retail_1 year, saving(retail_means, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Avg. household income ($)") ///
>         ylabel(80000 "80,000" 100000 "100,000" 120000 "120,000" 140000 "140,000", angle(0)) ///
>         legend(label(1 "Retail of cannabis products is illegal") label(2 "Retail of cannabis products is legal") rows(2)) ///
>         title("By legal status of retail of cannabis products")
file retail_means.gph saved

.         
. twoway line mean_inc_adult_use_0 year || line mean_inc_adult_use_1 year, saving(adult_use_means, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Avg. household income ($)") ///
>         ylabel(80000 "80,000" 100000 "100,000" 120000 "120,000" 140000 "140,000", angle(0)) ///
>         legend(label(1 "Cannabis use is illegal") label(2 "Cannabis use is legal") rows(2)) ///
>         title("By legal status of cannabis use")
file adult_use_means.gph saved

. 
. 
. * Create variables for the difference between means
. gen diff_delivery = mean_inc_delivery_0 - mean_inc_delivery_1

. gen diff_retail = mean_inc_retail_0 - mean_inc_retail_1

. gen diff_adult_use = mean_inc_adult_use_0 - mean_inc_adult_use_1

. 
. * Graph differences in means over time
. twoway scatter diff_delivery year || lfit diff_delivery year, saving(delivery_diffs, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Diff. in avg. household income ($)") ///
>         ylabel(26000 "26,000" 30000 "30,000" 34000 "34,000", angle(0)) ///
>         legend(label(1 "Difference in avg. household income by delivery legal status") label(2 "Fitted values, linear") size(small) rows(2)) ///
> 
file delivery_diffs.gph saved

. twoway scatter diff_retail year || lfit diff_retail year, saving(retail_diffs, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Diff. in avg. household income ($)") ///
>         ylabel(26000 "26,000" 30000 "30,000" 34000 "34,000", angle(0)) ///
>         legend(label(1 "Difference in avg. household income by retail legal status") label(2 "Fitted values, linear") size(small) rows(2)) ///
>         
file retail_diffs.gph saved

. twoway scatter diff_adult_use year || lfit diff_adult_use year, saving(adult_use_diffs, replace) ///
>         xtitle("Year") ///
>         xlabel(2011(3)2020) ///
>         ytitle("Diff. in avg. household income ($)") ///
>         ylabel(26000 "26,000" 30000 "30,000" 34000 "34,000", angle(0)) ///
>         legend(label(1 "Difference in avg. household income by adult use legal status") label(2 "Fitted values, linear") size(small) rows(2)) ///
> 
file adult_use_diffs.gph saved

. set graphics on

.         
. * Combine graph of means + graph of diffs
. gr combine delivery_means.gph retail_means.gph adult_use_means.gph delivery_diffs.gph retail_diffs.gph adult_use_diffs.gph, ///
>         xsize(10) ///
>         title("Average household income in MA cities by town's legal status of cannabis, 2011-2020")

. 
. graph export "$MyProject/results/figures/ma-census-income.pdf", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/ma-census-income.pdf saved as PDF format

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/5b_test_parallel_trends_property_assessments.do"

. ************
. * SCRIPT: 5a_test_parallel_trends_property_assessments.do
. * PURPOSE: plots assessed property values to test for parallel trends
. ************
. 
. * Format property dataset
. use "$MyProject/processed/property_assessments_ma.dta", clear

. 
. sort zipcode

. merge m:1 zipcode using "$MyProject/processed/zip_code_centroids.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                           543
        from master                         0  (_merge==1)
        from using                        543  (_merge==2)

    Matched                           561,554  (_merge==3)
    -----------------------------------------

. keep if _merge==3
(543 observations deleted)

. drop _merge

. 
. * Create set of treatment variables treat_j_d for j = -5 to 2, d = 1 to 5
. * treat_j_d = 1 if a dispensary opens between d-1 and d miles away at time t-j
. * treat_d   = 1 if a dispensary opens between d-1 and d miles away at any time
. 
. forvalues d = 1/5 {
  2.         gen treat_d`d' = 0
  3.         forvalues j = -5/2 {
  4.                 local abs_j = cond(`j' < 0, -`j', `j')
  5.                 local j_str = cond(`j' == 0, "0", cond(`j' < 0, "m`abs_j'", "p`j'"))
  6.                 gen treat_j`j_str'_d`d' = 0
  7.                 
.                 forvalues y = 2019/2022 {
  8.                         replace treat_j`j_str'_d`d' = 1 if year_assessed - `j' == `y' & min_dist_`y' < `d' & min_dist_`y' >= `d'-1
  9.                 }
 10.                 
.                 replace treat_d`d' = treat_d`d' + treat_j`j_str'_d`d'
 11.         }
 12.         replace treat_d`d' = cond(treat_d`d' > 0, 1, 0)
 13. }
(13 real changes made)
(10,330 real changes made)
(17,912 real changes made)
(24,543 real changes made)
(52,798 real changes made)
(13 real changes made)
(10,319 real changes made)
(17,878 real changes made)
(24,476 real changes made)
(52,686 real changes made)
(13 real changes made)
(10,312 real changes made)
(17,837 real changes made)
(24,411 real changes made)
(52,573 real changes made)
(13 real changes made)
(10,294 real changes made)
(17,796 real changes made)
(23,948 real changes made)
(52,051 real changes made)
(12 real changes made)
(10,275 real changes made)
(17,432 real changes made)
(64,230 real changes made)
(91,949 real changes made)
(13 real changes made)
(10,035 real changes made)
(54,168 real changes made)
(0 real changes made)
(64,216 real changes made)
(13 real changes made)
(16,050 real changes made)
(0 real changes made)
(0 real changes made)
(16,063 real changes made)
(16 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(16 real changes made)
(135,443 real changes made)
(8,368 real changes made)
(24,315 real changes made)
(21,282 real changes made)
(14,580 real changes made)
(68,545 real changes made)
(8,405 real changes made)
(24,265 real changes made)
(21,245 real changes made)
(14,547 real changes made)
(68,462 real changes made)
(8,376 real changes made)
(24,229 real changes made)
(21,186 real changes made)
(14,520 real changes made)
(68,311 real changes made)
(8,346 real changes made)
(24,194 real changes made)
(21,135 real changes made)
(14,319 real changes made)
(67,994 real changes made)
(8,315 real changes made)
(24,159 real changes made)
(20,835 real changes made)
(33,715 real changes made)
(87,024 real changes made)
(8,314 real changes made)
(23,791 real changes made)
(43,777 real changes made)
(0 real changes made)
(75,882 real changes made)
(8,105 real changes made)
(56,431 real changes made)
(0 real changes made)
(0 real changes made)
(64,536 real changes made)
(21,780 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(21,780 real changes made)
(189,322 real changes made)
(7,125 real changes made)
(8,176 real changes made)
(9,100 real changes made)
(9,075 real changes made)
(33,476 real changes made)
(7,162 real changes made)
(8,143 real changes made)
(9,075 real changes made)
(9,056 real changes made)
(33,436 real changes made)
(7,165 real changes made)
(8,116 real changes made)
(9,056 real changes made)
(9,043 real changes made)
(33,380 real changes made)
(7,161 real changes made)
(8,073 real changes made)
(9,043 real changes made)
(8,971 real changes made)
(33,248 real changes made)
(7,163 real changes made)
(8,036 real changes made)
(8,971 real changes made)
(12,054 real changes made)
(36,224 real changes made)
(7,170 real changes made)
(7,964 real changes made)
(12,054 real changes made)
(0 real changes made)
(27,188 real changes made)
(7,020 real changes made)
(30,144 real changes made)
(0 real changes made)
(0 real changes made)
(37,164 real changes made)
(25,163 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(25,163 real changes made)
(69,182 real changes made)
(23,375 real changes made)
(5,594 real changes made)
(7,543 real changes made)
(7,549 real changes made)
(44,061 real changes made)
(23,435 real changes made)
(5,568 real changes made)
(7,549 real changes made)
(7,547 real changes made)
(44,099 real changes made)
(23,358 real changes made)
(5,542 real changes made)
(7,547 real changes made)
(7,542 real changes made)
(43,989 real changes made)
(23,301 real changes made)
(5,519 real changes made)
(7,542 real changes made)
(7,506 real changes made)
(43,868 real changes made)
(23,218 real changes made)
(5,505 real changes made)
(7,506 real changes made)
(8,783 real changes made)
(45,012 real changes made)
(23,165 real changes made)
(5,449 real changes made)
(8,783 real changes made)
(0 real changes made)
(37,397 real changes made)
(22,873 real changes made)
(7,374 real changes made)
(0 real changes made)
(0 real changes made)
(30,247 real changes made)
(47,632 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(47,632 real changes made)
(79,473 real changes made)
(12,629 real changes made)
(14,222 real changes made)
(6,575 real changes made)
(6,587 real changes made)
(40,013 real changes made)
(12,644 real changes made)
(14,117 real changes made)
(6,587 real changes made)
(6,593 real changes made)
(39,941 real changes made)
(12,553 real changes made)
(14,135 real changes made)
(6,593 real changes made)
(6,591 real changes made)
(39,872 real changes made)
(12,561 real changes made)
(14,139 real changes made)
(6,591 real changes made)
(6,550 real changes made)
(39,841 real changes made)
(12,562 real changes made)
(14,132 real changes made)
(6,550 real changes made)
(7,325 real changes made)
(40,569 real changes made)
(12,550 real changes made)
(14,055 real changes made)
(7,325 real changes made)
(0 real changes made)
(33,930 real changes made)
(12,487 real changes made)
(16,108 real changes made)
(0 real changes made)
(0 real changes made)
(28,595 real changes made)
(17,630 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(17,630 real changes made)
(94,317 real changes made)

. 
. save "$MyProject/processed/dispensaries_on_property_assessments.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_property_assessments.dta saved

. 
. * EOF
. 
end of do-file

. do "$MyProject/scripts/5c_test_parallel_trends_home_values.do"

. ************
. * SCRIPT: 5b_test_parallel_trends_home_values.do
. * PURPOSE: plots assessed property values to test for parallel trends
. ************
. 
. use "$MyProject/processed/zillow_home_values_ma.dta", clear

. 
. * Plot means by legal status
. collapse hv*, by(adult_use_legal)

. 
. xpose, clear

. drop if _n==1
(1 observation deleted)

. 
. rename v1 illegal

. rename v2 legal

. gen diff = illegal - legal

. 
. gen year = 2000 + int((_n-1)/12)

. 
. gen month = mod(_n, 12)

. replace month = 12 if month==0 
(22 real changes made)

. tostring month, replace
month was float now str2

. replace month = "0" + month if real(month) < 10
(199 real changes made)

. 
. egen date_str = concat(year month), punct("-")

. gen date = date(date_str, "YM")

. format date %td

. 
. gen n = _n

. 
. twoway line illegal n, xaxis(1 2) || line legal n || line diff n || lfit diff n, lp(dash) lc(black), ||, ///
>         xline(227) ///
>         xtitle("Year", axis(1)) ///
>         xtitle("", axis(2)) ///
>         xlabel(227 "Nov. 2018", axis(2)) ///
>         xlabel(1 "2000" 61 "2005" 121 "2010" 181 "2015" 241 "2020" 265 "2022", axis(1)) ///
>         ytitle("Average Home Value ($)") ///
>         ylabel(0 "0" 100000 "100,000" 200000 "200,000" 300000 "300,000" 400000 "400,000" 500000 "500,000" 600000 "600,000" 700000 "700,000", angle(0)) ///
>         legend(label(1 "Avg. home value, cities where cannabis is illegal") label(2 "Avg. home value, cities where cannabis is legal") label(3 "Difference") label(4 "Fitted Valu
> es") rows(4)) ///
>         title("Average Home Value in MA cities, 2000-2022")

.         
. graph export "$MyProject/results/figures/ma-home-values.pdf", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/ma-home-values.pdf saved as PDF format

. 
. ** EOF
. 
end of do-file

. 
. do "$MyProject/scripts/6a_regression_dispensaries_on_property_assessments.do"

. ************
. * SCRIPT: 6a_regression_dispensaries_on_property_assessments.do
. * PURPOSE: runs a regression of dispensaries on property assessments
. ************
. 
. use "$MyProject/processed/dispensaries_on_property_assessments.dta", clear

. 
. destring zipcode, replace
zipcode: all characters numeric; replaced as int

. format zipcode %05.0f

. 
. * Define covariates
. local heat_type heat_electric heat_forced_hot_air heat_pump heat_space heat_steam

. local covariates living_area num_floors r_bdrms r_full_bth r_half_bth r_kitch yrs_since_built yrs_since_remodel `heat_type'

. 
. * Run separate regression for each building type
. set graphics off

. est clear

. 
. encode lu, gen(lu_enc)

. 
. matrix rel_time = (-5, -4, -3, -2, 0, 1, 2)'

. svmat rel_time

.         
. forvalues d = 1/5 {
  2.         local treatment treat_d`d' treat_jm5_d`d' treat_jm4_d`d' treat_jm3_d`d' treat_jm2_d`d' treat_j0_d`d' treat_jp1_d`d' treat_jp2_d`d'
  3.         
.         local dm1 = `d'-1
  4.         qui reg ppsqft `treatment' i.year_assessed i.zipcode i.lu_enc `covariates', vce(cluster year_assessed zipcode)
  5.         eststo model_`d', title("`dm1'-`d' mi.")
  6. 
.         * Plot coefficients from regression
.         matrix coefs_`d' = (_b[treat_jm5_d`d'], _b[treat_jm4_d`d'], _b[treat_jm3_d`d'], _b[treat_jm2_d`d'], _b[treat_j0_d`d'], _b[treat_jp1_d`d'], _b[treat_jp2_d`d'])'
  7.         svmat coefs_`d'
  8. 
.         matrix se_`d' = (_se[treat_jm5_d`d'], _se[treat_jm4_d`d'], _se[treat_jm3_d`d'], _se[treat_jm2_d`d'], _se[treat_j0_d`d'], _se[treat_jp1_d`d'], _se[treat_jp2_d`d'])'
  9.         
.         matrix high_`d' = coefs_`d' + invttail(e(df_r),0.025)*se_`d'
 10.         svmat high_`d'
 11. 
.         matrix low_`d' = coefs_`d' - invttail(e(df_r),0.025)*se_`d'
 12.         svmat low_`d'
 13.         
.         graph twoway (rcap high_`d' low_`d' rel_time in 1/8) (scatter coefs_`d' rel_time), ///
>                 xtitle("Event year") ///
>                 xlabel(-5(1)2) ///
>                 ylabel(, angle(0)) ///
>                 legend(order(2 "{&beta}{sub:j,`d'}") rows(1)) ///
> 
 14.         graph export "$MyProject/results/figures/reg-property-vals-d`d'.pdf", replace
 15. }
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals-d1.pdf saved as PDF format
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals-d2.pdf saved as PDF format
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals-d3.pdf saved as PDF format
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals-d4.pdf saved as PDF format
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals-d5.pdf saved as PDF format

. 
. graph twoway (rcap high_1 low_1 rel_time in 1/8) (scatter coefs_1 rel_time) ///
>         (rcap high_2 low_2 rel_time in 1/8) (scatter coefs_2 rel_time) ///
>         (rcap high_3 low_3 rel_time in 1/8) (scatter coefs_3 rel_time) ///
>         (rcap high_4 low_4 rel_time in 1/8) (scatter coefs_4 rel_time) ///
>         (rcap high_5 low_5 rel_time in 1/8) (scatter coefs_5 rel_time), ///
>         xtitle("Event year") ///
>         xlabel(-5(1)2) ///
>         ylabel(, angle(0)) ///
>         ytitle("Price ($) per square foot") ///
>         legend(order(2 "{&beta}{sub:j,1}" 4 "{&beta}{sub:j,2}" 6 "{&beta}{sub:j,3}" 8 "{&beta}{sub:j,4}" 10 "{&beta}{sub:j,5}") rows(1)) ///
> 

. graph export "$MyProject/results/figures/reg-property-vals.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-property-vals.png saved as PNG format

. 
. esttab model* using "$MyProject/results/tables/reg-property-vals.tex", replace ///
>         rename(treat_d1 treatment_d treat_d2 treatment_d treat_d3 treatment_d treat_d4 treatment_d treat_d5 treatment_d treat_jm5_d1 treatment_-5_d treat_jm5_d2 treatment_-5_d t
> reat_jm5_d3 treatment_-5_d treat_jm5_d4 treatment_-5_d treat_jm5_d5 treatment_-5_d treat_jm4_d1 treatment_-4_d treat_jm4_d2 treatment_-4_d treat_jm4_d3 treatment_-4_d treat_jm4_
> d4 treatment_-4_d treat_jm4_d5 treatment_-4_d treat_jm3_d1 treatment_-3_d treat_jm3_d2 treatment_-3_d treat_jm3_d3 treatment_-3_d treat_jm3_d4 treatment_-3_d treat_jm3_d5 treatm
> ent_-3_d treat_jm2_d1 treatment_-2_d treat_jm2_d2 treatment_-2_d treat_jm2_d3 treatment_-2_d treat_jm2_d4 treatment_-2_d treat_jm2_d5 treatment_-2_d treat_j0_d1 treatment_0_d tr
> eat_j0_d2 treatment_0_d treat_j0_d3 treatment_0_d treat_j0_d4 treatment_0_d treat_j0_d5 treatment_0_d treat_jp1_d1 treatment_1_d treat_jp1_d2 treatment_1_d treat_jp1_d3 treatmen
> t_1_d treat_jp1_d4 treatment_1_d treat_jp1_d5 treatment_1_d treat_jp2_d1 treatment_2_d treat_jp2_d2 treatment_2_d treat_jp2_d3 treatment_2_d treat_jp2_d4 treatment_2_d treat_jp2
> _d5 treatment_2_d) ///
>         keep(treatment_*) ///
>         cells(b(star fmt(3)) se(par fmt(2))) ///
>         mtitles("0-1 mi." "1-2 mi." "2-3 mi." "3-4 mi.") ///
>         legend label ///
> 
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/reg-property-vals.tex)

. * EOF
. 
end of do-file

. do "$MyProject/scripts/6b_regression_dispensaries_on_crime.do"

. ************
. * SCRIPT: 6b_regression_dispensaries_on_crime.do
. * PURPOSE: runs a regression of dispensaries on crime rates
. ************
. 
. use "$MyProject/processed/crime_boston_zipcodes.dta", clear

. 
. drop motor_vehicle_accident

. drop if year == 2015 | year == 2022
(68,040 observations deleted)

. drop if crimes_against_persons == 0 & crimes_against_property == 0 & crimes_against_society == 0
(234,052 observations deleted)

. 
. * Add rows with zero crimes
. fillin zipcode year month day hour

. 
. gen legal_days = 31

. replace legal_days = 30 if month == 4 | month == 6 | month == 9 | month == 11
(556,049 real changes made)

. replace legal_days = 28 if month == 2
(138,458 real changes made)

. replace legal_days = 29 if month == 2 & (year == 2016 | year == 2020)
(46,149 real changes made)

. drop if day > legal_days
(28,800 observations deleted)

. drop legal_days

. 
. replace day_of_week = dow(mdy(month, day, year)) if missing(day_of_week)
(1,355,850 real changes made)

. 
. replace crimes_against_persons = 0 if _fillin == 1
(1,355,850 real changes made)

. replace crimes_against_property = 0 if _fillin == 1
(1,355,850 real changes made)

. replace crimes_against_society = 0 if _fillin == 1
(1,355,850 real changes made)

. 
. save "$MyProject/processed/dispensaries_on_crime.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved

. 
. forvalues i = 1/30 {
  2.         use "$MyProject/processed/boston_zip_code_centroids.dta", clear
  3.         sort zipcode
  4.         
.         local z = zipcode[`i']
  5.         local zip_lat = latitude[`i']
  6.         local zip_lon = longitude[`i']
  7.         
.         use "$MyProject/processed/dispensaries_on_crime.dta", clear
  8.         
.         replace latitude = `zip_lat' if missing(latitude) & zipcode==`z'
  9.         replace longitude = `zip_lon' if missing(longitude) & zipcode==`z'
 10.         
.         save "$MyProject/processed/dispensaries_on_crime.dta", replace
 11. }
(50,066 real changes made)
(50,066 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(51,502 real changes made)
(51,502 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(50,046 real changes made)
(50,046 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(44,822 real changes made)
(44,822 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(51,306 real changes made)
(51,306 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(50,753 real changes made)
(50,753 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(49,345 real changes made)
(49,345 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(48,000 real changes made)
(48,000 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(35,504 real changes made)
(35,504 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(35,040 real changes made)
(35,040 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(45,775 real changes made)
(45,775 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(40,070 real changes made)
(40,070 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(37,244 real changes made)
(37,244 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(41,270 real changes made)
(41,270 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(41,391 real changes made)
(41,391 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(37,787 real changes made)
(37,787 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(41,060 real changes made)
(41,060 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(43,258 real changes made)
(43,258 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(47,772 real changes made)
(47,772 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(43,063 real changes made)
(43,063 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(46,607 real changes made)
(46,607 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(46,688 real changes made)
(46,688 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(47,167 real changes made)
(47,167 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(43,095 real changes made)
(43,095 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(43,705 real changes made)
(43,705 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(52,351 real changes made)
(52,351 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(47,174 real changes made)
(47,174 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(43,044 real changes made)
(43,044 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(51,496 real changes made)
(51,496 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
(49,449 real changes made)
(49,449 real changes made)
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved

. 
. * Get distance to dispensaries
. forvalues i = 1/11 {
  2.         use "$MyProject/processed/dispensaries_boston.dta", clear
  3.         sort id
  4.         local disp_lat = latitude[`i']
  5.         local disp_lon = longitude[`i']
  6.         
.         use "$MyProject/processed/dispensaries_on_crime.dta", clear
  7.         geodist `disp_lat' `disp_lon' latitude longitude, gen(dist_`i') mile
  8.         
.         save "$MyProject/processed/dispensaries_on_crime.dta", replace
  9. }
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved

. 
. * Determine minimum distance to dispensary based on location / date
. gen min_dist = .
(1,639,301 missing values generated)

. replace min_dist = dist_8 if year > 2019 | (year == 2019 & (month > 3 | (month == 3 & day >= 15)))
(755,466 real changes made)

. replace min_dist = min(dist_8, dist_10) if year > 2020 | (year == 2020 & (month > 3 | (month == 3 & day >= 5)))
(232,150 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11) if year > 2020 | (year == 2020 & (month > 6) | (month == 6 & day >= 29))
(141,038 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7) if year > 2020 | (year == 2020 & (month > 7 | (month == 7 & day >= 15)))
(77,067 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4) if year > 2021 | (year == 2021 & month >= 3)
(29,497 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2) if year > 2021 | (year == 2021 & (month > 4 | (month == 4 & day >= 22)))
(78,768 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2, dist_9) if year > 2021 | (year == 2021 & (month > 6 | (month == 6 & day >= 15)))
(178 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2, dist_9, dist_5) if year > 2021 | (year == 2021 & (month > 8 | (month == 8 & day >= 5)))
(29,326 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2, dist_9, dist_5, dist_3) if year > 2021 | (year == 2021 & (month > 8 | (month == 8 & day >= 11)))
(10,752 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2, dist_9, dist_5, dist_3, dist_1) if year > 2021 | (year == 2021 & month == 12 & day >= 14)
(1,736 real changes made)

. replace min_dist = min(dist_8, dist_10, dist_11, dist_7, dist_4, dist_2, dist_9, dist_5, dist_3, dist_1, dist_6) if year > 2022 | (year == 2021 & (month > 3 | (month == 3 & day 
> >= 11)))
(86,766 real changes made)

. drop dist_*

. 
. * Create set of treatment variables treat_d for d = 1 to 6
. * treat_d = 1 if the nearest dispensary is between (d-1)/2 and d/2 miles away
. forvalues d = 1/6 {
  2.         gen treat_d`d' = 0
  3.         replace treat_d`d' = 1 if !missing(min_dist) & min_dist >= (`d'-1)/2 & min_dist < `d'/2
  4. }
(93,089 real changes made)
(93,823 real changes made)
(114,949 real changes made)
(101,273 real changes made)
(98,612 real changes made)
(30,917 real changes made)

. 
. save "$MyProject/processed/dispensaries_on_crime.dta", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/processed/dispensaries_on_crime.dta saved

. 
. collapse (sum) crimes_against_persons crimes_against_property crimes_against_society, by(year zipcode month day_of_week hour treat_d1 treat_d2 treat_d3 treat_d4 treat_d5 treat_d
> 6)

. 
. * Run regression for crimes against property
. reg crimes_against_property treat_d* i.year i.zipcode i.month i.day i.hour, vce(cluster year zipcode)

      Source |       SS           df       MS      Number of obs   =   400,766
-------------+----------------------------------   F(80, 400685)   =   1065.76
       Model |  48205.5252        80  602.569065   Prob > F        =    0.0000
    Residual |  226543.579   400,685  .565390716   R-squared       =    0.1755
-------------+----------------------------------   Adj R-squared   =    0.1753
       Total |  274749.104   400,765  .685561624   Root MSE        =    .75192

                           (Std. err. adjusted for clustering on year zipcode)
------------------------------------------------------------------------------
             |               Robust
crimes_a~rty | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    treat_d1 |  -.0885189   .1009085    -0.88   0.421    -.3479124    .1708747
    treat_d2 |  -.1767096   .1087787    -1.62   0.165     -.456334    .1029149
    treat_d3 |  -.0847573   .0837142    -1.01   0.358    -.2999517     .130437
    treat_d4 |  -.1359543   .0978538    -1.39   0.223    -.3874954    .1155868
    treat_d5 |  -.2632188   .1043807    -2.52   0.053     -.531538    .0051003
    treat_d6 |  -.1397851    .091048    -1.54   0.185    -.3738315    .0942613
             |
        year |
       2016  |          0   1.70e-09     0.00   1.000    -4.37e-09    4.37e-09
       2017  |  -.0198496     .01006    -1.97   0.106    -.0457096    .0060104
       2018  |  -.0360163    .007195    -5.01   0.004    -.0545117   -.0175208
       2019  |  -.0656646   .0681198    -0.96   0.379    -.2407721     .109443
       2020  |   -.121652   .0569917    -2.13   0.086    -.2681538    .0248498
       2021  |  -.1268715   .0726117    -1.75   0.141    -.3135258    .0597828
             |
     zipcode |
       2108  |          0   3.78e-09     0.00   1.000    -9.73e-09    9.73e-09
       2109  |  -.0946932   .0169407    -5.59   0.003    -.1382406   -.0511458
       2110  |   .0029563   .0210568     0.14   0.894    -.0511719    .0570846
       2111  |   .3124039   .0654839     4.77   0.005     .1440723    .4807355
       2113  |  -.0842974   .0140156    -6.01   0.002    -.1203258   -.0482691
       2114  |  -.0494903   .0164917    -3.00   0.030    -.0918835    -.007097
       2115  |   .0794849   .0262492     3.03   0.029     .0120092    .1469607
       2116  |   .2140831    .044872     4.77   0.005      .098736    .3294303
       2118  |   .9343654   .1595279     5.86   0.002     .5242859    1.344445
       2119  |   .8123225   .1421435     5.71   0.002      .446931    1.177714
       2120  |   .2269541    .066228     3.43   0.019     .0567098    .3971985
       2121  |   .5306942   .1147658     4.62   0.006     .2356794    .8257091
       2122  |   .8095193   .1269659     6.38   0.001      .483143    1.135896
       2124  |   .4318993    .097761     4.42   0.007     .1805966     .683202
       2125  |   .4847176   .1153351     4.20   0.008     .1882394    .7811958
       2126  |   .6228922    .107289     5.81   0.002     .3470971    .8986873
       2127  |   .5729925   .0664697     8.62   0.000     .4021266    .7438584
       2128  |   .3763095     .01302    28.90   0.000     .3428404    .4097786
       2129  |   .1421688   .0322971     4.40   0.007     .0591466    .2251911
       2130  |   .4254151   .0679455     6.26   0.002     .2507557    .6000744
       2131  |   .1783502   .0530386     3.36   0.020     .0420102    .3146902
       2132  |   .2015651   .0807192     2.50   0.055    -.0059301    .4090604
       2134  |    .228485   .0505777     4.52   0.006     .0984708    .3584991
       2135  |    .478223   .0511868     9.34   0.000     .3466432    .6098028
       2136  |   .3841565   .0709711     5.41   0.003     .2017194    .5665936
       2163  |  -.0700767   .0519096    -1.35   0.235    -.2035147    .0633613
       2199  |   .3480106   .0403758     8.62   0.000     .2442213       .4518
       2203  |   .4619796   .1646387     2.81   0.038     .0387622    .8851969
       2210  |   -.077639   .0353657    -2.20   0.080    -.1685495    .0132715
       2215  |   .0652485   .0376847     1.73   0.144    -.0316231    .1621201
             |
       month |
          1  |          0   1.97e-10     0.00   1.000    -5.06e-10    5.06e-10
          2  |   -.043664   .0161081    -2.71   0.042    -.0850712   -.0022568
          3  |  -.0647219   .0235064    -2.75   0.040    -.1251469   -.0042969
          4  |  -.0048795   .0165098    -0.30   0.779    -.0473192    .0375602
          5  |   .0260698   .0208154     1.25   0.266     -.027438    .0795775
          6  |  -.0153907     .01388    -1.11   0.318    -.0510705    .0202891
          7  |   .0567025   .0201455     2.81   0.037     .0049169    .1084881
          8  |   .0826368   .0173887     4.75   0.005     .0379376    .1273359
          9  |    .051792   .0124771     4.15   0.009     .0197185    .0838655
         10  |   .0539037   .0129841     4.15   0.009     .0205271    .0872804
         11  |   .0077712   .0169789     0.46   0.666    -.0358745    .0514169
         12  |   .0032036    .015156     0.21   0.841    -.0357562    .0421633
             |
 day_of_week |
          0  |          0   3.10e-10     0.00   1.000    -7.98e-10    7.98e-10
          1  |   .0465507   .0107603     4.33   0.008     .0188904    .0742109
          2  |     .03694    .011276     3.28   0.022     .0079542    .0659258
          3  |   .0383964   .0102342     3.75   0.013     .0120887    .0647042
          4  |   .0271224   .0122148     2.22   0.077    -.0042767    .0585215
          5  |   .0667263    .014284     4.67   0.005      .030008    .1034446
          6  |   .0366686   .0065683     5.58   0.003     .0197842    .0535531
             |
        hour |
          0  |          0   2.83e-11     0.00   1.000    -7.27e-11    7.27e-11
          1  |  -.3842364   .0649034    -5.92   0.002    -.5510758   -.2173969
          2  |  -.4141465   .0695575    -5.95   0.002    -.5929497   -.2353434
          3  |   -.486031    .072839    -6.67   0.001    -.6732695   -.2987925
          4  |  -.5208032   .0749144    -6.95   0.001    -.7133769   -.3282295
          5  |  -.5130674   .0724337    -7.08   0.001    -.6992643   -.3268705
          6  |  -.4600544   .0691492    -6.65   0.001     -.637808   -.2823009
          7  |  -.3529567   .0644133    -5.48   0.003    -.5185363   -.1873771
          8  |  -.2096905   .0596086    -3.52   0.017    -.3629193   -.0564617
          9  |  -.1634236   .0569724    -2.87   0.035    -.3098758   -.0169714
         10  |  -.1287059   .0610194    -2.11   0.089    -.2855612    .0281495
         11  |  -.1123034   .0581943    -1.93   0.112    -.2618966    .0372898
         12  |   .0279781   .0589209     0.47   0.655     -.123483    .1794391
         13  |  -.0885451   .0616727    -1.44   0.211    -.2470799    .0699897
         14  |  -.0547626    .061318    -0.89   0.413    -.2123857    .1028604
         15  |  -.0640906   .0613938    -1.04   0.344    -.2219084    .0937273
         16  |   .0083841   .0634817     0.13   0.900    -.1548008    .1715691
         17  |   .0142418   .0744202     0.19   0.856    -.1770614    .2055449
         18  |   .0025362   .0800174     0.03   0.976     -.203155    .2082274
         19  |  -.0807838   .0714386    -1.13   0.309    -.2644225     .102855
         20  |  -.1246702   .0639062    -1.95   0.109    -.2889463    .0396059
         21  |  -.1870405   .0670234    -2.79   0.038    -.3593296   -.0147515
         22  |  -.2244244   .0647594    -3.47   0.018    -.3908938    -.057955
         23  |  -.2888651   .0617025    -4.68   0.005    -.4474765   -.1302537
             |
       _cons |    .403143   .0731339     5.51   0.003     .2151463    .5911397
------------------------------------------------------------------------------

Cluster combination  levels
year                 6
zipcode              30
year zipcode         180

. 
. matrix coefs_property = (_b[treat_d1], _b[treat_d2], _b[treat_d3], _b[treat_d4], _b[treat_d5], _b[treat_d6])'

. svmat coefs_property

. 
. matrix se_property = (_se[treat_d1], _se[treat_d2], _se[treat_d3], _se[treat_d4], _se[treat_d5], _se[treat_d6])'

. svmat se_property

. 
. matrix high_property = coefs_property + invttail(e(df_r),0.025)*se_property

. svmat high_property

. 
. matrix low_property = coefs_property - invttail(e(df_r),0.025)*se_property

. svmat low_property

. 
. matrix dist = (1, 2, 3, 4, 5, 6)'

. svmat dist

. 
. graph twoway (rcap high_property low_property dist in 1/6) (scatter coefs_property dist), ///
>         xtitle("Distance from dispensary") ///
>         xlabel(1 "0-0.5 mi." 2 "0.5-1 mi." 3 "1-1.5 mi." 4 "1.5-2 mi." 5 "2-2.5 mi." 6 "2.5-3 mi.") ///
>         ylabel(, angle(0)) ///
>         legend(off) ///
> 

. graph export "$MyProject/results/figures/reg-dispensaries-on-crimes-against-property.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-dispensaries-on-crimes-against-property.png saved as PNG format

. drop coefs_property se_property high_property low_property dist

. 
. * Run regression for crimes against persons
. reg crimes_against_persons treat_d* i.year i.zipcode i.month i.day i.hour, vce(cluster year zipcode)

      Source |       SS           df       MS      Number of obs   =   400,766
-------------+----------------------------------   F(80, 400685)   =    331.38
       Model |  3044.97545        80  38.0621931   Prob > F        =    0.0000
    Residual |  46022.7304   400,685  .114860128   R-squared       =    0.0621
-------------+----------------------------------   Adj R-squared   =    0.0619
       Total |  49067.7059   400,765  .122435108   Root MSE        =    .33891

                           (Std. err. adjusted for clustering on year zipcode)
------------------------------------------------------------------------------
             |               Robust
crimes_aga~s | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    treat_d1 |  -.0134158   .0326217    -0.41   0.698    -.0972726     .070441
    treat_d2 |  -.0310985   .0256634    -1.21   0.280    -.0970683    .0348714
    treat_d3 |  -.0413512   .0176427    -2.34   0.066    -.0867032    .0040009
    treat_d4 |  -.0131912   .0231565    -0.57   0.594    -.0727168    .0463344
    treat_d5 |  -.0642381   .0232811    -2.76   0.040     -.124084   -.0043923
    treat_d6 |  -.0472776   .0197033    -2.40   0.062    -.0979265    .0033712
             |
        year |
       2016  |          0   3.26e-10     0.00   1.000    -8.38e-10    8.38e-10
       2017  |   .0037724   .0019175     1.97   0.106    -.0011567    .0087016
       2018  |   .0097728   .0031219     3.13   0.026     .0017478    .0177979
       2019  |   .0062299   .0173804     0.36   0.735    -.0384477    .0509076
       2020  |  -.0429061   .0127177    -3.37   0.020     -.075598   -.0102142
       2021  |  -.0423074    .017239    -2.45   0.058    -.0866217     .002007
             |
     zipcode |
       2108  |          0   1.58e-09     0.00   1.000    -4.05e-09    4.05e-09
       2109  |  -.0263906   .0046489    -5.68   0.002    -.0383409   -.0144404
       2110  |    .003215   .0053236     0.60   0.572    -.0104696    .0168997
       2111  |   .0922787   .0160604     5.75   0.002     .0509941    .1335632
       2113  |  -.0218574   .0045406    -4.81   0.005    -.0335293   -.0101855
       2114  |  -.0102673   .0046281    -2.22   0.077    -.0221643    .0016297
       2115  |  -.0024199   .0073651    -0.33   0.756    -.0213524    .0165127
       2116  |   .0263297   .0057051     4.62   0.006     .0116643    .0409951
       2118  |   .2236559   .0424541     5.27   0.003     .1145241    .3327876
       2119  |   .2091818   .0546402     3.83   0.012     .0687248    .3496387
       2120  |   .0679034   .0195158     3.48   0.018     .0177364    .1180704
       2121  |   .1632645   .0405391     4.03   0.010     .0590554    .2674737
       2122  |   .1398256   .0440814     3.17   0.025     .0265108    .2531404
       2124  |   .1366894   .0357189     3.83   0.012      .044871    .2285077
       2125  |   .1067038   .0272088     3.92   0.011     .0367614    .1766462
       2126  |    .173835   .0490036     3.55   0.016     .0478672    .2998029
       2127  |   .0966084   .0264762     3.65   0.015      .028549    .1646677
       2128  |   .0804235   .0131244     6.13   0.002     .0466861     .114161
       2129  |   .0137963   .0090332     1.53   0.187    -.0094242    .0370168
       2130  |   .0707167   .0190505     3.71   0.014     .0217457    .1196876
       2131  |   .0260902   .0083833     3.11   0.026     .0045404    .0476401
       2132  |   .0047326   .0188582     0.25   0.812     -.043744    .0532093
       2134  |   .0255745   .0105804     2.42   0.060    -.0016233    .0527723
       2135  |   .0497059   .0161681     3.07   0.028     .0081445    .0912674
       2136  |   .0508244   .0194746     2.61   0.048     .0007633    .1008854
       2163  |  -.0239879    .011965    -2.00   0.101    -.0547449    .0067691
       2199  |   .0189425   .0087848     2.16   0.084    -.0036397    .0415247
       2203  |   .1357368   .0513495     2.64   0.046     .0037387     .267735
       2210  |  -.0237308   .0074135    -3.20   0.024    -.0427879   -.0046738
       2215  |   .0128022   .0053998     2.37   0.064    -.0010785    .0266828
             |
       month |
          1  |          0   2.09e-10     0.00   1.000    -5.38e-10    5.38e-10
          2  |  -.0090922   .0045175    -2.01   0.100    -.0207049    .0025204
          3  |  -.0091804   .0056884    -1.61   0.167    -.0238028     .005442
          4  |   .0036093   .0083692     0.43   0.684    -.0179043    .0251229
          5  |   .0202727   .0097353     2.08   0.092    -.0047528    .0452981
          6  |   .0064619   .0056986     1.13   0.308    -.0081869    .0211106
          7  |   .0206968   .0062016     3.34   0.021      .004755    .0366386
          8  |   .0175037   .0071235     2.46   0.057    -.0008077    .0358152
          9  |   .0122758    .005325     2.31   0.069    -.0014125    .0259641
         10  |    .007985   .0060123     1.33   0.242      -.00747      .02344
         11  |  -.0059823   .0076157    -0.79   0.468     -.025559    .0135943
         12  |  -.0071439   .0073401    -0.97   0.375    -.0260122    .0117244
             |
 day_of_week |
          0  |          0   6.12e-11     0.00   1.000    -1.57e-10    1.57e-10
          1  |  -.0163586   .0049467    -3.31   0.021    -.0290746   -.0036427
          2  |  -.0150499   .0040593    -3.71   0.014    -.0254848    -.004615
          3  |  -.0138722   .0049061    -2.83   0.037    -.0264837   -.0012606
          4  |  -.0159592   .0042987    -3.71   0.014    -.0270095    -.004909
          5  |  -.0085004   .0045865    -1.85   0.123    -.0202904    .0032897
          6  |   .0003553   .0028565     0.12   0.906    -.0069875    .0076981
             |
        hour |
          0  |          0   2.44e-11     0.00   1.000    -6.27e-11    6.27e-11
          1  |  -.0241247    .007957    -3.03   0.029    -.0445788   -.0036707
          2  |  -.0322002   .0108616    -2.96   0.031    -.0601207   -.0042796
          3  |   -.089475   .0145011    -6.17   0.002    -.1267512   -.0521987
          4  |  -.1016938   .0177691    -5.72   0.002    -.1473708   -.0560168
          5  |  -.1108755   .0200394    -5.53   0.003    -.1623885   -.0593625
          6  |  -.1066833   .0192004    -5.56   0.003    -.1560396    -.057327
          7  |  -.0916076   .0156331    -5.86   0.002    -.1317937   -.0514214
          8  |    -.07254   .0128403    -5.65   0.002    -.1055472   -.0395328
          9  |  -.0640423   .0100356    -6.38   0.001    -.0898397   -.0382449
         10  |  -.0456121   .0097306    -4.69   0.005    -.0706254   -.0205987
         11  |  -.0366876   .0092148    -3.98   0.011    -.0603751   -.0130002
         12  |  -.0253484   .0083556    -3.03   0.029    -.0468271   -.0038697
         13  |  -.0252706   .0082195    -3.07   0.028    -.0463996   -.0041417
         14  |  -.0203943   .0081816    -2.49   0.055    -.0414258    .0006371
         15  |  -.0138517   .0084174    -1.65   0.161    -.0354893    .0077859
         16  |   .0015497   .0107336     0.14   0.891    -.0260419    .0291413
         17  |  -.0024277   .0091912    -0.26   0.802    -.0260544     .021199
         18  |  -.0002682   .0103617    -0.03   0.980    -.0269037    .0263673
         19  |  -.0048137   .0094002    -0.51   0.630    -.0289777    .0193503
         20  |  -.0085076   .0083151    -1.02   0.353    -.0298823    .0128672
         21  |   -.007029   .0090235    -0.78   0.471    -.0302247    .0161668
         22  |  -.0216655   .0072806    -2.98   0.031    -.0403809   -.0029501
         23  |  -.0279327   .0068807    -4.06   0.010    -.0456202   -.0102452
             |
       _cons |   .1022371   .0127805     8.00   0.000     .0693837    .1350906
------------------------------------------------------------------------------

Cluster combination  levels
year                 6
zipcode              30
year zipcode         180

. 
. matrix coefs_persons = (_b[treat_d1], _b[treat_d2], _b[treat_d3], _b[treat_d4], _b[treat_d5], _b[treat_d6])'

. svmat coefs_persons

. 
. matrix se_persons = (_se[treat_d1], _se[treat_d2], _se[treat_d3], _se[treat_d4], _se[treat_d5], _se[treat_d6])'

. svmat se_persons

. 
. matrix high_persons = coefs_persons + invttail(e(df_r),0.025)*se_persons

. svmat high_persons

. 
. matrix low_persons = coefs_persons - invttail(e(df_r),0.025)*se_persons

. svmat low_persons

. 
. matrix dist = (1, 2, 3, 4, 5, 6)'

. svmat dist

. 
. graph twoway (rcap high_persons low_persons dist in 1/6) (scatter coefs_persons dist), ///
>         xtitle("Distance from dispensary") ///
>         xlabel(1 "0-0.5 mi." 2 "0.5-1 mi." 3 "1-1.5 mi." 4 "1.5-2 mi." 5 "2-2.5 mi." 6 "2.5-3 mi.") ///
>         ylabel(, angle(0)) ///
>         legend(off) ///
> 

. graph export "$MyProject/results/figures/reg-dispensaries-on-crimes-against-persons.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-dispensaries-on-crimes-against-persons.png saved as PNG format

. drop coefs_persons se_persons high_persons low_persons dist

. 
. * Run regression for crimes against society
. reg crimes_against_society treat_d* i.year i.zipcode i.month i.day i.hour, vce(cluster year zipcode)

      Source |       SS           df       MS      Number of obs   =   400,766
-------------+----------------------------------   F(80, 400685)   =    653.28
       Model |  13224.0885        80  165.301106   Prob > F        =    0.0000
    Residual |  101386.773   400,685  .253033613   R-squared       =    0.1154
-------------+----------------------------------   Adj R-squared   =    0.1152
       Total |  114610.862   400,765  .285980217   Root MSE        =    .50302

                           (Std. err. adjusted for clustering on year zipcode)
------------------------------------------------------------------------------
             |               Robust
crimes_a~ety | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    treat_d1 |  -.0032342   .0705608    -0.05   0.965    -.1846164    .1781481
    treat_d2 |  -.0771096   .0711702    -1.08   0.328    -.2600584    .1058393
    treat_d3 |  -.0691223   .0339841    -2.03   0.098    -.1564812    .0182366
    treat_d4 |  -.0157203   .0413255    -0.38   0.719     -.121951    .0905104
    treat_d5 |  -.1209016   .0520605    -2.32   0.068    -.2547274    .0129241
    treat_d6 |   -.082725   .0327483    -2.53   0.053    -.1669072    .0014571
             |
        year |
       2016  |          0   1.26e-09     0.00   1.000    -3.25e-09    3.25e-09
       2017  |  -.0119564   .0048855    -2.45   0.058     -.024515    .0006021
       2018  |  -.0132232   .0053495    -2.47   0.056    -.0269744    .0005281
       2019  |  -.0641248   .0235969    -2.72   0.042    -.1247826   -.0034669
       2020  |  -.1360233   .0264022    -5.15   0.004    -.2038923   -.0681543
       2021  |   -.125951   .0362068    -3.48   0.018    -.2190236   -.0328784
             |
     zipcode |
       2108  |          0   2.89e-09     0.00   1.000    -7.43e-09    7.43e-09
       2109  |  -.0493294   .0083931    -5.88   0.002    -.0709045   -.0277544
       2110  |   -.040317   .0074918    -5.38   0.003    -.0595754   -.0210586
       2111  |   .1357873   .0285408     4.76   0.005     .0624208    .2091538
       2113  |  -.0477933   .0073417    -6.51   0.001    -.0666657   -.0289208
       2114  |  -.0488702    .006637    -7.36   0.001    -.0659311   -.0318092
       2115  |  -.0264773   .0093485    -2.83   0.037    -.0505084   -.0024461
       2116  |   .0116974   .0154692     0.76   0.484    -.0280676    .0514623
       2118  |   .3891437   .0723068     5.38   0.003     .2032731    .5750143
       2119  |   .4859103   .1232928     3.94   0.011     .1689761    .8028444
       2120  |   .1295491    .043525     2.98   0.031     .0176645    .2414336
       2121  |   .2937922   .0843911     3.48   0.018     .0768579    .5107265
       2122  |   .2798097   .0864295     3.24   0.023     .0576357    .5019838
       2124  |   .2559725   .0800412     3.20   0.024     .0502201    .4617249
       2125  |   .2334296   .0673502     3.47   0.018     .0603005    .4065587
       2126  |   .3622439   .0927163     3.91   0.011     .1239091    .6005787
       2127  |   .1612591   .0401002     4.02   0.010     .0581781    .2643401
       2128  |   .1375012   .0365135     3.77   0.013     .0436403    .2313622
       2129  |    .028866   .0118814     2.43   0.059    -.0016762    .0594082
       2130  |   .1608098   .0313799     5.12   0.004     .0801452    .2414744
       2131  |   .0838833   .0238632     3.52   0.017      .022541    .1452257
       2132  |   .0452543    .026161     1.73   0.144    -.0219948    .1125034
       2134  |   .0188833   .0141553     1.33   0.240     -.017504    .0552706
       2135  |   .0865238   .0304457     2.84   0.036     .0082607    .1647869
       2136  |   .1344205   .0384722     3.49   0.017     .0355246    .2333165
       2163  |  -.0293423   .0204968    -1.43   0.212    -.0820309    .0233463
       2199  |   .0065443   .0208798     0.31   0.767    -.0471288    .0602174
       2203  |   .1080582   .0458174     2.36   0.065    -.0097192    .2258356
       2210  |  -.0510781   .0134937    -3.79   0.013    -.0857649   -.0163914
       2215  |  -.0200167   .0092751    -2.16   0.083     -.043859    .0038256
             |
       month |
          1  |          0   7.62e-10     0.00   1.000    -1.96e-09    1.96e-09
          2  |  -.0086437   .0083599    -1.03   0.349    -.0301334    .0128461
          3  |  -.0086531   .0150228    -0.58   0.590    -.0472705    .0299643
          4  |  -.0088121   .0121321    -0.73   0.500    -.0399986    .0223744
          5  |   .0077598   .0090344     0.86   0.430    -.0154639    .0309835
          6  |   -.016134   .0071572    -2.25   0.074    -.0345322    .0022643
          7  |   .0130719   .0109503     1.19   0.286    -.0150768    .0412206
          8  |   .0108411   .0124838     0.87   0.425    -.0212495    .0429317
          9  |   .0033227   .0090568     0.37   0.729    -.0199585     .026604
         10  |  -.0113793   .0128923    -0.88   0.418    -.0445201    .0217615
         11  |  -.0297699   .0126935    -2.35   0.066    -.0623995    .0028597
         12  |  -.0400121   .0154403    -2.59   0.049    -.0797026   -.0003216
             |
 day_of_week |
          0  |          0   1.79e-10     0.00   1.000    -4.59e-10    4.59e-10
          1  |   .0357914   .0106454     3.36   0.020     .0084266    .0631562
          2  |   .0387075    .010677     3.63   0.015     .0112613    .0661537
          3  |   .0439939   .0128061     3.44   0.019     .0110749    .0769129
          4  |   .0452239   .0141854     3.19   0.024     .0087592    .0816886
          5  |    .043928    .011675     3.76   0.013     .0139163    .0739396
          6  |   .0249401   .0089195     2.80   0.038     .0020119    .0478684
             |
        hour |
          0  |          0   1.17e-10     0.00   1.000    -3.00e-10    3.00e-10
          1  |   -.028376   .0099626    -2.85   0.036    -.0539856   -.0027665
          2  |  -.0570427   .0172793    -3.30   0.021    -.1014606   -.0126247
          3  |   -.117646   .0274867    -4.28   0.008     -.188303   -.0469891
          4  |   -.134281   .0295556    -4.54   0.006    -.2102561   -.0583059
          5  |  -.1461677   .0333731    -4.38   0.007    -.2319559   -.0603796
          6  |  -.1298777   .0276965    -4.69   0.005    -.2010737   -.0586817
          7  |  -.0993742   .0262587    -3.78   0.013    -.1668743   -.0318742
          8  |  -.0568761   .0128062    -4.44   0.007    -.0897955   -.0239567
          9  |  -.0292579   .0146137    -2.00   0.102    -.0668235    .0083078
         10  |   .0098882   .0152161     0.65   0.544     -.029226    .0490024
         11  |    .022473   .0173089     1.30   0.251    -.0220209    .0669668
         12  |    .031957   .0208706     1.53   0.186    -.0216926    .0856067
         13  |   .0383427   .0189891     2.02   0.099    -.0104703    .0871556
         14  |   .0321266   .0213694     1.50   0.193    -.0228051    .0870583
         15  |   .0123087   .0182697     0.67   0.530     -.034655    .0592725
         16  |   .0841584   .0326095     2.58   0.049      .000333    .1679839
         17  |   .1501145   .0492008     3.05   0.028     .0236399     .276589
         18  |   .1418751   .0493411     2.88   0.035     .0150397    .2687106
         19  |   .0913823   .0359942     2.54   0.052    -.0011439    .1839084
         20  |   .0365334   .0226355     1.61   0.167     -.021653    .0947198
         21  |   .0010073   .0162258     0.06   0.953    -.0407025    .0427171
         22  |  -.0192745   .0093202    -2.07   0.093    -.0432328    .0046839
         23  |  -.0578342   .0132828    -4.35   0.007    -.0919789   -.0236896
             |
       _cons |   .1172497   .0383754     3.06   0.028     .0186027    .2158967
------------------------------------------------------------------------------

Cluster combination  levels
year                 6
zipcode              30
year zipcode         180

. 
. matrix coefs_society = (_b[treat_d1], _b[treat_d2], _b[treat_d3], _b[treat_d4], _b[treat_d5], _b[treat_d6])'

. svmat coefs_society

. 
. matrix se_society = (_se[treat_d1], _se[treat_d2], _se[treat_d3], _se[treat_d4], _se[treat_d5], _se[treat_d6])'

. svmat se_society

. 
. matrix high_society = coefs_society + invttail(e(df_r),0.025)*se_society

. svmat high_society

. 
. matrix low_society = coefs_society - invttail(e(df_r),0.025)*se_society

. svmat low_society

. 
. matrix dist = (1, 2, 3, 4, 5, 6)'

. svmat dist

. 
. graph twoway (rcap high_society low_society dist in 1/6) (scatter coefs_society dist), ///
>         xtitle("Distance from dispensary") ///
>         xlabel(1 "0-0.5 mi." 2 "0.5-1 mi." 3 "1-1.5 mi." 4 "1.5-2 mi." 5 "2-2.5 mi." 6 "2.5-3 mi.") ///
>         ylabel(, angle(0)) ///
>         legend(off) ///
> 

. graph export "$MyProject/results/figures/reg-dispensaries-on-crimes-against-society.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-dispensaries-on-crimes-against-society.png saved as PNG format

. drop coefs_society se_society high_society low_society dist

. 
. ** EOF
. 
. 
end of do-file

. do "$MyProject/scripts/6c_regression_ma_town_legality_on_home_values.do"

. ************
. * SCRIPT: 6c_regression_ma_town_legality_on_home_values.do
. * PURPOSE: runs a regression of ma town legality on home values
. ************
. 
. use "$MyProject/processed/zillow_home_values_ma.dta", clear

. 
. destring zipcode, replace
zipcode: all characters numeric; replaced as int

. format zipcode %05.0f

. 
. forvalues y = 2000/2021 {
  2.         gen avg_hv_`y' = (hv_01_`y' + hv_02_`y' + hv_03_`y' + hv_04_`y' + hv_05_`y' + hv_06_`y' + hv_07_`y' + hv_08_`y' + hv_09_`y' + hv_10_`y' + hv_11_`y' + hv_12_`y')/12
  3. }
(15 missing values generated)
(14 missing values generated)
(14 missing values generated)
(13 missing values generated)
(13 missing values generated)
(13 missing values generated)
(12 missing values generated)
(12 missing values generated)
(12 missing values generated)
(12 missing values generated)
(11 missing values generated)
(11 missing values generated)
(9 missing values generated)
(9 missing values generated)
(9 missing values generated)
(7 missing values generated)
(7 missing values generated)
(4 missing values generated)
(1 missing value generated)

. drop hv_*

. 
. * Create one row for each observation
. expand 22
(7,623 observations created)

. bysort zipcode: gen year = 1999 + _n

. gen avg_hv = .
(7,986 missing values generated)

. forvalues y = 2000/2021 {
  2.         replace avg_hv = avg_hv_`y' if year == `y'
  3. }
(348 real changes made)
(349 real changes made)
(349 real changes made)
(350 real changes made)
(350 real changes made)
(350 real changes made)
(351 real changes made)
(351 real changes made)
(351 real changes made)
(351 real changes made)
(352 real changes made)
(352 real changes made)
(354 real changes made)
(354 real changes made)
(354 real changes made)
(356 real changes made)
(356 real changes made)
(359 real changes made)
(362 real changes made)
(363 real changes made)
(363 real changes made)
(363 real changes made)

. drop avg_hv_*

. drop if missing(avg_hv)
(198 observations deleted)

. 
. * Run regression
. gen retail_ban = 1 - retail_legal

. est clear

. eststo: reg avg_hv retail_ban i.year i.zipcode, vce(cluster year zipcode)
note: 2780.zipcode omitted because of collinearity.

      Source |       SS           df       MS      Number of obs   =     7,788
-------------+----------------------------------   F(383, 7404)    =    309.14
       Model |  4.5112e+14       383  1.1779e+12   Prob > F        =    0.0000
    Residual |  2.8210e+13     7,404  3.8101e+09   R-squared       =    0.9411
-------------+----------------------------------   Adj R-squared   =    0.9381
       Total |  4.7933e+14     7,787  6.1555e+10   Root MSE        =     61726

                           (Std. err. adjusted for clustering on year zipcode)
------------------------------------------------------------------------------
             |               Robust
      avg_hv | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  retail_ban |  -78055.42   2170.908   -35.96   0.000    -82570.07   -73540.77
             |
        year |
       2000  |          0   .0005047     0.00   1.000    -.0010495    .0010495
       2001  |   34676.91   2332.768    14.87   0.000     29825.65    39528.16
       2002  |   67118.92   1782.786    37.65   0.000     63411.41    70826.43
       2003  |   102365.5   1400.866    73.07   0.000     99452.28    105278.8
       2004  |   133731.9   1351.266    98.97   0.000     130921.8      136542
       2005  |     164578   1842.655    89.32   0.000       160746      168410
       2006  |   164482.6   1912.914    85.99   0.000     160504.5    168460.8
       2007  |   149076.2    1592.68    93.60   0.000     145764.1    152388.4
       2008  |   130100.8   1738.903    74.82   0.000     126484.6      133717
       2009  |   109686.7   1825.505    60.09   0.000     105890.3      113483
       2010  |   111678.5   1800.769    62.02   0.000     107933.6    115423.4
       2011  |   100936.2   1742.548    57.92   0.000     97312.39      104560
       2012  |   95113.55   1772.871    53.65   0.000     91426.67    98800.44
       2013  |   115710.7    2623.15    44.11   0.000     110255.5    121165.8
       2014  |   136406.7   3612.619    37.76   0.000     128893.9    143919.6
       2015  |   151885.7   4720.829    32.17   0.000     142068.2    161703.2
       2016  |   167040.5   5766.826    28.97   0.000     155047.7    179033.3
       2017  |   188090.8   6578.487    28.59   0.000     174410.1    201771.5
       2018  |   211863.7    7104.58    29.82   0.000       197089    226638.5
       2019  |   221982.3   7245.054    30.64   0.000     206915.3    237049.2
       2020  |     240337   7268.195    33.07   0.000       225222      255452
       2021  |   306425.4   7895.784    38.81   0.000     290005.2    322845.5
             |
     zipcode |
       1001  |          0   .0007372     0.00   1.000    -.0015331    .0015331
       1002  |   37189.18   6368.557     5.84   0.000     23945.04    50433.31
       1005  |   20262.91   2179.736     9.30   0.000      15729.9    24795.92
       1007  |  -7286.261   4938.588    -1.48   0.155    -17556.62    2984.094
       1008  |  -63637.21   7001.494    -9.09   0.000    -78197.62   -49076.81
       1010  |  -28153.06   4279.023    -6.58   0.000    -37051.78   -19254.35
       1013  |  -102983.3   5434.043   -18.95   0.000      -114284   -91682.61
       1020  |  -95259.13   5388.308   -17.68   0.000    -106464.7   -84053.53
       1022  |  -150180.7   7329.623   -20.49   0.000    -165423.5   -134937.9
       1026  |   31595.05   8336.145     3.79   0.001     14259.09    48931.01
       1027  |  -32418.49    4981.48    -6.51   0.000    -42778.04   -22058.93
       1028  |   55719.35   3306.704    16.85   0.000     48842.68    62596.02
       1033  |  -38814.26   5343.964    -7.26   0.000    -49927.64   -27700.88
       1035  |   39613.58   7021.966     5.64   0.000     25010.61    54216.56
       1036  |   63130.87   3555.886    17.75   0.000        55736    70525.74
       1038  |   8800.681   5057.248     1.74   0.096    -1716.442     19317.8
       1040  |  -94857.17   5029.785   -18.86   0.000    -105317.2   -84397.16
       1050  |   14759.32   5111.757     2.89   0.009     4128.843    25389.81
       1054  |   16484.71   5011.731     3.29   0.003     6062.248    26907.18
       1056  |   23602.08   3431.479     6.88   0.000     16465.93    30738.24
       1057  |   20610.23   2620.484     7.87   0.000     15160.64    26059.83
       1060  |   1328.333   6933.261     0.19   0.850    -13090.17    15746.84
       1069  |  -157654.4   10696.44   -14.74   0.000    -179898.8   -135409.9
       1070  |  -82558.63    7455.87   -11.07   0.000    -98063.96    -67053.3
       1073  |   7229.034   5374.955     1.34   0.193    -3948.796    18406.86
       1075  |   33699.64   3699.309     9.11   0.000     26006.51    41392.78
       1077  |   45996.05   4069.292    11.30   0.000     37533.49     54458.6
       1081  |  -85390.61   4564.896   -18.71   0.000    -94883.84   -75897.39
       1082  |  -79512.48   5289.594   -15.03   0.000    -90512.79   -68512.17
       1085  |  -96211.28   7792.433   -12.35   0.000    -112416.5   -80006.03
       1089  |   13347.05   4075.492     3.27   0.004     4871.602     21822.5
       1095  |   82918.47   2700.592    30.70   0.000     77302.29    88534.66
       1096  |  -9704.903   5657.584    -1.72   0.101    -21470.49    2060.687
       1098  |  -39216.72    7031.12    -5.58   0.000    -53838.74   -24594.71
       1101  |  -179697.8   10427.16   -17.23   0.000    -201382.3   -158013.4
       1103  |  -209224.4   7829.614   -26.72   0.000    -225506.9   -192941.8
       1104  |  -137787.5   5219.819   -26.40   0.000    -148642.7   -126932.3
       1105  |  -158781.9   6262.795   -25.35   0.000    -171806.1   -145757.7
       1106  |   133771.9   2589.694    51.66   0.000     128386.3    139157.5
       1107  |    -115909   5896.938   -19.66   0.000    -128172.3   -103645.6
       1108  |  -119269.4   5290.092   -22.55   0.000    -130270.8   -108268.1
       1109  |    -136674   5513.515   -24.79   0.000    -148139.9     -125208
       1118  |  -111537.1   5132.606   -21.73   0.000    -122210.9   -100863.3
       1119  |  -121485.4   5016.517   -24.22   0.000    -131917.8     -111053
       1128  |  -95918.94    4994.15   -19.21   0.000    -106304.8   -85533.04
       1129  |  -104512.9   4869.876   -21.46   0.000    -114640.3   -94385.42
       1201  |  -103660.3   6827.478   -15.18   0.000    -117858.9   -89461.82
       1220  |  -126070.2   7303.989   -17.26   0.000    -141259.7   -110880.7
       1223  |  -47933.75   5825.645    -8.23   0.000    -60048.84   -35818.66
       1225  |  -70017.41   5977.059   -11.71   0.000    -82447.39   -57587.44
       1226  |  -80591.03   6290.596   -12.81   0.000    -93673.04   -67509.02
       1230  |   107783.2   8915.545    12.09   0.000     89242.36    126324.1
       1235  |  -90420.67   7411.223   -12.20   0.000    -105833.1   -75008.18
       1237  |  -65117.08   6130.919   -10.62   0.000    -77867.03   -52367.14
       1238  |  -24188.32   6418.218    -3.77   0.001    -37535.74   -10840.91
       1240  |   74260.21   6020.855    12.33   0.000     61739.15    86781.26
       1245  |     271200    12214.4    22.20   0.000     245798.7    296601.2
       1247  |  -136087.9   7449.965   -18.27   0.000    -151580.9   -120594.8
       1253  |  -61968.32   8391.904    -7.38   0.000    -79420.24    -44516.4
       1254  |   57318.47    9675.18     5.92   0.000     37197.83    77439.11
       1257  |   41963.93   5479.149     7.66   0.000     30569.42    53358.45
       1266  |   109796.5    8351.45    13.15   0.000     92428.67    127164.2
       1267  |  -8393.209   6497.609    -1.29   0.210    -21905.73     5119.31
       1270  |  -81427.42   7053.248   -11.54   0.000    -96095.45   -66759.38
       1301  |    -100395   6045.846   -16.61   0.000    -112968.1   -87822.01
       1330  |  -55581.19   8881.678    -6.26   0.000    -74051.65   -37110.73
       1331  |  -104609.9   4497.359   -23.26   0.000    -113962.6    -95257.1
       1337  |  -69416.99   5312.046   -13.07   0.000    -80463.99   -58369.98
       1338  |   -67438.6   5295.762   -12.73   0.000    -78451.74   -56425.46
       1339  |  -83289.41   5699.891   -14.61   0.000    -95142.98   -71435.84
       1340  |  -22038.95    4789.02    -4.60   0.000    -31998.26   -12079.64
       1341  |  -8876.381   6001.187    -1.48   0.154    -21356.53     3603.77
       1342  |  -15450.95   5669.199    -2.73   0.013     -27240.7   -3661.205
       1344  |  -105905.8   5850.114   -18.10   0.000    -118071.8   -93739.83
       1346  |  -99389.79   7041.688   -14.11   0.000    -114033.8    -84745.8
       1351  |  -59267.67   5277.444   -11.23   0.000    -70242.72   -48292.63
       1354  |  -82454.62   5883.018   -14.02   0.000    -94689.03   -70220.22
       1360  |  -74266.26    5675.84   -13.08   0.000    -86069.82   -62462.71
       1364  |  -112522.4   7471.731   -15.06   0.000    -128060.7   -96984.04
       1368  |  -53389.49    5370.64    -9.94   0.000    -64558.35   -42220.63
       1375  |  -6187.306   5282.231    -1.17   0.255    -17172.31    4797.694
       1378  |  -95963.44   6645.296   -14.44   0.000    -109783.1   -82143.79
       1420  |  -75805.86   4186.125   -18.11   0.000    -84511.38   -67100.34
       1430  |  -43245.71   2357.846   -18.34   0.000    -48149.12    -38342.3
       1431  |  -18931.84   3263.686    -5.80   0.000    -25719.04   -12144.63
       1432  |   38107.35   2218.533    17.18   0.000     33493.65    42721.04
       1440  |  -83293.43   4608.151   -18.08   0.000     -92876.6   -73710.26
       1450  |   154711.4   4748.013    32.58   0.000     144837.4    164585.5
       1451  |   252492.3   14588.76    17.31   0.000     222153.3    282831.3
       1452  |  -23038.69   2006.285   -11.48   0.000    -27210.99    -18866.4
       1453  |  -32577.38    2488.73   -13.09   0.000    -37752.97   -27401.78
       1460  |   154819.2   5024.981    30.81   0.000     144369.2    165269.2
       1462  |   16083.62   2787.547     5.77   0.000     10286.59    21880.64
       1463  |   46347.22   2402.417    19.29   0.000     41351.12    51343.32
       1464  |   25916.87   2323.439    11.15   0.000     21085.02    30748.73
       1468  |  -63205.04   3724.279   -16.97   0.000    -70950.11   -55459.98
       1469  |  -7742.212   2574.488    -3.01   0.007    -13096.15    -2388.27
       1473  |   6069.115    3123.11     1.94   0.066    -425.7473    12563.98
       1475  |  -75410.85   3790.616   -19.89   0.000    -83293.86   -67527.83
       1501  |   51469.92   2585.206    19.91   0.000     46093.69    56846.15
       1503  |   122692.4   4211.597    29.13   0.000       113934    131450.9
       1504  |  -349.0945   3122.299    -0.11   0.912     -6842.27    6144.081
       1505  |   153520.3   3357.534    45.72   0.000     146537.9    160502.6
       1506  |  -47639.56   2544.471   -18.72   0.000    -52931.08   -42348.05
       1507  |   92849.63   1991.455    46.62   0.000     88708.18    96991.09
       1510  |  -27278.26   2380.056   -11.46   0.000    -32227.86   -22328.66
       1515  |  -39122.79   2872.047   -13.62   0.000    -45095.54   -33150.04
       1516  |   27504.03   1964.085    14.00   0.000     23419.49    31588.57
       1519  |   98929.73    3082.67    32.09   0.000     92518.96    105340.5
       1520  |   125819.7   5170.323    24.33   0.000     115067.5      136572
       1521  |  -59674.88   4428.527   -13.48   0.000     -68884.5   -50465.25
       1523  |   124954.6   3363.709    37.15   0.000     117959.3    131949.8
       1524  |  -25009.41   2517.239    -9.94   0.000    -30244.29   -19774.53
       1527  |  -4401.931   2072.982    -2.12   0.046    -8712.933    -90.9289
       1529  |   15447.47   3599.218     4.29   0.000     7962.488    22932.46
       1531  |  -19124.16   2008.681    -9.52   0.000    -23301.44   -14946.88
       1532  |   191613.1   5177.026    37.01   0.000     180846.9    202379.4
       1534  |   53015.21   2263.938    23.42   0.000      48307.1    57723.33
       1535  |  -57375.74   3382.617   -16.96   0.000    -64410.28   -50341.21
       1540  |  -52516.98   1967.366   -26.69   0.000    -56608.34   -48425.62
       1541  |   70470.79   1872.496    37.63   0.000     66576.73    74364.86
       1543  |   44118.31   5750.807     7.67   0.000     32158.85    56077.77
       1545  |   16428.38    22534.3     0.73   0.474    -30434.26    63291.03
       1550  |  -77947.36   3775.724   -20.64   0.000     -85799.4   -70095.31
       1562  |   39757.77   2251.352    17.66   0.000     35075.83    44439.71
       1564  |   132331.6   3772.846    35.07   0.000     124485.6    140177.7
       1566  |  -866.8913    1646.98    -0.53   0.604    -4291.974    2558.192
       1568  |   201557.8   10199.97    19.76   0.000     180345.8    222769.8
       1569  |   27429.24   2353.717    11.65   0.000     22534.41    32324.06
       1570  |  -21678.12   13198.25    -1.64   0.115    -49125.39    5769.153
       1571  |  -31438.51     1322.3   -23.78   0.000    -34188.38   -28688.64
       1581  |   224678.2   7919.111    28.37   0.000     208209.5    241146.8
       1583  |   6148.065   1929.435     3.19   0.004     2135.586    10160.54
       1585  |  -43008.36    2845.91   -15.11   0.000    -48926.75   -37089.96
       1590  |   150725.4   3855.465    39.09   0.000     142707.5    158743.3
       1602  |  -45609.75   2052.072   -22.23   0.000    -49877.26   -41342.23
       1603  |  -77388.87   2927.381   -26.44   0.000    -83476.69   -71301.05
       1604  |  -59993.57   2621.239   -22.89   0.000    -65444.74   -54542.41
       1605  |  -54517.95   1846.599   -29.52   0.000    -58358.16   -50677.74
       1606  |  -50402.27   2205.915   -22.85   0.000    -54989.72   -45814.82
       1607  |  -90101.71   1755.753   -51.32   0.000       -93753   -86450.42
       1608  |  -192074.5   7012.212   -27.39   0.000    -206657.2   -177491.8
       1609  |   15957.35   2097.591     7.61   0.000     11595.17    20319.53
       1610  |  -109895.3   1737.733   -63.24   0.000    -113509.1   -106281.5
       1612  |   29467.03   3149.011     9.36   0.000     22918.31    36015.76
       1613  |  -27063.37   8575.895    -3.16   0.005    -44897.92   -9228.821
       1701  |   11686.01   23335.72     0.50   0.622    -36843.27    60215.29
       1702  |  -63592.12   20287.89    -3.13   0.005    -105783.1   -21401.14
       1718  |   88182.41   4287.457    20.57   0.000     79266.16    97098.67
       1719  |   184295.5   16927.49    10.89   0.000     149092.8    219498.1
       1720  |   318494.2   9499.399    33.53   0.000     298739.1    338249.3
       1721  |   122882.7   15205.44     8.08   0.000     91261.27    154504.2
       1730  |     392554   17186.38    22.84   0.000       356813    428295.1
       1740  |   244775.2   6784.604    36.08   0.000     230665.9    258884.6
       1741  |   592206.9   11611.15    51.00   0.000     568060.2    616353.6
       1742  |   561790.4   26197.29    21.44   0.000     507310.1    616270.6
       1746  |   223873.7   6450.879    34.70   0.000     210458.4    237289.1
       1747  |   29837.28   2788.902    10.70   0.000     24037.44    35637.11
       1748  |   338145.3   9346.303    36.18   0.000     318708.6      357582
       1749  |   62505.93   2992.783    20.89   0.000      56282.1    68729.77
       1752  |   47517.05   3128.979    15.19   0.000     41009.98    54024.12
       1754  |   60727.31    3417.63    17.77   0.000     53619.96    67834.66
       1756  |   117397.7   4276.164    27.45   0.000     108504.9    126290.4
       1757  |   114244.2   4571.431    24.99   0.000     104737.4    123751.1
       1760  |   219894.4   11553.98    19.03   0.000     195866.6    243922.2
       1770  |   543373.3   11751.69    46.24   0.000     518934.3    567812.3
       1772  |   359114.7   11898.23    30.18   0.000       334371    383858.4
       1773  |   719263.1   20282.44    35.46   0.000     677083.5    761442.8
       1775  |   284541.4   5638.239    50.47   0.000       272816    296266.7
       1776  |   479672.8   10603.38    45.24   0.000     457621.8    501723.7
       1778  |   333408.6   34329.17     9.71   0.000     262017.1      404800
       1801  |   205427.6   12389.07    16.58   0.000     179663.1    231192.1
       1803  |     259503   14812.97    17.52   0.000     228697.7    290308.2
       1810  |   348250.7   12145.08    28.67   0.000     322993.6    373507.8
       1821  |   96612.45   6544.392    14.76   0.000     83002.64    110222.3
       1824  |     190816   8223.373    23.20   0.000     173714.6    207917.5
       1826  |   22936.11   3013.903     7.61   0.000     16668.35    29203.86
       1827  |   177360.3    4057.82    43.71   0.000     168921.6    185798.9
       1830  |   9012.186   3401.368     2.65   0.015     1938.653    16085.72
       1832  |  -8042.338   3265.886    -2.46   0.023    -14834.12   -1250.556
       1833  |   167889.5   4516.115    37.18   0.000     158497.7    177281.3
       1834  |   178190.9   9194.297    19.38   0.000     159070.3    197311.5
       1835  |   11185.69   3880.172     2.88   0.009     3116.434    19254.95
       1840  |   -90207.6   4266.338   -21.14   0.000    -99079.94   -81335.27
       1841  |   2748.477   6856.116     0.40   0.693     -11509.6    17006.55
       1843  |    41375.5   7133.903     5.80   0.000     26539.74    56211.26
       1844  |   110261.8   6739.626    16.36   0.000     96246.01    124277.6
       1845  |   259071.6   9696.324    26.72   0.000       238907    279236.2
       1850  |  -87942.18   7105.197   -12.38   0.000    -102718.2   -73166.11
       1851  |  -55834.11   9350.398    -5.97   0.000    -75279.33    -36388.9
       1852  |  -76886.52   11579.57    -6.64   0.000    -100967.5   -52805.49
       1854  |  -48942.66    6042.01    -8.10   0.000     -61507.7   -36377.61
       1860  |   167106.7   5906.214    28.29   0.000       154824    179389.3
       1864  |   276468.5   9834.122    28.11   0.000     256017.3    296919.6
       1867  |   291723.3   15379.34    18.97   0.000     259740.2    323706.4
       1876  |   92595.63   5875.016    15.76   0.000     80377.87    104813.4
       1880  |   246583.4   13573.38    18.17   0.000       218356    274810.8
       1886  |   276356.8   9575.631    28.86   0.000     256443.2    296270.4
       1887  |     221552    12269.8    18.06   0.000     196035.6    247068.5
       1890  |   618009.1   36440.62    16.96   0.000     542226.7    693791.5
       1901  |  -63435.44   4456.254   -14.24   0.000    -72702.73   -54168.15
       1902  |  -20798.49   7744.352    -2.69   0.014    -36903.75   -4693.227
       1904  |   37378.47   7773.448     4.81   0.000      21212.7    53544.24
       1905  |  -6608.862   8835.301    -0.75   0.463    -24982.88    11765.15
       1906  |   183905.2   9499.434    19.36   0.000       164150    203660.3
       1907  |   167912.3   9598.357    17.49   0.000     147951.5    187873.2
       1913  |      47600   3491.201    13.63   0.000     40339.65    54860.35
       1915  |   125927.5   8514.658    14.79   0.000     108220.3    143634.7
       1921  |     428995   10122.74    42.38   0.000     407943.6    450046.4
       1923  |   205917.3   9681.607    21.27   0.000     185783.3    226051.3
       1929  |   188091.5   27856.12     6.75   0.000     130161.6    246021.5
       1930  |   131755.6   6709.374    19.64   0.000     117802.7    145708.5
       1938  |   266963.3   8919.324    29.93   0.000     248414.6    285512.1
       1940  |   381396.2   14450.96    26.39   0.000     351343.8    411448.6
       1945  |   302741.7   13028.26    23.24   0.000     275647.9    329835.5
       1949  |   306118.1   9605.483    31.87   0.000     286142.4    326093.8
       1950  |   175365.1   11276.18    15.55   0.000       151915    198815.2
       1951  |   214789.4    7194.04    29.86   0.000     199828.6    229750.2
       1952  |   68530.49   2635.687    26.00   0.000     63049.28     74011.7
       1960  |   177399.2   10069.52    17.62   0.000     156458.5    198339.9
       1966  |   290000.6   10016.42    28.95   0.000     269170.3    310830.9
       1969  |   167760.1   6570.501    25.53   0.000       154096    181424.3
       1970  |   44173.54   6386.156     6.92   0.000      30892.8    57454.27
       1983  |   357498.9   10282.34    34.77   0.000     336115.6    378882.2
       1984  |   383552.1   10327.17    37.14   0.000     362075.6    405028.6
       1985  |   247919.6   7440.111    33.32   0.000       232447    263392.1
       2019  |   99871.15   2853.546    35.00   0.000     93936.87    105805.4
       2021  |   209987.6    17336.7    12.11   0.000     173933.9    246041.2
       2025  |   607984.8   17053.98    35.65   0.000     572519.1    643450.5
       2026  |   227164.8   11423.46    19.89   0.000     203408.4    250921.2
       2030  |   881567.8   18780.03    46.94   0.000     842512.6      920623
       2038  |   120085.2   3856.764    31.14   0.000     112064.6    128105.8
       2043  |   533508.6   19696.13    27.09   0.000     492548.2    574468.9
       2045  |   184724.9   6377.543    28.96   0.000     171462.1    197987.7
       2048  |   120871.2   5368.495    22.51   0.000     109706.8    132035.6
       2050  |   142054.9    5674.58    25.03   0.000     130253.9    153855.8
       2052  |     399600    11139.6    35.87   0.000     376433.9      422766
       2053  |     207216   5846.255    35.44   0.000     195058.1      219374
       2054  |   108177.1   3460.661    31.26   0.000     100980.2    115373.9
       2056  |   283050.5   6935.543    40.81   0.000     268627.2    297473.7
       2061  |   381778.7   10338.38    36.93   0.000     360278.8    403278.5
       2062  |   213090.6   9290.304    22.94   0.000     193770.4    232410.9
       2066  |   326394.7   10857.78    30.06   0.000     303814.7    348974.7
       2067  |     205143   10690.96    19.19   0.000       182910    227376.1
       2072  |   135458.4   6257.699    21.65   0.000     122444.8      148472
       2081  |     236531   8581.908    27.56   0.000       218684    254378.1
       2090  |   441479.6   18321.27    24.10   0.000     403378.5    479580.8
       2093  |   232083.8   6413.922    36.18   0.000     218745.3    245422.3
       2108  |   751823.4   50815.74    14.80   0.000     646146.3    857500.5
       2109  |   372934.4   27590.11    13.52   0.000     315557.7    430311.2
       2110  |   694512.2   42709.59    16.26   0.000     605692.7    783331.7
       2111  |     442524   30665.21    14.43   0.000     378752.2    506295.8
       2113  |   171105.3   18409.45     9.29   0.000     132820.7    209389.8
       2114  |   244967.7   22329.19    10.97   0.000     198531.6    291403.7
       2115  |   302241.4   28419.74    10.63   0.000     243139.3    361343.5
       2116  |   609088.5   47494.57    12.82   0.000     510318.1    707858.8
       2118  |   325823.3   39020.45     8.35   0.000     244675.8    406970.7
       2138  |   384836.8   35392.49    10.87   0.000     311234.1    458439.5
       2139  |   277516.5    32419.6     8.56   0.000     210096.2    344936.7
       2140  |     303529   30924.32     9.82   0.000     239218.4    367839.7
       2141  |   245925.2   28128.52     8.74   0.000     187428.7    304421.6
       2142  |     478660   47521.39    10.07   0.000     379833.9    577486.2
       2143  |   397577.9   8782.461    45.27   0.000     379313.8      415842
       2144  |     367132   26247.13    13.99   0.000     312548.1    421715.9
       2145  |   306079.5   7979.885    38.36   0.000     289484.4    322674.6
       2148  |   78197.56    11854.2     6.60   0.000      53545.4    102849.7
       2149  |   136030.4   13383.47    10.16   0.000       108198    163862.9
       2150  |   8564.066    9247.42     0.93   0.365       -10667    27795.13
       2151  |   123132.3   12506.95     9.85   0.000     97122.65    149141.9
       2155  |   242530.8   20575.31    11.79   0.000     199742.1    285319.5
       2169  |   78339.62   8800.219     8.90   0.000     60038.56    96640.67
       2170  |   131974.9   14403.75     9.16   0.000     102020.7    161929.2
       2171  |   124510.1   12114.29    10.28   0.000     99317.08    149703.2
       2176  |   191707.7   18758.08    10.22   0.000     152698.1    230717.2
       2180  |   244468.9   13611.29    17.96   0.000     216162.7    272775.2
       2184  |   173055.1   18890.98     9.16   0.000     133769.2    212341.1
       2186  |   360993.2   20784.75    17.37   0.000     317768.9    404217.4
       2188  |   149741.2   7260.198    20.62   0.000     134642.8    164839.6
       2199  |    2777414   125496.6    22.13   0.000      2516429     3038398
       2210  |   696202.7   48545.51    14.34   0.000     595246.7    797158.6
       2215  |   166088.2   23970.49     6.93   0.000     116238.9    215937.6
       2301  |  -19704.29   5211.173    -3.78   0.001    -30541.52   -8867.065
       2302  |  -28492.27   4821.496    -5.91   0.000    -38519.12   -18465.42
       2303  |    69828.6   10994.77     6.35   0.000     46963.73    92693.47
       2322  |   125410.5   3985.088    31.47   0.000     117123.1      133698
       2324  |   152728.1   5961.696    25.62   0.000     140330.1    165126.1
       2330  |   43403.96   3876.727    11.20   0.000     35341.86    51466.06
       2332  |   369433.2   11377.34    32.47   0.000     345772.7    393093.7
       2333  |   122457.4   7362.935    16.63   0.000     107145.4    137769.5
       2338  |    39858.7   3135.278    12.71   0.000     33338.54    46378.87
       2339  |   271061.1   8167.358    33.19   0.000     254076.1      288046
       2341  |     147896    6128.86    24.13   0.000     135150.3    160641.6
       2343  |   109225.8    5497.89    19.87   0.000     97792.27    120659.2
       2347  |   72171.26   3663.668    19.70   0.000     64552.24    79790.27
       2351  |   54231.34   3881.204    13.97   0.000     46159.94    62302.75
       2359  |   175397.2   6083.164    28.83   0.000     162746.5    188047.8
       2360  |   69614.73   3613.348    19.27   0.000     62100.36     77129.1
       2364  |   101011.2   4024.914    25.10   0.000     92640.91    109381.4
       2368  |   114936.5   7758.496    14.81   0.000     98801.83    131071.2
       2370  |   24739.65   3835.463     6.45   0.000     16763.37    32715.93
       2379  |   112595.3   9529.559    11.82   0.000     92777.51    132413.1
       2382  |   104526.4   4876.888    21.43   0.000     94384.32    114668.4
       2420  |   640370.2   35252.73    18.17   0.000     567058.2    713682.3
       2421  |   660672.1    35933.9    18.39   0.000     585943.5    735400.7
       2445  |   474478.6   38247.13    12.41   0.000     394939.3    554017.8
       2446  |     384695   34547.88    11.14   0.000     312848.7    456541.2
       2451  |   171538.3    12876.7    13.32   0.000     144759.7    198316.9
       2452  |   211122.8   13874.55    15.22   0.000     182269.1    239976.5
       2453  |   163484.4   15579.69    10.49   0.000     131084.6    195884.1
       2458  |   462237.9    29794.6    15.51   0.000     400276.6    524199.1
       2472  |     186637   16734.17    11.15   0.000     151836.4    221437.6
       2474  |   260084.4   25816.63    10.07   0.000     206395.8      313773
       2476  |   280512.2   25027.31    11.21   0.000     228465.1    332559.3
       2478  |   510637.8   35438.39    14.41   0.000     436939.6      584336
       2482  |   779366.3   34082.94    22.87   0.000     708486.9    850245.6
       2492  |   701291.3   30018.53    23.36   0.000     638864.4    763718.3
       2493  |    1166159    32998.5    35.34   0.000      1097534     1234783
       2535  |   984901.1   38528.63    25.56   0.000     904776.5     1065026
       2539  |   506747.3   30990.83    16.35   0.000     442298.3    571196.2
       2540  |   350338.5    13790.2    25.40   0.000     321660.2    379016.8
       2554  |   978076.9   49205.17    19.88   0.000     875749.1     1080405
       2557  |   234722.4    18888.7    12.43   0.000     195441.2    274003.6
       2563  |   160419.2   5670.359    28.29   0.000       148627    172211.3
       2571  |   -15180.8   3022.385    -5.02   0.000    -21466.19   -8895.406
       2575  |   488587.4   24703.27    19.78   0.000     437214.1    539960.7
       2630  |   224657.5   10525.44    21.34   0.000     202768.6    246546.4
       2631  |   139852.6   7636.403    18.31   0.000     123971.9    155733.4
       2633  |   469371.6   18596.36    25.24   0.000     430698.4    508044.9
       2638  |   253710.8   12606.11    20.13   0.000       227495    279926.7
       2642  |   161026.3   8732.713    18.44   0.000     142865.6      179187
       2645  |   168196.9   8443.305    19.92   0.000     150638.1    185755.7
       2649  |   95414.07   5756.582    16.57   0.000      83442.6    107385.5
       2653  |   381564.1   14034.22    27.19   0.000     352378.3    410749.8
       2657  |   215529.1   23260.37     9.27   0.000     167156.5    263901.7
       2666  |   337426.5   14214.33    23.74   0.000     307866.2    366986.8
       2667  |     257505   11996.66    21.46   0.000     232556.6    282453.5
       2703  |   18417.47    2020.12     9.12   0.000      14216.4    22618.54
       2715  |    50315.9   3190.728    15.77   0.000     43680.42    56951.38
       2719  |  -9183.798   1857.044    -4.95   0.000    -13045.73   -5321.863
       2720  |  -32570.32   2123.541   -15.34   0.000    -36986.46   -28154.17
       2721  |  -38840.92   2882.991   -13.47   0.000    -44836.43   -32845.42
       2722  |   84486.29   5997.446    14.09   0.000     72013.91    96958.66
       2723  |  -49755.68   3067.541   -16.22   0.000    -56134.99   -43376.38
       2724  |  -46202.56   3492.436   -13.23   0.000    -53465.48   -38939.64
       2725  |  -20078.51   2306.688    -8.70   0.000    -24875.53   -15281.49
       2726  |   78.69389   1720.734     0.05   0.964    -3499.769    3657.157
       2738  |     177400   7344.473    24.15   0.000     162126.3    192673.6
       2739  |   211263.3    7072.13    29.87   0.000       196556    225970.6
       2740  |  -67224.74   1552.836   -43.29   0.000    -70454.04   -63995.45
       2743  |   82640.86   2859.604    28.90   0.000     76693.99    88587.73
       2744  |  -51726.72    2350.63   -22.01   0.000    -56615.12   -46838.32
       2745  |  -47612.75   910.7839   -52.28   0.000    -49506.82   -45718.67
       2746  |  -72848.87   1163.764   -62.60   0.000    -75269.05   -70428.69
       2762  |   83983.87   1959.186    42.87   0.000     79909.52    88058.22
       2766  |   17056.24   11315.45     1.51   0.147    -6475.531    40588.02
       2767  |   227217.9   10139.68    22.41   0.000     206131.3    248304.5
       2769  |   97729.21   4280.514    22.83   0.000     88827.39      106631
       2770  |   179191.5   6890.832    26.00   0.000     164861.2    193521.7
       2771  |   44162.13   2755.829    16.02   0.000     38431.07    49893.19
       2777  |   10288.28   2373.616     4.33   0.000     5352.072    15224.48
       2779  |   66915.29   3494.775    19.15   0.000      59647.5    74183.07
       2780  |          0   .0000432     0.00   1.000    -.0000898    .0000898
       2790  |   165582.7   6016.324    27.52   0.000     153071.1    178094.3
             |
       _cons |   131328.4   6403.142    20.51   0.000     118012.3    144644.4
------------------------------------------------------------------------------

Cluster combination  levels
year                 22
zipcode              363
year zipcode         7788
(est1 stored)

. esttab est1 using "$MyProject/results/tables/reg-city-ban.tex", replace ///
>         keep(retail_ban) ///
>         collabel("Average home value") ///
>         coeflabel(retail_ban "Ban on cannabis retail") ///
>         cells(b(star fmt(3)) se(par fmt(2))) ///
>         legend label
(output written to /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/tables/reg-city-ban.tex)

. 
. ** EOF
. 
end of do-file

. do "$MyProject/scripts/6d_regression_state_legality_on_home_values.do"

. ************
. * SCRIPT: 6d_regression_state_legality_on_home_values.do
. * PURPOSE: runs a regression of state legality on home values
. ************
. 
. use "$MyProject/processed/zillow_home_values_us.dta", clear

. 
. destring zipcode, replace
zipcode: all characters numeric; replaced as long

. format zipcode %05.0f

. 
. forvalues y = 2000/2021 {
  2.         gen avg_hv_`y' = (hv_01_`y' + hv_02_`y' + hv_03_`y' + hv_04_`y' + hv_05_`y' + hv_06_`y' + hv_07_`y' + hv_08_`y' + hv_09_`y' + hv_10_`y' + hv_11_`y' + hv_12_`y')/12
  3. }
(14,754 missing values generated)
(14,197 missing values generated)
(13,762 missing values generated)
(13,017 missing values generated)
(12,368 missing values generated)
(11,896 missing values generated)
(11,396 missing values generated)
(11,009 missing values generated)
(10,544 missing values generated)
(9,206 missing values generated)
(5,851 missing values generated)
(5,373 missing values generated)
(3,366 missing values generated)
(2,941 missing values generated)
(2,563 missing values generated)
(2,183 missing values generated)
(1,857 missing values generated)
(1,526 missing values generated)
(1,159 missing values generated)
(601 missing values generated)
(347 missing values generated)
(998 missing values generated)

. drop hv_*

. 
. * Create one row for each observation
. expand 22
(639,828 observations created)

. bysort zipcode: gen year = 1999 + _n

. gen avg_hv = .
(670,296 missing values generated)

. forvalues y = 2000/2021 {
  2.         replace avg_hv = avg_hv_`y' if year == `y'
  3. }
(15,714 real changes made)
(16,271 real changes made)
(16,706 real changes made)
(17,451 real changes made)
(18,100 real changes made)
(18,572 real changes made)
(19,072 real changes made)
(19,459 real changes made)
(19,924 real changes made)
(21,262 real changes made)
(24,617 real changes made)
(25,095 real changes made)
(27,102 real changes made)
(27,527 real changes made)
(27,905 real changes made)
(28,285 real changes made)
(28,611 real changes made)
(28,942 real changes made)
(29,309 real changes made)
(29,867 real changes made)
(30,121 real changes made)
(29,470 real changes made)

. drop avg_hv_*

. drop if missing(avg_hv)
(150,914 observations deleted)

. 
. * Create enum variable for state
. encode abbreviation, gen(abbrev)

. 
. * Create treatment variable
. gen legal_med = medical & real(year_legalized_med) <= year

. 
. * Add lags/leads
. gen c_m8_med = medical & real(year_legalized_med) == year + 8

. gen c_m7_med = medical & real(year_legalized_med) == year + 7

. gen c_m6_med = medical & real(year_legalized_med) == year + 6

. gen c_m5_med = medical & real(year_legalized_med) == year + 5

. gen c_m4_med = medical & real(year_legalized_med) == year + 4

. gen c_m3_med = medical & real(year_legalized_med) == year + 3

. gen c_m2_med = medical & real(year_legalized_med) == year + 2

. gen c_0_med = medical & real(year_legalized_med) == year

. gen c_p1_med = medical & real(year_legalized_med) == year - 1

. gen c_p2_med = medical & real(year_legalized_med) == year - 2

. gen c_p3_med = medical & real(year_legalized_med) == year - 3

. gen c_p4_med = medical & real(year_legalized_med) == year - 4

. gen c_p5_med = medical & real(year_legalized_med) == year - 5

. gen c_p6_med = medical & real(year_legalized_med) == year - 6

. gen c_p7_med = medical & real(year_legalized_med) == year - 7

. gen c_p8_med = medical & real(year_legalized_med) == year - 8

. 
. local treatment_med medical c_m8_med c_m7_med c_m6_med c_m5_med c_m4_med c_m3_med c_m2_med c_0_med c_p1_med c_p2_med c_p3_med c_p4_med c_p5_med c_p6_med c_p7_med c_p8_med

. 
. * Run regression for medical
. reg avg_hv `treatment_med' i.year i.abbrev, vce(cluster year abbrev)
note: 51.abbrev omitted because of collinearity.

      Source |       SS           df       MS      Number of obs   =   519,382
-------------+----------------------------------   F(87, 519294)   =   2440.17
       Model |  6.5825e+15        87  7.5661e+13   Prob > F        =    0.0000
    Residual |  1.6101e+16   519,294  3.1006e+10   R-squared       =    0.2902
-------------+----------------------------------   Adj R-squared   =    0.2901
       Total |  2.2684e+16   519,381  4.3675e+10   Root MSE        =    1.8e+05

                            (Std. err. adjusted for clustering on year abbrev)
------------------------------------------------------------------------------
             |               Robust
      avg_hv | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
     medical |  -6238.338    4639.66    -1.34   0.193    -15887.04    3410.363
    c_m8_med |   7887.147   6863.571     1.15   0.263    -6386.431    22160.73
    c_m7_med |   11194.26   5404.955     2.07   0.051    -45.95587    22434.48
    c_m6_med |   11656.47   4918.467     2.37   0.027     1427.953    21884.98
    c_m5_med |   11637.41   5106.445     2.28   0.033     1017.979    22256.85
    c_m4_med |   9941.167   4850.986     2.05   0.053    -147.0095    20029.34
    c_m3_med |     4486.6   4972.988     0.90   0.377    -5855.295     14828.5
    c_m2_med |  -735.6179   4764.295    -0.15   0.879    -10643.51    9172.276
     c_0_med |  -11349.23   6880.076    -1.65   0.114    -25657.14    2958.668
    c_p1_med |  -14150.71   7924.266    -1.79   0.089    -30630.12    2328.708
    c_p2_med |  -17669.17   9139.937    -1.93   0.067    -36676.71    1338.366
    c_p3_med |  -20567.47      10988    -1.87   0.075    -43418.26    2283.325
    c_p4_med |  -32828.46    19574.7    -1.68   0.108    -73536.28    7879.365
    c_p5_med |   -30234.4   20035.99    -1.51   0.146    -71901.53    11432.73
    c_p6_med |   -28533.5   21478.42    -1.33   0.198    -73200.33    16133.32
    c_p7_med |  -24843.29   19469.43    -1.28   0.216    -65332.18     15645.6
    c_p8_med |  -21935.55   16849.54    -1.30   0.207    -56976.08    13104.98
             |
        year |
       2000  |          0   .0000575     0.00   1.000    -.0001197    .0001197
       2001  |   13325.68   7559.362     1.76   0.092    -2394.873    29046.24
       2002  |   26511.69    5973.74     4.44   0.000     14088.62    38934.76
       2003  |   41389.13   3809.376    10.87   0.000     33467.09    49311.16
       2004  |   61051.67    6214.59     9.82   0.000     48127.72    73975.61
       2005  |   83870.02   10369.61     8.09   0.000     62305.23    105434.8
       2006  |   100608.3   13251.31     7.59   0.000     73050.69    128165.9
       2007  |   97913.62   10753.13     9.11   0.000     75551.26      120276
       2008  |   80138.05    4647.87    17.24   0.000     70472.27    89803.82
       2009  |   57967.92   3891.725    14.90   0.000     49874.63     66061.2
       2010  |   47828.42   3197.375    14.96   0.000     41179.12    54477.73
       2011  |   39983.84   4021.876     9.94   0.000     31619.89    48347.78
       2012  |   38358.27   3478.571    11.03   0.000     31124.18    45592.35
       2013  |   48487.94   4117.284    11.78   0.000     39925.58     57050.3
       2014  |   61194.56   7681.963     7.97   0.000     45219.04    77170.08
       2015  |   69603.34   9743.444     7.14   0.000     49340.74    89865.94
       2016  |   80115.67   11707.95     6.84   0.000     55767.66    104463.7
       2017  |    90815.3   13821.47     6.57   0.000     62071.97    119558.6
       2018  |   104811.1    16902.9     6.20   0.000     69659.56    139962.6
       2019  |   111577.7   17134.18     6.51   0.000     75945.19    147210.1
       2020  |   121919.1   18777.33     6.49   0.000     82869.49    160968.7
       2021  |     154596   22817.93     6.78   0.000     107143.5    202048.5
             |
      abbrev |
         AK  |          0   .0000643     0.00   1.000    -.0001338    .0001338
         AL  |  -113002.6    4774.12   -23.67   0.000    -122930.9   -103074.3
         AR  |  -139600.6   3674.623   -37.99   0.000    -147242.4   -131958.8
         AZ  |  -10814.88   8009.743    -1.35   0.191    -27472.05    5842.295
         CA  |   282884.6   18236.39    15.51   0.000     244959.9    320809.2
         CO  |   61038.54   8906.364     6.85   0.000     42516.74    79560.34
         CT  |    74916.9   5217.331    14.36   0.000     64066.86    85766.93
         DC  |   287660.6   20942.15    13.74   0.000       244109    331212.2
         DE  |   55180.64   5426.711    10.17   0.000     43895.18     66466.1
         FL  |  -16520.99   9309.238    -1.77   0.090    -35880.61    2838.628
         GA  |  -94913.51   5098.714   -18.62   0.000    -105516.9   -84310.15
         HI  |   287633.7   19337.08    14.87   0.000     247420.1    327847.4
         IA  |    -113687   2341.609   -48.55   0.000    -118556.7   -108817.4
         ID  |  -32043.75    6702.13    -4.78   0.000    -45981.59   -18105.91
         IL  |  -65279.66   7395.592    -8.83   0.000    -80659.64   -49899.69
         IN  |    -121785   3165.949   -38.47   0.000    -128368.9     -115201
         KS  |  -112649.9   6373.867   -17.67   0.000    -125905.1   -99394.69
         KY  |  -139650.6   5931.901   -23.54   0.000    -151986.7   -127314.5
         LA  |  -90629.26   2490.509   -36.39   0.000    -95808.56   -85449.96
         MA  |   163875.8   11905.12    13.77   0.000     139117.8    188633.9
         MD  |   78829.39   7971.072     9.89   0.000     62252.64    95406.14
         ME  |  -26659.41   4705.924    -5.67   0.000    -36445.92   -16872.91
         MI  |  -78865.05   4635.863   -17.01   0.000    -88505.86   -69224.24
         MN  |  -45688.74   6320.082    -7.23   0.000    -58832.07   -32545.41
         MO  |  -99675.11   3661.234   -27.22   0.000    -107289.1   -92061.16
         MS  |  -141154.9   7139.373   -19.77   0.000      -156002   -126307.8
         MT  |   16336.65   4696.887     3.48   0.002     6568.937    26104.36
         NC  |  -76060.94   3887.583   -19.57   0.000    -84145.62   -67976.27
         ND  |  -71893.62   4919.117   -14.62   0.000    -82123.48   -61663.75
         NE  |  -101100.7   3519.651   -28.72   0.000    -108420.2   -93781.19
         NH  |   27632.95   7635.553     3.62   0.002     11753.94    43511.95
         NJ  |   145644.5   7942.867    18.34   0.000     129126.4    162162.6
         NM  |  -48986.25   6690.977    -7.32   0.000     -62900.9   -35071.61
         NV  |   43611.77    13408.9     3.25   0.004     15726.44    71497.11
         NY  |   42424.96   8664.808     4.90   0.000     24405.51    60444.42
         OH  |  -102623.6   4969.988   -20.65   0.000    -112959.3   -92287.95
         OK  |    -141623   3587.089   -39.48   0.000    -149082.8   -134163.3
         OR  |    24799.1   7710.119     3.22   0.004     8765.034    40833.17
         PA  |  -65554.13   2584.525   -25.36   0.000    -70928.95   -60179.32
         RI  |   62337.12   7843.628     7.95   0.000     46025.41    78648.84
         SC  |  -86433.56   4229.295   -20.44   0.000    -95228.86   -77638.26
         SD  |  -80633.79    5223.45   -15.44   0.000    -91496.55   -69771.03
         TN  |  -107162.9   5092.739   -21.04   0.000    -117753.9   -96572.01
         TX  |  -73675.52   3706.766   -19.88   0.000    -81384.16   -65966.88
         UT  |   23010.29   10475.06     2.20   0.039     1226.208    44794.38
         VA  |    13127.6   5453.858     2.41   0.025      1785.68    24469.52
         VT  |  -19709.77   4844.791    -4.07   0.001    -29785.06   -9634.471
         WA  |   56216.47   10906.34     5.15   0.000     33535.48    78897.45
         WI  |  -78453.48   4629.888   -16.95   0.000    -88081.86    -68825.1
         WV  |  -147390.3   2893.436   -50.94   0.000    -153407.5   -141373.1
         WY  |          0  (omitted)
             |
       _cons |   162838.6    11212.5    14.52   0.000     139520.9    186156.2
------------------------------------------------------------------------------

Cluster combination  levels
year                 22
abbrev               51
year abbrev          1090

. 
. * Plot coefficients from regression
. matrix coefs_med = (_b[c_m8_med], _b[c_m7_med], _b[c_m6_med], _b[c_m5_med], _b[c_m4_med], _b[c_m3_med], _b[c_m2_med], 0, _b[c_0_med], _b[c_p1_med], _b[c_p2_med], _b[c_p3_med], _
> b[c_p4_med], _b[c_p5_med], _b[c_p6_med], _b[c_p7_med], _b[c_p8_med])'

. svmat coefs_med

. 
. matrix stderrs_med = (_se[c_m8_med], _se[c_m7_med], _se[c_m6_med], _se[c_m5_med], _se[c_m4_med], _se[c_m3_med], _se[c_m2_med], 0, _se[c_0_med], _se[c_p1_med], _se[c_p2_med], _se
> [c_p3_med], _se[c_p4_med], _se[c_p5_med], _se[c_p6_med], _se[c_p7_med], _se[c_p8_med])'

. svmat stderrs_med

. 
. matrix high_med = coefs_med + invttail(e(df_r),0.025)*stderrs_med

. svmat high_med

. 
. matrix low_med = coefs_med - invttail(e(df_r),0.025)*stderrs_med

. svmat low_med

. 
. matrix rel_time = (-8, -7, -6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8)'

. svmat rel_time

.         
. graph twoway (rcap high_med low_med rel_time in 1/17) (scatter coefs_med rel_time), ///
>         xtitle("Event year") ///
>         xlabel(-8(1)8) ///
>         ylabel(-40000 "-40,000" -20000 "-20,000" 0 "0" 20000 "20,000", angle(0)) ///
>         legend(off) ///
> 

. graph export "$MyProject/results/figures/reg-state-legality-home-vals-med.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-state-legality-home-vals-med.png saved as PNG format

. 
. * Repeat for recreational
. drop coefs_med1 stderrs_med1 high_med1 low_med1 rel_time1

. 
. * Create treatment variable
. gen legal_rec = recreational & real(year_legalized_rec) <= year

. 
. * Add lags/leads
. gen c_m8_rec = recreational & real(year_legalized_rec) == year + 8

. gen c_m7_rec = recreational & real(year_legalized_rec) == year + 7

. gen c_m6_rec = recreational & real(year_legalized_rec) == year + 6

. gen c_m5_rec = recreational & real(year_legalized_rec) == year + 5

. gen c_m4_rec = recreational & real(year_legalized_rec) == year + 4

. gen c_m3_rec = recreational & real(year_legalized_rec) == year + 3

. gen c_m2_rec = recreational & real(year_legalized_rec) == year + 2

. gen c_0_rec = recreational & real(year_legalized_rec) == year

. gen c_p1_rec = recreational & real(year_legalized_rec) == year - 1

. gen c_p2_rec = recreational & real(year_legalized_rec) == year - 2

. gen c_p3_rec = recreational & real(year_legalized_rec) == year - 3

. gen c_p4_rec = recreational & real(year_legalized_rec) == year - 4

. gen c_p5_rec = recreational & real(year_legalized_rec) == year - 5

. gen c_p6_rec = recreational & real(year_legalized_rec) == year - 6

. gen c_p7_rec = recreational & real(year_legalized_rec) == year - 7

. gen c_p8_rec = recreational & real(year_legalized_rec) == year - 8

. 
. local treatment_rec recreational c_m8_rec c_m7_rec c_m6_rec c_m5_rec c_m4_rec c_m3_rec c_m2_rec c_0_rec c_p1_rec c_p2_rec c_p3_rec c_p4_rec c_p5_rec c_p6_rec c_p7_rec c_p8_rec

. 
. * Run regression for medical
. reg avg_hv `treatment_rec' i.year i.abbrev
note: 51.abbrev omitted because of collinearity.

      Source |       SS           df       MS      Number of obs   =   519,382
-------------+----------------------------------   F(87, 519294)   =   2469.43
       Model |  6.6383e+15        87  7.6302e+13   Prob > F        =    0.0000
    Residual |  1.6046e+16   519,294  3.0899e+10   R-squared       =    0.2926
-------------+----------------------------------   Adj R-squared   =    0.2925
       Total |  2.2684e+16   519,381  4.3675e+10   Root MSE        =    1.8e+05

------------------------------------------------------------------------------
      avg_hv | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
recreational |  -38799.59   7621.899    -5.09   0.000    -53738.28   -23860.91
    c_m8_rec |   -5295.27   1971.432    -2.69   0.007    -9159.214   -1431.325
    c_m7_rec |  -15136.44   1954.532    -7.74   0.000    -18967.26   -11305.62
    c_m6_rec |  -13261.56   1938.108    -6.84   0.000    -17060.19   -9462.929
    c_m5_rec |  -16334.15   1934.146    -8.45   0.000    -20125.01   -12543.28
    c_m4_rec |  -15379.57   1921.992    -8.00   0.000    -19146.62   -11612.53
    c_m3_rec |  -7264.457   1914.273    -3.79   0.000    -11016.37   -3512.542
    c_m2_rec |   555.4945   1906.853     0.29   0.771    -3181.877    4292.866
     c_0_rec |   12128.32   1902.076     6.38   0.000     8400.307    15856.33
    c_p1_rec |   23476.05   2210.355    10.62   0.000     19143.82    27808.27
    c_p2_rec |   29176.77   2393.455    12.19   0.000     24485.68    33867.87
    c_p3_rec |    51855.6   2643.984    19.61   0.000     46673.47    57037.72
    c_p4_rec |    81817.1   2983.272    27.43   0.000     75969.98    87664.22
    c_p5_rec |   119817.7    2990.96    40.06   0.000     113955.5    125679.9
    c_p6_rec |   73443.83   4827.235    15.21   0.000      63982.6    82905.05
    c_p7_rec |   88297.48   4845.393    18.22   0.000     78800.66     97794.3
    c_p8_rec |   97985.38   5746.531    17.05   0.000     86722.36    109248.4
             |
        year |
       2001  |   13245.81   1966.086     6.74   0.000     9392.344    17099.28
       2002  |   26229.16   1953.573    13.43   0.000     22400.22     30058.1
       2003  |   41404.63   1933.391    21.42   0.000     37615.24    45194.01
       2004  |   61275.42   1918.816    31.93   0.000     57514.61    65036.24
       2005  |   86562.87   1907.565    45.38   0.000      82824.1    90301.63
       2006  |   104342.1   1896.957    55.00   0.000     100624.1      108060
       2007  |   103265.7   1888.672    54.68   0.000     99563.96    106967.4
       2008  |   87063.46   1897.446    45.88   0.000     83344.53    90782.39
       2009  |      66560   1870.779    35.58   0.000     62893.33    70226.66
       2010  |   54710.43   1821.073    30.04   0.000     51141.19    58279.68
       2011  |   46676.41   1814.713    25.72   0.000     43119.63    50233.19
       2012  |   42875.89   1799.487    23.83   0.000     39348.95    46402.83
       2013  |   51662.58   1815.622    28.45   0.000     48104.02    55221.14
       2014  |   61329.16       1815    33.79   0.000     57771.81     64886.5
       2015  |    67165.9     1792.1    37.48   0.000     63653.44    70678.37
       2016  |   72322.91   1810.891    39.94   0.000     68773.62     75872.2
       2017  |   78245.54   1804.826    43.35   0.000     74708.14    81782.94
       2018  |   88622.74   1810.588    48.95   0.000     85074.05    92171.44
       2019  |   90309.29   1812.099    49.84   0.000     86757.64    93860.95
       2020  |    95330.2   1804.255    52.84   0.000     91793.92    98866.48
       2021  |   124861.6   1820.624    68.58   0.000     121293.2      128430
             |
      abbrev |
         AL  |  -120359.7   4824.119   -24.95   0.000    -129814.8   -110904.6
         AR  |  -154962.6   4790.336   -32.35   0.000    -164351.6   -145573.7
         AZ  |   10741.16   6495.745     1.65   0.098    -1990.299    23472.61
         CA  |   292263.9   6196.784    47.16   0.000     280118.4    304409.4
         CO  |   53659.41   6388.928     8.40   0.000     41137.31    66181.51
         CT  |   97348.63   6650.904    14.64   0.000     84313.07    110384.2
         DC  |   288573.5   10000.75    28.86   0.000     268972.4    308174.7
         DE  |   35802.49   6638.457     5.39   0.000     22791.32    48813.65
         FL  |  -31779.25   4626.018    -6.87   0.000     -40846.1    -22712.4
         GA  |  -100369.4   4695.485   -21.38   0.000    -109572.4   -91166.37
         HI  |   270803.2    6346.76    42.67   0.000     258363.8    283242.7
         IA  |  -126006.8   4725.314   -26.67   0.000    -135268.3   -116745.3
         ID  |  -34125.63   5392.811    -6.33   0.000    -44695.37   -23555.89
         IL  |  -46738.92   6258.723    -7.47   0.000    -59005.82   -34472.02
         IN  |  -125081.9    4740.29   -26.39   0.000    -134372.8   -115791.1
         KS  |  -113900.2   5031.685   -22.64   0.000    -123762.1   -104038.2
         KY  |  -143588.7   4749.327   -30.23   0.000    -152897.2   -134280.1
         LA  |  -103422.6   4985.289   -20.75   0.000    -113193.6   -93651.59
         MA  |   172210.8   6350.376    27.12   0.000     159764.2    184657.3
         MD  |    61090.5   4791.352    12.75   0.000      51699.6     70481.4
         ME  |  -20077.49   6480.648    -3.10   0.002    -32779.36   -7375.628
         MI  |   -61768.2   6271.988    -9.85   0.000     -74061.1    -49475.3
         MN  |   -64708.7   4710.207   -13.74   0.000    -73940.56   -55476.84
         MO  |  -109535.9   4728.991   -23.16   0.000    -118804.6   -100267.2
         MS  |  -143169.1   5495.881   -26.05   0.000    -153940.9   -132397.4
         MT  |   46347.27   7126.978     6.50   0.000     32378.61    60315.92
         NC  |  -81053.35   4687.392   -17.29   0.000    -90240.49    -71866.2
         ND  |  -87159.56   6358.953   -13.71   0.000    -99622.91   -74696.21
         NE  |  -104159.3   5004.043   -20.82   0.000    -113967.1   -94351.56
         NH  |   8776.261   5125.616     1.71   0.087    -1269.784    18822.31
         NJ  |   167455.5   6336.671    26.43   0.000     155035.8    179875.2
         NM  |  -21641.16   7098.345    -3.05   0.002    -35553.69   -7728.625
         NV  |    50141.3   6933.128     7.23   0.000     36552.59    63730.01
         NY  |   66259.98   6209.315    10.67   0.000     54089.92    78430.04
         OH  |    -117878   4599.045   -25.63   0.000      -126892     -108864
         OK  |    -153757   4729.175   -32.51   0.000    -163026.1     -144488
         OR  |   23897.29   6439.268     3.71   0.000     11276.53    36518.05
         PA  |  -80788.13   4567.717   -17.69   0.000    -89740.71   -71835.54
         RI  |    42812.8   6184.868     6.92   0.000     30690.65    54934.94
         SC  |  -91179.94   4919.748   -18.53   0.000    -100822.5   -81537.39
         SD  |  -84164.77   6401.009   -13.15   0.000    -96710.55      -71619
         TN  |  -112952.1   4713.502   -23.96   0.000    -122190.4   -103713.8
         TX  |  -77155.76    4578.78   -16.85   0.000    -86130.03    -68181.5
         UT  |   12765.46   5348.828     2.39   0.017     2281.922    23248.99
         VA  |   38257.71   6321.112     6.05   0.000     25868.53    50646.89
         VT  |  -3616.243   6608.782    -0.55   0.584    -16569.25    9336.762
         WA  |    49025.6   6360.022     7.71   0.000     36560.15    61491.04
         WI  |  -81729.16   4748.736   -17.21   0.000    -91036.54   -72421.79
         WV  |  -160592.3   4868.869   -32.98   0.000    -170135.2   -151049.5
         WY  |          0  (omitted)
             |
       _cons |   171735.9    4689.42    36.62   0.000     162544.7      180927
------------------------------------------------------------------------------

. 
. * Plot coefficients from regression
. matrix coefs_rec = (_b[c_m8_rec], _b[c_m7_rec], _b[c_m6_rec], _b[c_m5_rec], _b[c_m4_rec], _b[c_m3_rec], _b[c_m2_rec], 0, _b[c_0_rec], _b[c_p1_rec], _b[c_p2_rec], _b[c_p3_rec], _
> b[c_p4_rec], _b[c_p5_rec], _b[c_p6_rec], _b[c_p7_rec], _b[c_p8_rec])'

. svmat coefs_rec

. 
. matrix stderrs_rec = (_se[c_m8_rec], _se[c_m7_rec], _se[c_m6_rec], _se[c_m5_rec], _se[c_m4_rec], _se[c_m3_rec], _se[c_m2_rec], 0, _se[c_0_rec], _se[c_p1_rec], _se[c_p2_rec], _se
> [c_p3_rec], _se[c_p4_rec], _se[c_p5_rec], _se[c_p6_rec], _se[c_p7_rec], _se[c_p8_rec])'

. svmat stderrs_rec

. 
. matrix high_rec = coefs_rec + invttail(e(df_r),0.025)*stderrs_rec

. svmat high_rec

. 
. matrix low_rec = coefs_rec - invttail(e(df_r),0.025)*stderrs_rec

. svmat low_rec

. 
. matrix rel_time = (-8, -7, -6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8)'

. svmat rel_time

.         
. graph twoway (rcap high_rec low_rec rel_time in 1/17) (scatter coefs_rec rel_time), ///
>         xtitle("Event year") ///
>         xlabel(-8(1)8) ///
>         ylabel(-50000 "-50,000" 0 "0" 50000 "50,000" 100000 "100,000" 150000 "150,000", angle(0)) ///
>         legend(off) ///
> 

. graph export "$MyProject/results/figures/reg-state-legality-home-vals-rec.png", replace
file /Users/anniebryan/Documents/College/2021-22/14.33/Project/results/figures/reg-state-legality-home-vals-rec.png saved as PNG format

. 
end of do-file

. 
. * End log
. di "End date and time: $S_DATE $S_TIME"
End date and time:  8 May 2022 20:51:36

. log close
      name:  <unnamed>
       log:  /Users/anniebryan/Documents/College/2021-22/14.33/Project/scripts/logs/2022.05.08-20.40.30.log.txt
  log type:  text
 closed on:   8 May 2022, 20:51:36
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
